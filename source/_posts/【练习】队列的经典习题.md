---
title: ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜
typora-root-url: ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜
mathjax: true
date: 2025-06-14 12:47:02
tags:
    - å®è·µ
    - LeetCode
categories: 
  - ç»å…¸é˜Ÿåˆ—/æ ˆç®—æ³•
  - ç®—æ³•
  - æ•°æ®ç»“æ„
---

# ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜

## [è€ƒå¯Ÿå…ˆè¿›å…ˆå‡ºæ€§è´¨](https://labuladong.online/algo/problem-set/queue/#è€ƒå¯Ÿå…ˆè¿›å…ˆå‡ºæ€§è´¨)

é˜Ÿåˆ—å¸¸è§è€ƒç‚¹ä¸»è¦æ˜¯å…ƒç´ ã€Œå…ˆè¿›å…ˆå‡ºã€çš„é¡ºåºç‰¹æ€§ï¼Œæ¯”å¦‚ç»´æŠ¤é˜Ÿåˆ—å†…çš„å…ƒç´ åœ¨ã€Œæ—¶åºä¸Šã€çš„æŸäº›æ€§è´¨ï¼Œä¸‹é¢æ˜¯å‡ é“ä¾‹é¢˜ï¼Œé˜Ÿåˆ—å……å½“ã€Œæ»‘åŠ¨çª—å£ã€çš„ä½œç”¨ã€‚

## [933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°](https://labuladong.online/algo/problem-set/queue/#slug_number-of-recent-calls)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/number-of-recent-calls/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/number-of-recent-calls/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">å†™ä¸€ä¸ª&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">RecentCounter</code>&nbsp;ç±»æ¥è®¡ç®—ç‰¹å®šæ—¶é—´èŒƒå›´å†…æœ€è¿‘çš„è¯·æ±‚ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ å®ç°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">RecentCounter</code><span>&nbsp;</span>ç±»ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">RecentCounter()</code><span>&nbsp;</span>åˆå§‹åŒ–è®¡æ•°å™¨ï¼Œè¯·æ±‚æ•°ä¸º 0 ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int ping(int t)</code><span>&nbsp;</span>åœ¨æ—¶é—´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code><span>&nbsp;</span>æ·»åŠ ä¸€ä¸ªæ–°è¯·æ±‚ï¼Œå…¶ä¸­<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code><span>&nbsp;</span>è¡¨ç¤ºä»¥æ¯«ç§’ä¸ºå•ä½çš„æŸä¸ªæ—¶é—´ï¼Œå¹¶è¿”å›è¿‡å»<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">3000</code><span>&nbsp;</span>æ¯«ç§’å†…å‘ç”Ÿçš„æ‰€æœ‰è¯·æ±‚æ•°ï¼ˆåŒ…æ‹¬æ–°è¯·æ±‚ï¼‰ã€‚ç¡®åˆ‡åœ°è¯´ï¼Œè¿”å›åœ¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[t-3000, t]</code><span>&nbsp;</span>å†…å‘ç”Ÿçš„è¯·æ±‚æ•°ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ä¿è¯</strong><span>&nbsp;</span>æ¯æ¬¡å¯¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">ping</code><span>&nbsp;</span>çš„è°ƒç”¨éƒ½ä½¿ç”¨æ¯”ä¹‹å‰æ›´å¤§çš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code><span>&nbsp;</span>å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>
["RecentCounter", "ping", "ping", "ping", "ping"]
[[], [1], [100], [3001], [3002]]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>
[null, 1, 2, 3, 3]

<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
RecentCounter recentCounter = new RecentCounter();
recentCounter.ping(1);     // requests = [<strong style="font-weight: 600;">1</strong>]ï¼ŒèŒƒå›´æ˜¯ [-2999,1]ï¼Œè¿”å› 1
recentCounter.ping(100);   // requests = [<strong style="font-weight: 600;">1</strong>, <strong style="font-weight: 600;">100</strong>]ï¼ŒèŒƒå›´æ˜¯ [-2900,100]ï¼Œè¿”å› 2
recentCounter.ping(3001);  // requests = [<strong style="font-weight: 600;">1</strong>, <strong style="font-weight: 600;">100</strong>, <strong style="font-weight: 600;">3001</strong>]ï¼ŒèŒƒå›´æ˜¯ [1,3001]ï¼Œè¿”å› 3
recentCounter.ping(3002);  // requests = [1, <strong style="font-weight: 600;">100</strong>, <strong style="font-weight: 600;">3001</strong>, <strong style="font-weight: 600;">3002</strong>]ï¼ŒèŒƒå›´æ˜¯ [2,3002]ï¼Œè¿”å› 3
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= t &lt;= 10<sup>9</sup></code></li><li>ä¿è¯æ¯æ¬¡å¯¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">ping</code><span>&nbsp;</span>è°ƒç”¨æ‰€ä½¿ç”¨çš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code><span>&nbsp;</span>å€¼éƒ½<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¥æ ¼é€’å¢</strong></li><li>è‡³å¤šè°ƒç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">ping</code><span>&nbsp;</span>æ–¹æ³•<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">10<sup>4</sup></code><span>&nbsp;</span>æ¬¡</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/number-of-recent-calls/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/queue/#åŸºæœ¬æ€è·¯)

è¿™é¢˜å¾ˆç®€å•ï¼Œå’Œ [346. æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼](https://leetcode.cn/problems/moving-average-from-data-stream) æœ‰ç‚¹ç±»ä¼¼ï¼Œè¦æ±‚åŠ¨æ€ç»´æŠ¤é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/queue/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/queue/#è§£æ³•ä»£ç )



``` python
from queue import Queue

class RecentCounter:

    def __init__(self):
        self.q = Queue()

    def ping(self, t: int) -> int:
        self.q.put(t)
        while self.q.queue[0] < t - 3000:
            # t æ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥å¯ä»¥ä»é˜Ÿå¤´åˆ é™¤ 3000 æ¯«ç§’ä¹‹å‰çš„è¯·æ±‚
            self.q.get()
        
        return self.q.qsize()
```

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [362. æ•²å‡»è®¡æ•°å™¨ ğŸŸ ](https://leetcode.cn/problems/design-hit-counter)
- [å‰‘æŒ‡ Offer II 042. æœ€è¿‘è¯·æ±‚æ¬¡æ•° ğŸŸ¢](https://leetcode.cn/problems/H8086Q)

## [é˜Ÿåˆ—ç›¸å…³çš„è®¾è®¡é¢˜](https://labuladong.online/algo/problem-set/queue/#é˜Ÿåˆ—ç›¸å…³çš„è®¾è®¡é¢˜)

é˜Ÿåˆ—ç›¸å…³çš„è®¾è®¡é¢˜ä¹Ÿæ˜¯ä¸€å¤§é‡ç‚¹ï¼Œä½†ä¸ç®—å¾ˆéš¾ï¼Œä¸‹é¢æ˜¯å‡ é“ä¾‹é¢˜ã€‚

## [622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—](https://labuladong.online/algo/problem-set/queue/#slug_design-circular-queue)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/design-circular-queue/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/design-circular-queue/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">è®¾è®¡ä½ çš„å¾ªç¯é˜Ÿåˆ—å®ç°ã€‚ å¾ªç¯é˜Ÿåˆ—æ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œå…¶æ“ä½œè¡¨ç°åŸºäº FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™å¹¶ä¸”é˜Ÿå°¾è¢«è¿æ¥åœ¨é˜Ÿé¦–ä¹‹åä»¥å½¢æˆä¸€ä¸ªå¾ªç¯ã€‚å®ƒä¹Ÿè¢«ç§°ä¸ºâ€œç¯å½¢ç¼“å†²å™¨â€ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¾ªç¯é˜Ÿåˆ—çš„ä¸€ä¸ªå¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªé˜Ÿåˆ—ä¹‹å‰ç”¨è¿‡çš„ç©ºé—´ã€‚åœ¨ä¸€ä¸ªæ™®é€šé˜Ÿåˆ—é‡Œï¼Œä¸€æ—¦ä¸€ä¸ªé˜Ÿåˆ—æ»¡äº†ï¼Œæˆ‘ä»¬å°±ä¸èƒ½æ’å…¥ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå³ä½¿åœ¨é˜Ÿåˆ—å‰é¢ä»æœ‰ç©ºé—´ã€‚ä½†æ˜¯ä½¿ç”¨å¾ªç¯é˜Ÿåˆ—ï¼Œæˆ‘ä»¬èƒ½ä½¿ç”¨è¿™äº›ç©ºé—´å»å­˜å‚¨æ–°çš„å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä½ çš„å®ç°åº”è¯¥æ”¯æŒå¦‚ä¸‹æ“ä½œï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">MyCircularQueue(k)</code>: æ„é€ å™¨ï¼Œè®¾ç½®é˜Ÿåˆ—é•¿åº¦ä¸º k ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Front</code>: ä»é˜Ÿé¦–è·å–å…ƒç´ ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› -1 ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Rear</code>: è·å–é˜Ÿå°¾å…ƒç´ ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› -1 ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">enQueue(value)</code>: å‘å¾ªç¯é˜Ÿåˆ—æ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæˆåŠŸæ’å…¥åˆ™è¿”å›çœŸã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">deQueue()</code>: ä»å¾ªç¯é˜Ÿåˆ—ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæˆåŠŸåˆ é™¤åˆ™è¿”å›çœŸã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">isEmpty()</code>: æ£€æŸ¥å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">isFull()</code>: æ£€æŸ¥å¾ªç¯é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;">MyCircularQueue circularQueue = new MyCircularQueue(3); // è®¾ç½®é•¿åº¦ä¸º 3
circularQueue.enQueue(1); &nbsp;// è¿”å› true
circularQueue.enQueue(2); &nbsp;// è¿”å› true
circularQueue.enQueue(3); &nbsp;// è¿”å› true
circularQueue.enQueue(4); &nbsp;// è¿”å› falseï¼Œé˜Ÿåˆ—å·²æ»¡
circularQueue.Rear(); &nbsp;// è¿”å› 3
circularQueue.isFull(); &nbsp;// è¿”å› true
circularQueue.deQueue(); &nbsp;// è¿”å› true
circularQueue.enQueue(4); &nbsp;// è¿”å› true
circularQueue.Rear(); &nbsp;// è¿”å› 4</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ‰€æœ‰çš„å€¼éƒ½åœ¨ 0&nbsp;è‡³ 1000 çš„èŒƒå›´å†…ï¼›</li><li>æ“ä½œæ•°å°†åœ¨ 1 è‡³ 1000 çš„èŒƒå›´å†…ï¼›</li><li>è¯·ä¸è¦ä½¿ç”¨å†…ç½®çš„é˜Ÿåˆ—åº“ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/design-circular-queue/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/queue/#åŸºæœ¬æ€è·¯-1)

è¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯æ™®é€šé˜Ÿåˆ—çš„å®ç°ï¼Œåº•å±‚å¯ä»¥ç”¨é“¾è¡¨æˆ–æ•°ç»„å®ç°ï¼Œç”¨é“¾è¡¨å®ç°æ¯”è¾ƒç®€å•ï¼Œç”¨æ•°ç»„çš„è¯è¦ç”¨åˆ°ç¯å½¢æ•°ç»„çš„æŠ€å·§ã€‚å…·ä½“å¯ä»¥å‚è§ [ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—/æ ˆ](https://labuladong.online/algo/data-structure-basic/linked-queue-stack/) å’Œ [ç”¨æ•°ç»„å®ç°ç¯å½¢é˜Ÿåˆ—](https://labuladong.online/algo/data-structure-basic/array-queue-stack/) ä¸¤ç¯‡æ–‡ç« ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/queue/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/queue/#è§£æ³•ä»£ç -1)



``` python
from collections import deque

# åº•å±‚ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—
class ArrayQueue:
    INIT_CAP = 2

    def __init__(self, init_cap=INIT_CAP):
        self.size = 0
        self.data = [None] * init_cap
        self.first = 0
        self.last = 0

    # ä¸ä¼ å‚æ•°ï¼Œé»˜è®¤å¤§å°ä¸º INIT_CAP
    # Initializer with default capacity

    # å¢
    def enqueue(self, e):
        if self.size == len(self.data):
            self.resize(self.size * 2)

        self.data[self.last] = e
        self.last += 1
        if self.last == len(self.data):
            self.last = 0

        self.size += 1

    # åˆ 
    def dequeue(self):
        if self.is_empty():
            raise Exception('Queue underflow')

        if self.size == len(self.data) // 4:
            self.resize(len(self.data) // 2)

        old_val = self.data[self.first]
        self.data[self.first] = None
        self.first += 1
        if self.first == len(self.data):
            self.first = 0

        self.size -= 1
        return old_val

    def resize(self, new_cap):
        temp = [None] * new_cap

        # first ----- last
        # --- last    first ---

        for i in range(self.size):
            temp[i] = self.data[(self.first + i) % len(self.data)]

        self.first = 0
        self.last = self.size
        self.data = temp

    # æŸ¥
    def peek_first(self):
        if self.is_empty():
            raise Exception('Queue underflow')
        return self.data[self.first]

    def peek_last(self):
        if self.is_empty():
            raise Exception('Queue underflow')
        if self.last == 0:
            return self.data[len(self.data) - 1]
        return self.data[self.last - 1]

    def size(self):
        return self.size

    def is_empty(self):
        return self.size == 0


class MyCircularQueue:

    def __init__(self, k):
        self.q = ArrayQueue(k)
        self.max_cap = k

    def enQueue(self, value):
        if self.q.size == self.max_cap:
            return False
        self.q.enqueue(value)
        return True

    def deQueue(self):
        if self.q.is_empty():
            return False
        self.q.dequeue()
        return True

    def Front(self):
        if self.q.is_empty():
            return -1
        return self.q.peek_first()

    def Rear(self):
        if self.q.is_empty():
            return -1
        return self.q.peek_last()

    def isEmpty(self):
        return self.q.is_empty()

    def isFull(self):
        return self.q.size == self.max_cap
```

## [641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—](https://labuladong.online/algo/problem-set/queue/#slug_design-circular-deque)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/design-circular-deque/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/design-circular-deque/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">è®¾è®¡å®ç°åŒç«¯é˜Ÿåˆ—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å®ç°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">MyCircularDeque</code><span>&nbsp;</span>ç±»:</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">MyCircularDeque(int k)</code>&nbsp;ï¼šæ„é€ å‡½æ•°,åŒç«¯é˜Ÿåˆ—æœ€å¤§ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean insertFront()</code>ï¼šå°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°åŒç«¯é˜Ÿåˆ—å¤´éƒ¨ã€‚ å¦‚æœæ“ä½œæˆåŠŸè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>&nbsp;ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean insertLast()</code>&nbsp;ï¼šå°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°åŒç«¯é˜Ÿåˆ—å°¾éƒ¨ã€‚å¦‚æœæ“ä½œæˆåŠŸè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>&nbsp;ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean deleteFront()</code>&nbsp;ï¼šä»åŒç«¯é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚ å¦‚æœæ“ä½œæˆåŠŸè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>&nbsp;ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean deleteLast()</code>&nbsp;ï¼šä»åŒç«¯é˜Ÿåˆ—å°¾éƒ¨åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæ“ä½œæˆåŠŸè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>&nbsp;ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int getFront()</code>&nbsp;)ï¼šä»åŒç«¯é˜Ÿåˆ—å¤´éƒ¨è·å¾—ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœåŒç«¯é˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1</code>&nbsp;ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int getRear()</code>&nbsp;ï¼šè·å¾—åŒç«¯é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚&nbsp;å¦‚æœåŒç«¯é˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean isEmpty()</code>&nbsp;ï¼šè‹¥åŒç«¯é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>&nbsp;ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>&nbsp;ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean isFull()</code>&nbsp;ï¼šè‹¥åŒç«¯é˜Ÿåˆ—æ»¡äº†ï¼Œåˆ™è¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>&nbsp;ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥</strong>
["MyCircularDeque", "insertLast", "insertLast", "insertFront", "insertFront", "getRear", "isFull", "deleteLast", "insertFront", "getFront"]
[[3], [1], [2], [3], [4], [], [], [], [4], []]
<strong style="font-weight: 600;">è¾“å‡º</strong>
[null, true, true, true, false, 2, true, true, true, 4]

<strong style="font-weight: 600;">è§£é‡Š</strong>
MyCircularDeque circularDeque = new MycircularDeque(3); // è®¾ç½®å®¹é‡å¤§å°ä¸º3
circularDeque.insertLast(1);			        // è¿”å› true
circularDeque.insertLast(2);			        // è¿”å› true
circularDeque.insertFront(3);			        // è¿”å› true
circularDeque.insertFront(4);			        // å·²ç»æ»¡äº†ï¼Œè¿”å› false
circularDeque.getRear();  				// è¿”å› 2
circularDeque.isFull();				        // è¿”å› true
circularDeque.deleteLast();			        // è¿”å› true
circularDeque.insertFront(4);			        // è¿”å› true
circularDeque.getFront();				// è¿”å› 4
&nbsp;</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= k &lt;= 1000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= value &lt;= 1000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">insertFront</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">insertLast</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">deleteFront</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">deleteLast</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">getFront</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">getRear</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">isEmpty</code>,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">isFull</code>&nbsp; è°ƒç”¨æ¬¡æ•°ä¸å¤§äº&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2000</code>&nbsp;æ¬¡</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/design-circular-deque/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 641. è®¾è®¡å¾ªç¯åŒç«¯é˜Ÿåˆ—</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/queue/#åŸºæœ¬æ€è·¯-2)

è¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯åŒç«¯é˜Ÿåˆ—çš„å®ç°ï¼Œåº•å±‚å¯ä»¥ç”¨é“¾è¡¨æˆ–æ•°ç»„å®ç°ï¼Œç”¨é“¾è¡¨å®ç°æ¯”è¾ƒç®€å•ï¼Œç”¨æ•°ç»„çš„è¯è¦ç”¨åˆ° [ç¯å½¢æ•°ç»„](https://labuladong.online/algo/data-structure-basic/cycle-array/) çš„æŠ€å·§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/queue/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/queue/#è§£æ³•ä»£ç -2)



``` python
class MyArrayDeque:
    INIT_CAP = 2

    # ä¸ä¼ å‚æ•°ï¼Œé»˜è®¤å¤§å°ä¸º INIT_CAP
    def __init__(self, init_cap=INIT_CAP):
        self.size = 0
        self.data = [None] * init_cap
        # last æ˜¯ä¸‹ä¸€æ¬¡åº”è¯¥æ·»åŠ å…ƒç´ çš„ç´¢å¼•
        # first----last, [first, last)
        # æ¯”å¦‚ first = 1ï¼Œlast = 3ï¼Œsize = 2
        self.first = self.last = 0

    # ä»å¤´éƒ¨è·å–å…ƒç´ 
    def getFirst(self):
        if self.isEmpty():
            raise IndexError("getFirst from empty deque")
        return self.data[self.first]

    # ä»å°¾éƒ¨è·å–å…ƒç´ 
    def getLast(self):
        if self.isEmpty():
            raise IndexError("getLast from empty deque")
        if self.last == 0:
            return self.data[len(self.data) - 1]
        return self.data[self.last - 1]

    # ä»å¤´éƒ¨æ’å…¥å…ƒç´ 
    def addFirst(self, e):
        if self.size == len(self.data):
            self.resize(self.size * 2)

        # æƒ…å†µä¸€ï¼šfirst----last
        # æƒ…å†µäºŒï¼š---last  first---

        # å·¦ç§» firstï¼Œæ‰€ä»¥ first == 0 æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µ
        if self.first == 0:
            self.first = len(self.data) - 1
        else:
            self.first -= 1
        # æ’å…¥å…ƒç´ 
        self.data[self.first] = e
        self.size += 1

    # ä»å°¾éƒ¨æ’å…¥å…ƒç´ 
    def addLast(self, e):
        if self.size == len(self.data):
            self.resize(self.size * 2)
        # æ’å…¥å…ƒç´ 
        self.data[self.last] = e
        self.last += 1
        if self.last == len(self.data):
            self.last = 0
        self.size += 1

    # ä»å¤´éƒ¨åˆ é™¤å…ƒç´ 
    def removeFirst(self):
        if self.isEmpty():
            raise IndexError("removeFirst from empty deque")

        if self.size == len(self.data) // 4:
            self.resize(len(self.data) // 2)

        old_val = self.data[self.first]
        self.data[self.first] = None
        self.first += 1
        if self.first == len(self.data):
            self.first = 0
        self.size -= 1
        return old_val

    # ä»å°¾éƒ¨åˆ é™¤å…ƒç´ 
    def removeLast(self):
        if self.isEmpty():
            raise IndexError("removeLast from empty deque")

        if self.size == len(self.data) // 4:
            self.resize(len(self.data) // 2)

        # æƒ…å†µä¸€ï¼šfirst----last
        # æƒ…å†µäºŒï¼š---last  first---

        # å·¦ç§» lastï¼Œå½“ last == 0 çš„æ—¶å€™æ˜¯ç‰¹æ®Šæƒ…å†µ
        if self.last == 0:
            self.last = len(self.data) - 1
        else:
            self.last -= 1
        old_val = self.data[self.last]
        # åˆ é™¤å…ƒç´ 
        self.data[self.last] = None
        self.size -= 1
        return old_val

    def getSize(self):
        return self.size

    def isEmpty(self):
        return self.size == 0

    def resize(self, new_cap):
        temp = [None] * new_cap
        for i in range(self.size):
            temp[i] = self.data[(self.first + i) % len(self.data)]
        self.first = 0
        self.last = self.size
        self.data = temp


class MyCircularDeque:
    def __init__(self, k):
        self.cap = k
        self.list = MyArrayDeque()

    # Adds an item at the front of Deque. Return true if the operation is successful.
    def insertFront(self, value):
        if self.list.getSize() == self.cap:
            return False
        self.list.addFirst(value)
        return True

    # Adds an item at the rear of Deque. Return true if the operation is successful.
    def insertLast(self, value):
        if self.list.getSize() == self.cap:
            return False
        self.list.addLast(value)
        return True

    # Deletes an item from the front of Deque. Return true if the operation is successful.
    def deleteFront(self):
        if self.list.isEmpty():
            return False
        self.list.removeFirst()
        return True

    # Deletes an item from the rear of Deque. Return true if the operation is successful.
    def deleteLast(self):
        if self.list.isEmpty():
            return False
        self.list.removeLast()
        return True

    # Get the front item from the deque.
    def getFront(self):
        if self.list.isEmpty():
            return -1
        return self.list.getFirst()

    # Get the last item from the deque.
    def getRear(self):
        if self.list.isEmpty():
            return -1
        return self.list.getLast()

    # Checks whether the circular deque is empty or not.
    def isEmpty(self):
        return self.list.isEmpty()

    # Checks whether the circular deque is full or not.
    def isFull(self):
        return self.list.getSize() == self.cap
```

## [1670. è®¾è®¡å‰ä¸­åé˜Ÿåˆ—](https://labuladong.online/algo/problem-set/queue/#slug_design-front-middle-back-queue)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1670. è®¾è®¡å‰ä¸­åé˜Ÿåˆ—</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/design-front-middle-back-queue/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/design-front-middle-back-queue/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ è®¾è®¡ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ”¯æŒåœ¨å‰ï¼Œä¸­ï¼Œåä¸‰ä¸ªä½ç½®çš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">push</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">pop</code><span>&nbsp;</span>æ“ä½œã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ å®Œæˆ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">FrontMiddleBack</code><span>&nbsp;</span>ç±»ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">FrontMiddleBack()</code><span>&nbsp;</span>åˆå§‹åŒ–é˜Ÿåˆ—ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">void pushFront(int val)</code><span>&nbsp;</span>å°†<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>æ·»åŠ åˆ°é˜Ÿåˆ—çš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å‰é¢</strong><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">void pushMiddle(int val)</code><span>&nbsp;</span>å°†<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>æ·»åŠ åˆ°é˜Ÿåˆ—çš„<span>&nbsp;</span><strong style="font-weight: 600;">æ­£ä¸­é—´</strong><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">void pushBack(int val)</code><span>&nbsp;</span>å°†<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>æ·»åŠ åˆ°é˜Ÿé‡Œçš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€åé¢</strong><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int popFront()</code><span>&nbsp;</span>å°†<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å‰é¢</strong><span>&nbsp;</span>çš„å…ƒç´ ä»é˜Ÿåˆ—ä¸­åˆ é™¤å¹¶è¿”å›å€¼ï¼Œå¦‚æœåˆ é™¤ä¹‹å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int popMiddle()</code><span>&nbsp;</span>å°†<span>&nbsp;</span><b>æ­£ä¸­é—´</b><span>&nbsp;</span>çš„å…ƒç´ ä»é˜Ÿåˆ—ä¸­åˆ é™¤å¹¶è¿”å›å€¼ï¼Œå¦‚æœåˆ é™¤ä¹‹å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int popBack()</code><span>&nbsp;</span>å°†<span>&nbsp;</span><strong style="font-weight: 600;">æœ€åé¢</strong><span>&nbsp;</span>çš„å…ƒç´ ä»é˜Ÿåˆ—ä¸­åˆ é™¤å¹¶è¿”å›å€¼ï¼Œå¦‚æœåˆ é™¤ä¹‹å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1</code><span>&nbsp;</span>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·æ³¨æ„å½“æœ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¤ä¸ª</strong><span>&nbsp;</span>ä¸­é—´ä½ç½®çš„æ—¶å€™ï¼Œé€‰æ‹©é å‰é¢çš„ä½ç½®è¿›è¡Œæ“ä½œã€‚æ¯”æ–¹è¯´ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>å°†<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">6</code><span>&nbsp;</span>æ·»åŠ åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 2, 3, 4, 5]</code><span>&nbsp;</span>çš„ä¸­é—´ä½ç½®ï¼Œç»“æœæ•°ç»„ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 2,<span>&nbsp;</span><strong style="font-weight: 600;">6</strong>, 3, 4, 5]</code><span>&nbsp;</span>ã€‚</li><li>ä»<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 2,<span>&nbsp;</span><strong style="font-weight: 600;">3</strong>, 4, 5, 6]</code><span>&nbsp;</span>çš„ä¸­é—´ä½ç½®å¼¹å‡ºå…ƒç´ ï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">3</code><span>&nbsp;</span>ï¼Œæ•°ç»„å˜ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 2, 4, 5, 6]</code><span>&nbsp;</span>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>
["FrontMiddleBackQueue", "pushFront", "pushBack", "pushMiddle", "pushMiddle", "popFront", "popMiddle", "popMiddle", "popBack", "popFront"]
[[], [1], [2], [3], [4], [], [], [], [], []]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>
[null, null, null, null, null, 1, 3, 4, 2, -1]

<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
FrontMiddleBackQueue q = new FrontMiddleBackQueue();
q.pushFront(1);   // [<strong style="font-weight: 600;">1</strong>]
q.pushBack(2);    // [1, <strong style="font-weight: 600;">2</strong>]
q.pushMiddle(3);  // [1, <strong style="font-weight: 600;">3</strong>, 2]
q.pushMiddle(4);  // [1, <strong style="font-weight: 600;">4</strong>, 3, 2]
q.popFront();     // è¿”å› 1 -&gt; [4, 3, 2]
q.popMiddle();    // è¿”å› 3 -&gt; [4, 2]
q.popMiddle();    // è¿”å› 4 -&gt; [2]
q.popBack();      // è¿”å› 2 -&gt; []
q.popFront();     // è¿”å› -1 -&gt; [] ï¼ˆé˜Ÿåˆ—ä¸ºç©ºï¼‰
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= val &lt;= 10<sup>9</sup></code></li><li>æœ€å¤šè°ƒç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1000</code><span>&nbsp;</span>æ¬¡<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">pushFront</code>ï¼Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">pushMiddle</code>ï¼Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">pushBack</code>ï¼Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">popFront</code>ï¼Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">popMiddle</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">popBack</code><span>&nbsp;</span>ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/design-front-middle-back-queue/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1670. è®¾è®¡å‰ä¸­åé˜Ÿåˆ—</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/queue/#åŸºæœ¬æ€è·¯-3)

è¿™é¢˜æœ‰ç‚¹éš¾åº¦ï¼Œä¸»è¦æ˜¯ç»†èŠ‚ä¸å¥½æŠŠæ§ã€‚å¸¸è§„çš„é˜Ÿåˆ—åªèƒ½åœ¨é¦–å°¾è¿›è¡Œæ“ä½œï¼Œæƒ³åœ¨ä¸­é—´æ“ä½œé˜Ÿåˆ—ï¼Œéœ€è¦åœ¨åº•å±‚æŠŠé˜Ÿåˆ—åˆ‡åˆ†æˆ `left, right` ä¸¤ä¸ªåˆ—è¡¨ï¼Œä½†è¿™é‡Œçš„ç»†èŠ‚é—®é¢˜å°±æ˜¯å…ƒç´ ä¸ºå¥‡æ•°æ—¶ä¸¤ä¸ªé“¾è¡¨ä¸­å…ƒç´ çš„åˆ†é…é—®é¢˜ã€‚

ç›´æ¥çœ‹ä»£ç å§ï¼Œæ³¨é‡Šå¾ˆè¯¦ç»†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘æ›´å¤šç»å…¸è®¾è®¡ä¹ é¢˜](https://labuladong.online/algo/problem-set/ds-design/)
- [ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/queue/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/queue/#è§£æ³•ä»£ç -3)



``` python
from collections import deque

class FrontMiddleBackQueue:
    # ç”¨ä¸¤ä¸ªåˆ—è¡¨è¡¨ç¤ºé˜Ÿåˆ—çš„å·¦å³ä¸¤éƒ¨åˆ†ï¼Œä¸€éä»ä¸­é—´æ“ä½œå…ƒç´ 
    def __init__(self):
        self.left = deque()
        self.right = deque()
    
    # ç»´æŠ¤å·¦è¾¹å°‘å³è¾¹å¤šçš„çŠ¶æ€ï¼Œæ¯æ¬¡å¢åˆ å…ƒç´ ä¹‹åéƒ½è¦æ‰§è¡Œä¸€æ¬¡
    def balance(self):
        # å³è¾¹æœ€å¤šæ¯”å·¦è¾¹å¤šä¸€ä¸ªå…ƒç´ 
        if len(self.right) > len(self.left) + 1:
            # å³è¾¹å¤šï¼ŒåŒ€ä¸€ä¸ªç»™å·¦è¾¹
            self.left.append(self.right.popleft())
        if len(self.left) > len(self.right):
            # å·¦è¾¹å¤šï¼ŒåŒ€ä¸€ä¸ªç»™å³è¾¹
            self.right.appendleft(self.left.pop())
    
    def pushFront(self, val: int) -> None:
        self.left.appendleft(val)
        self.balance()
    
    def pushMiddle(self, val: int) -> None:
        if self.size() % 2 == 0:
            # å¦‚æœæœ‰å¶æ•°ä¸ªå…ƒç´ æ—¶ï¼ŒpushMiddle ä¼˜å…ˆå‘å³è¾¹æ·»åŠ 
            self.right.appendleft(val)
        else:
            self.left.append(val)
        self.balance()
    
    def pushBack(self, val: int) -> None:
        self.right.append(val)
        self.balance()
    
    def popFront(self) -> int:
        if self.size() == 0:
            return -1
        if self.size() == 1:
            # å¦‚æœåªæœ‰ 1 ä¸ªå…ƒç´ ï¼ŒpopFront çš„æ—¶å€™ï¼Œè¦å»å³è¾¹åˆ é™¤
            return self.right.popleft()
        e = self.left.popleft()
        self.balance()
        return e
    
    def popMiddle(self) -> int:
        if self.size() == 0:
            return -1
        if self.size() % 2 == 0:
            e = self.left.pop()
        else:
            # å¦‚æœæœ‰å¥‡æ•°ä¸ªå…ƒç´ æ—¶ï¼ŒpopMiddle ä¼˜å…ˆä»å³è¾¹åˆ é™¤
            e = self.right.popleft()
        self.balance()
        return e
    
    def popBack(self) -> int:
        if self.size() == 0:
            return -1
        e = self.right.pop()
        self.balance()
        return e
    
    def size(self) -> int:
        return len(self.left) + len(self.right)
```

## [2073. ä¹°ç¥¨éœ€è¦çš„æ—¶é—´](https://labuladong.online/algo/problem-set/queue/#slug_time-needed-to-buy-tickets)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">2073. ä¹°ç¥¨éœ€è¦çš„æ—¶é—´</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/time-needed-to-buy-tickets/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/time-needed-to-buy-tickets/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªäººå‰æ¥æ’é˜Ÿä¹°ç¥¨ï¼Œå…¶ä¸­ç¬¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>äººç«™åœ¨é˜Ÿä¼<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å‰æ–¹</strong><span>&nbsp;</span>ï¼Œç¬¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">(n - 1)</code><span>&nbsp;</span>äººç«™åœ¨é˜Ÿä¼<span>&nbsp;</span><strong style="font-weight: 600;">æœ€åæ–¹</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä»<span>&nbsp;</span><strong style="font-weight: 600;">0</strong><span>&nbsp;</span>å¼€å§‹çš„æ•´æ•°æ•°ç»„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">tickets</code><span>&nbsp;</span>ï¼Œæ•°ç»„é•¿åº¦ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ï¼Œå…¶ä¸­ç¬¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">i</code><span>&nbsp;</span>äººæƒ³è¦è´­ä¹°çš„ç¥¨æ•°ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">tickets[i]</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ¯ä¸ªäººä¹°ç¥¨éƒ½éœ€è¦ç”¨æ‰<span>&nbsp;</span><strong style="font-weight: 600;">æ°å¥½ 1 ç§’</strong><span>&nbsp;</span>ã€‚ä¸€ä¸ªäºº<span>&nbsp;</span><strong style="font-weight: 600;">ä¸€æ¬¡åªèƒ½ä¹°ä¸€å¼ ç¥¨</strong><span>&nbsp;</span>ï¼Œå¦‚æœéœ€è¦è´­ä¹°æ›´å¤šç¥¨ï¼Œä»–å¿…é¡»èµ°åˆ°&nbsp;<span>&nbsp;</span><strong style="font-weight: 600;">é˜Ÿå°¾</strong><span>&nbsp;</span>é‡æ–°æ’é˜Ÿï¼ˆ<strong style="font-weight: 600;">ç¬é—´<span>&nbsp;</span></strong>å‘ç”Ÿï¼Œä¸è®¡æ—¶é—´ï¼‰ã€‚å¦‚æœä¸€ä¸ªäººæ²¡æœ‰å‰©ä¸‹éœ€è¦ä¹°çš„ç¥¨ï¼Œé‚£ä»–å°†ä¼š<span>&nbsp;</span><strong style="font-weight: 600;">ç¦»å¼€</strong><span>&nbsp;</span>é˜Ÿä¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›ä½äºä½ç½®<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k</code>ï¼ˆä¸‹æ ‡ä»<span>&nbsp;</span><strong style="font-weight: 600;">0</strong><span>&nbsp;</span>å¼€å§‹ï¼‰çš„äººå®Œæˆä¹°ç¥¨éœ€è¦çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>tickets = [2,3,2], k = 2
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>6
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong> 
- ç¬¬ä¸€è½®ï¼Œé˜Ÿä¼ä¸­çš„æ¯ä¸ªäººéƒ½ä¹°åˆ°ä¸€å¼ ç¥¨ï¼Œé˜Ÿä¼å˜ä¸º [1, 2, 1] ã€‚
- ç¬¬äºŒè½®ï¼Œé˜Ÿä¼ä¸­çš„æ¯ä¸ªéƒ½åˆéƒ½ä¹°åˆ°ä¸€å¼ ç¥¨ï¼Œé˜Ÿä¼å˜ä¸º [0, 1, 0] ã€‚
ä½ç½® 2 çš„äººæˆåŠŸä¹°åˆ° 2 å¼ ç¥¨ï¼Œç”¨æ‰ 3 + 3 = 6 ç§’ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>tickets = [5,1,1,1], k = 0
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>8
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
- ç¬¬ä¸€è½®ï¼Œé˜Ÿä¼ä¸­çš„æ¯ä¸ªäººéƒ½ä¹°åˆ°ä¸€å¼ ç¥¨ï¼Œé˜Ÿä¼å˜ä¸º [4, 0, 0, 0] ã€‚
- æ¥ä¸‹æ¥çš„ 4 è½®ï¼Œåªæœ‰ä½ç½® 0 çš„äººåœ¨ä¹°ç¥¨ã€‚
ä½ç½® 0 çš„äººæˆåŠŸä¹°åˆ° 5 å¼ ç¥¨ï¼Œç”¨æ‰ 4 + 1 + 1 + 1 + 1 = 8 ç§’ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n == tickets.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= tickets[i] &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= k &lt; n</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/time-needed-to-buy-tickets/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 2073. ä¹°ç¥¨éœ€è¦çš„æ—¶é—´</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/queue/#åŸºæœ¬æ€è·¯-4)

æ—¢ç„¶æ˜¯æ’é˜Ÿé—®é¢˜ï¼Œä½ ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¨¡æ‹Ÿæ•´ä¸ªä¹°ç¥¨è¿‡ç¨‹ï¼Œç„¶åæ•°ä¸€æ•°è¿‡äº†å¤šå°‘ç§’å°±è¡Œäº†ï¼Œä¸è¿‡æ—¶é—´ç©ºé—´å¤æ‚åº¦å°±é«˜äº†ã€‚

ç¨å¾®æ€è€ƒä¸€ä¸‹å¯ä»¥æƒ³åˆ°æ›´é«˜æ•ˆçš„æ–¹å¼ï¼š

é¦–å…ˆï¼Œç¬¬ `k` ä¸ªäººç¦»å¼€çš„æ—¶é—´ï¼Œå…¶å®å°±æ˜¯ä»å¼€å§‹åˆ°è¿™ä¸ªäººä¹°å®Œç¥¨ä¹‹åï¼Œå–å‡ºçš„æ€»ç¥¨æ•°ã€‚

é‚£ä¹ˆç¬¬ `k` ä¸ªäººä¹°å®Œç¥¨ä¹‹åï¼Œæ€»å…±å–äº†å¤šå°‘ç¥¨å‘¢ï¼Ÿ

æ’åœ¨ `k` ä¹‹å‰çš„äººæœ€å¤šä¹°äº† `tickets[k]` å¼ ç¥¨ï¼›è€Œæ’åœ¨ `k` ä¹‹åçš„äººæœ€å¤šä¹°äº† `tickets[k] - 1` å¼ ç¥¨ã€‚ä¸ºä»€ä¹ˆè¯´ã€Œæœ€å¤šã€å‘¢ï¼Œå› ä¸ºæœ‰çš„äººå¯èƒ½éœ€è¦çš„ç¥¨æ¯”è¾ƒå°‘ï¼Œä¹°å®Œå°±ç›´æ¥èµ°äº†ã€‚

ç»¼ä¸Šï¼Œæ€è·¯å°±å‡ºæ¥äº†ï¼Œçœ‹ä»£ç ç†è§£å§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘é˜Ÿåˆ—çš„ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/queue/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/queue/#è§£æ³•ä»£ç -4)



``` python
class Solution:
    def timeRequiredToBuy(self, tickets: List[int], k: int) -> int:
        res = 0
        for i in range(len(tickets)):
            if i <= k:
                # å‰é¢çš„äººæœ€å¤šä¹°äº† tickets[k] å¼ ç¥¨
                res += min(tickets[k], tickets[i])
            else:
                # åé¢çš„äººæœ€å¤šä¹°äº† tickets[k] - 1 å¼ ç¥¨
                res += min(tickets[k] - 1, tickets[i])
        return res
```

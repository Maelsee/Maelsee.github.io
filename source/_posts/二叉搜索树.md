---
title: äºŒå‰æœç´¢æ ‘
typora-root-url: äºŒå‰æœç´¢æ ‘
mathjax: true
date: 2025-08-03 13:55:52
tags:
    - å®è·µ
    - LeetCode
categories: 
  - äºŒå‰æ ‘ç®—æ³•
  - ç®—æ³•
  - æ•°æ®ç»“æ„
---

# äºŒå‰æœç´¢æ ‘å¿ƒæ³•ï¼ˆæ„é€ ç¯‡ï¼‰

æœ¬æ–‡è®²è§£çš„ä¾‹é¢˜

|                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [95. Unique Binary Search Trees II](https://leetcode.com/problems/unique-binary-search-trees-ii/) | [95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II](https://leetcode.cn/problems/unique-binary-search-trees-ii/) |  ğŸŸ    |
| [96. Unique Binary Search Trees](https://leetcode.com/problems/unique-binary-search-trees/) | [96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/unique-binary-search-trees/) |  ğŸŸ    |

å‰ç½®çŸ¥è¯†

é˜…è¯»æœ¬æ–‡å‰ï¼Œä½ éœ€è¦å…ˆå­¦ä¹ ï¼š

- [äºŒå‰æ ‘ç»“æ„åŸºç¡€](https://labuladong.online/algo/data-structure-basic/binary-tree-basic/)
- [äºŒå‰æ ‘çš„ DFS/BFS éå†](https://labuladong.online/algo/data-structure-basic/binary-tree-traverse-basic/)



ä¹‹å‰å†™äº†ä¸¤ç¯‡æ‰‹æŠŠæ‰‹åˆ· BST ç®—æ³•é¢˜çš„æ–‡ç« ï¼Œ[ç¬¬ä¸€ç¯‡](https://labuladong.online/algo/data-structure/bst-part1/) è®²äº†ä¸­åºéå†å¯¹ BST çš„é‡è¦æ„ä¹‰ï¼Œ[ç¬¬äºŒç¯‡](https://labuladong.online/algo/data-structure/bst-part2/) å†™äº† BST çš„åŸºæœ¬æ“ä½œã€‚

æœ¬æ–‡å°±æ¥å†™æ‰‹æŠŠæ‰‹åˆ· BST ç³»åˆ—çš„ç¬¬ä¸‰ç¯‡ï¼Œå¾ªåºæ¸è¿›åœ°è®²ä¸¤é“é¢˜ï¼Œå¦‚ä½•è®¡ç®—æ‰€æœ‰æœ‰æ•ˆ BSTã€‚

ç¬¬ä¸€é“é¢˜æ˜¯åŠ›æ‰£ç¬¬ 96 é¢˜ã€Œ[ä¸åŒçš„äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/unique-binary-search-trees/)ã€ï¼š

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a target="_blank" href="https://leetcode.cn/problems/unique-binary-search-trees/" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£<externallinkicon></externallinkicon></a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a target="_blank" href="https://leetcode.com/problems/unique-binary-search-trees/" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode<externallinkicon></externallinkicon></a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ï¼Œæ±‚æ°ç”±<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä»<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>äº’ä¸ç›¸åŒçš„<span>&nbsp;</span><strong style="font-weight: 600;">äºŒå‰æœç´¢æ ‘</strong><span>&nbsp;</span>æœ‰å¤šå°‘ç§ï¼Ÿè¿”å›æ»¡è¶³é¢˜æ„çš„äºŒå‰æœç´¢æ ‘çš„ç§æ•°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/18/uniquebstn3.jpg" style="max-width: 100%; width: 600px; height: 148px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>5
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 1
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 19</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/unique-binary-search-trees/" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```python
def numTrees(n: int) -> int:
```

è¿™å°±æ˜¯ä¸€ä¸ªæ­£å®—çš„ç©·ä¸¾é—®é¢˜ï¼Œé‚£ä¹ˆä»€ä¹ˆæ–¹å¼èƒ½å¤Ÿæ­£ç¡®åœ°ç©·ä¸¾æœ‰æ•ˆ BST çš„æ•°é‡å‘¢ï¼Ÿ

æˆ‘ä»¬å‰æ–‡è¯´è¿‡ï¼Œä¸è¦å°çœ‹ã€Œç©·ä¸¾ã€ï¼Œè¿™æ˜¯ä¸€ä»¶çœ‹èµ·æ¥ç®€å•ä½†æ˜¯æ¯”è¾ƒæœ‰æŠ€æœ¯å«é‡çš„äº‹æƒ…ï¼Œé—®é¢˜çš„å…³é”®å°±æ˜¯ä¸èƒ½æ•°æ¼ï¼Œä¹Ÿä¸èƒ½æ•°å¤šï¼Œä½ å’‹æ•´ï¼Ÿ

ä¹‹å‰ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ç¬¬ä¸€æœŸ](https://labuladong.online/algo/data-structure/binary-tree-part1/) è¯´è¿‡ï¼ŒäºŒå‰æ ‘ç®—æ³•çš„å…³é”®å°±åœ¨äºæ˜ç¡®æ ¹èŠ‚ç‚¹éœ€è¦åšä»€ä¹ˆï¼Œå…¶å® BST ä½œä¸ºä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œæ ¸å¿ƒæ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç»™ç®—æ³•è¾“å…¥ `n = 5`ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨ `{1,2,3,4,5}` è¿™äº›æ•°å­—å»æ„é€  BSTã€‚

é¦–å…ˆï¼Œè¿™æ£µ BST çš„æ ¹èŠ‚ç‚¹æ€»å…±æœ‰å‡ ç§æƒ…å†µï¼Ÿ

æ˜¾ç„¶æœ‰ 5 ç§æƒ…å†µå¯¹å§ï¼Œå› ä¸ºæ¯ä¸ªæ•°å­—éƒ½å¯ä»¥ä½œä¸ºæ ¹èŠ‚ç‚¹ã€‚

æ¯”å¦‚è¯´æˆ‘ä»¬å›ºå®š `3` ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œè¿™ä¸ªå‰æä¸‹èƒ½æœ‰å‡ ç§ä¸åŒçš„ BST å‘¢ï¼Ÿ

æ ¹æ® BST çš„ç‰¹æ€§ï¼Œæ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å°ï¼Œå³å­æ ‘çš„å€¼éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å¤§ã€‚

æ‰€ä»¥å¦‚æœå›ºå®š `3` ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œå·¦å­æ ‘èŠ‚ç‚¹å°±æ˜¯ `{1,2}` çš„ç»„åˆï¼Œå³å­æ ‘å°±æ˜¯ `{4,5}` çš„ç»„åˆã€‚

**å·¦å­æ ‘çš„ç»„åˆæ•°å’Œå³å­æ ‘çš„ç»„åˆæ•°ä¹˜ç§¯**å°±æ˜¯ `3` ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶çš„ BST ä¸ªæ•°ã€‚

![img](1.jpeg)

æˆ‘ä»¬è¿™æ˜¯è¯´äº† `3` ä¸ºæ ¹èŠ‚ç‚¹è¿™ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå…¶å®å…¶ä»–çš„èŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

é‚£ä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€çœ¼çœ‹å‡º `{1,2}` å’Œ `{4,5}` æœ‰å‡ ç§ç»„åˆï¼Œä½†æ˜¯æ€ä¹ˆè®©ç®—æ³•è¿›è¡Œè®¡ç®—å‘¢ï¼Ÿ

å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦é€’å½’å°±è¡Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥å†™è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š

```python
# å®šä¹‰ï¼šé—­åŒºé—´ [lo, hi] çš„æ•°å­—èƒ½ç»„æˆ count(lo, hi) ç§ BST
def count(lo: int, hi: int) -> int:
```

æ ¹æ®è¿™ä¸ªå‡½æ•°çš„å®šä¹‰ï¼Œç»“åˆåˆšæ‰çš„åˆ†æï¼Œå¯ä»¥å†™å‡ºä»£ç ï¼š

```python
class Solution:
    def numTrees(self, n: int) -> int:
        # è®¡ç®—é—­åŒºé—´ [1, n] ç»„æˆçš„ BST ä¸ªæ•°
        return self.count(1, n)

    # è®¡ç®—é—­åŒºé—´ [lo, hi] ç»„æˆçš„ BST ä¸ªæ•°
    def count(self, lo: int, hi: int) -> int:
        # base case
        if lo > hi: 
            return 1

        res = 0
        for i in range(lo, hi+1):
            # i çš„å€¼ä½œä¸ºæ ¹èŠ‚ç‚¹ root
            left = self.count(lo, i - 1)
            right = self.count(i + 1, hi)
            # å·¦å³å­æ ‘çš„ç»„åˆæ•°ä¹˜ç§¯æ˜¯ BST çš„æ€»æ•°
            res += left * right

        return res
```

æ³¨æ„ base caseï¼Œæ˜¾ç„¶å½“ `lo > hi` é—­åŒºé—´ `[lo, hi]` è‚¯å®šæ˜¯ä¸ªç©ºåŒºé—´ï¼Œä¹Ÿå°±å¯¹åº”ç€ç©ºèŠ‚ç‚¹ nullï¼Œè™½ç„¶æ˜¯ç©ºèŠ‚ç‚¹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä¸€ç§æƒ…å†µï¼Œæ‰€ä»¥è¦è¿”å› 1 è€Œä¸èƒ½è¿”å› 0ã€‚

è¿™æ ·ï¼Œé¢˜ç›®çš„è¦æ±‚å·²ç»å®ç°äº†ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦éå¸¸é«˜ï¼Œè‚¯å®šå­˜åœ¨é‡å å­é—®é¢˜ã€‚

å‰æ–‡åŠ¨æ€è§„åˆ’ç›¸å…³çš„é—®é¢˜å¤šæ¬¡è®²è¿‡æ¶ˆé™¤é‡å å­é—®é¢˜çš„æ–¹æ³•ï¼Œæ— éå°±æ˜¯åŠ ä¸€ä¸ªå¤‡å¿˜å½•ï¼š

```python
class Solution:
    # å¤‡å¿˜å½•
    def __init__(self):
        self.memo = []

    def numTrees(self, n: int) -> int:
        # å¤‡å¿˜å½•çš„å€¼åˆå§‹åŒ–ä¸º 0
        self.memo = [[0] * (n + 1) for _ in range(n + 1)]
        return self.count(1, n)

    # å®šä¹‰ï¼šè¿”å› [lo, hi] èŒƒå›´å†…æ„é€ çš„ä¸åŒ BST çš„æ•°é‡
    def count(self, lo: int, hi: int) -> int:
        if lo >= hi:
            return 1
        # æŸ¥å¤‡å¿˜å½•
        if self.memo[lo][hi] != 0:
            return self.memo[lo][hi]

        res = 0
        for mid in range(lo, hi + 1):
            left = self.count(lo, mid - 1)
            right = self.count(mid + 1, hi)
            res += left * right
        # å°†ç»“æœå­˜å…¥å¤‡å¿˜å½•
        self.memo[lo][hi] = res

        return res
```

<details data-v-ee1a9bd0="" id="div_unique-binary-search-trees" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_unique-binary-search-trees" src="https://labuladong.online/algo-visualize/leetcode/unique-binary-search-trees/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

<details data-v-ee1a9bd0="" id="div_unique-binary-search-trees" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_unique-binary-search-trees" src="https://labuladong.online/algo-visualize/leetcode/unique-binary-search-trees/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

è¿™æ ·ï¼Œè¿™é“é¢˜å°±å®Œå…¨è§£å†³äº†ã€‚

é‚£ä¹ˆï¼Œå¦‚æœç»™ä¸€ä¸ªè¿›é˜¶é¢˜ç›®ï¼Œä¸æ­¢è®©ä½ è®¡ç®—æœ‰å‡ ä¸ªä¸åŒçš„ BSTï¼Œè€Œæ˜¯è¦ä½ æ„å»ºå‡ºæ‰€æœ‰æœ‰æ•ˆçš„ BSTï¼Œå¦‚ä½•å®ç°è¿™ä¸ªç®—æ³•å‘¢ï¼Ÿ

è¿™é“é¢˜å°±æ˜¯åŠ›æ‰£ç¬¬ 95 é¢˜ã€Œ[ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II](https://leetcode.cn/problems/unique-binary-search-trees-ii/)ã€ï¼Œè®©ä½ æ„å»ºæ‰€æœ‰ BSTï¼š

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/unique-binary-search-trees-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/unique-binary-search-trees-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ï¼Œè¯·ä½ ç”Ÿæˆå¹¶è¿”å›æ‰€æœ‰ç”±<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä»<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>äº’ä¸ç›¸åŒçš„ä¸åŒ<span>&nbsp;</span><strong style="font-weight: 600;">äºŒå‰æœç´¢æ ‘</strong><em><span>&nbsp;</span></em>ã€‚å¯ä»¥æŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä»»æ„é¡ºåº</strong><span>&nbsp;</span>è¿”å›ç­”æ¡ˆã€‚</p><div class="original__bRMd"><div><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/18/uniquebstn3.jpg" style="max-width: 100%; width: 600px; height: 148px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1,null,2,null,3],[1,null,3,2],[2,1,3],[3,1,null,null,2],[3,2,null,1]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 1
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 8</code></li></ul></div></div></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/unique-binary-search-trees-ii/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II</a>ã€‚</strong></details>

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```python
List<TreeNode> generateTrees(int n);
```

**æ˜ç™½äº†ä¸Šé“é¢˜æ„é€ æœ‰æ•ˆ BST çš„æ–¹æ³•ï¼Œè¿™é“é¢˜çš„æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„**ï¼š

1ã€ç©·ä¸¾ `root` èŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½ã€‚

2ã€é€’å½’æ„é€ å‡ºå·¦å³å­æ ‘çš„æ‰€æœ‰æœ‰æ•ˆ BSTã€‚

3ã€ç»™ `root` èŠ‚ç‚¹ç©·ä¸¾æ‰€æœ‰å·¦å³å­æ ‘çš„ç»„åˆã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹ä»£ç ï¼š

```python
class Solution:
    def generateTrees(self, n: int) -> List[TreeNode]:
        if n == 0:
            return []
        # æ„é€ é—­åŒºé—´ [1, n] ç»„æˆçš„ BST 
        return self.build(1, n)

    # æ„é€ é—­åŒºé—´ [lo, hi] ç»„æˆçš„ BST 
    def build(self, lo: int, hi: int) -> List[TreeNode]:
        res = []
        # base case
        if lo > hi:
            # è¿™é‡Œéœ€è¦è£…ä¸€ä¸ª null å…ƒç´ ï¼Œè¿™æ ·æ‰èƒ½è®©ä¸‹é¢çš„ä¸¤ä¸ªå†…å±‚ for å¾ªç¯éƒ½èƒ½è¿›å…¥ï¼Œæ­£ç¡®åœ°åˆ›å»ºå‡ºå¶å­èŠ‚ç‚¹
            # ä¸¾ä¾‹æ¥è¯´å§ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè¿›åˆ°è¿™ä¸ª if è¯­å¥ï¼Ÿå½“ä½ åˆ›å»ºå¶å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¯¹å§ã€‚
            # é‚£ä¹ˆå¦‚æœä½ è¿™é‡Œä¸åŠ  nullï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨ï¼Œé‚£ä¹ˆä¸‹é¢çš„å†…å±‚ä¸¤ä¸ª for å¾ªç¯éƒ½æ— æ³•è¿›å…¥        
            # ä½ çš„é‚£ä¸ªå¶å­èŠ‚ç‚¹å°±æ²¡æœ‰åˆ›å»ºå‡ºæ¥ï¼Œçœ‹åˆ°äº†å—ï¼Ÿæ‰€ä»¥è¿™é‡Œè¦åŠ ä¸€ä¸ª nullï¼Œç¡®ä¿ä¸‹é¢èƒ½æŠŠå¶å­èŠ‚ç‚¹åšå‡ºæ¥
            res.append(None)
            return res

        # 1ã€ç©·ä¸¾ root èŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½ã€‚
        for i in range(lo, hi + 1):
            # 2ã€é€’å½’æ„é€ å‡ºå·¦å³å­æ ‘çš„æ‰€æœ‰æœ‰æ•ˆ BSTã€‚
            leftTree = self.build(lo, i - 1)
            rightTree = self.build(i + 1, hi)
            # 3ã€ç»™ root èŠ‚ç‚¹ç©·ä¸¾æ‰€æœ‰å·¦å³å­æ ‘çš„ç»„åˆã€‚
            for left in leftTree:
                for right in rightTree:
                    # i ä½œä¸ºæ ¹èŠ‚ç‚¹ root çš„å€¼
                    root = TreeNode(i)
                    root.left = left
                    root.right = right
                    res.append(root)

        return res
```

<details data-v-ee1a9bd0="" id="div_unique-binary-search-trees-ii" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_unique-binary-search-trees-ii" src="https://labuladong.online/algo-visualize/leetcode/unique-binary-search-trees-ii/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

<details data-v-ee1a9bd0="" id="div_unique-binary-search-trees-ii" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_unique-binary-search-trees-ii" src="https://labuladong.online/algo-visualize/leetcode/unique-binary-search-trees-ii/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

è¿™æ ·ï¼Œä¸¤é“é¢˜éƒ½è§£å†³äº†ã€‚

æœ¬æ–‡å°±åˆ°è¿™é‡Œï¼Œæ›´å¤šç»å…¸çš„äºŒå‰æ ‘ä¹ é¢˜ä»¥åŠé€’å½’æ€ç»´çš„è®­ç»ƒï¼Œè¯·å‚è§äºŒå‰æ ‘ç« èŠ‚ä¸­çš„ [é€’å½’ä¸“é¡¹ç»ƒä¹ ](https://labuladong.online/algo/problem-set/bst1/)



# äºŒå‰æœç´¢æ ‘å¿ƒæ³•ï¼ˆååºç¯‡ï¼‰

æœ¬æ–‡è®²è§£çš„ä¾‹é¢˜

|                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [1373. Maximum Sum BST in Binary Tree](https://leetcode.com/problems/maximum-sum-bst-in-binary-tree/) | [1373. äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ](https://leetcode.cn/problems/maximum-sum-bst-in-binary-tree/) |  ğŸ”´   |

å‰ç½®çŸ¥è¯†

é˜…è¯»æœ¬æ–‡å‰ï¼Œä½ éœ€è¦å…ˆå­¦ä¹ ï¼š

- [äºŒå‰æ ‘ç»“æ„åŸºç¡€](https://labuladong.online/algo/data-structure-basic/binary-tree-basic/)
- [äºŒå‰æ ‘çš„ DFS/BFS éå†](https://labuladong.online/algo/data-structure-basic/binary-tree-traverse-basic/)
- [äºŒå‰æ ‘å¿ƒæ³•ï¼ˆçº²é¢†ç¯‡ï¼‰](https://labuladong.online/algo/essential-technique/binary-tree-summary/)

æœ¬æ–‡æ˜¯æ‰¿æ¥ [äºŒå‰æ ‘å¿ƒæ³•ï¼ˆçº²é¢†ç¯‡ï¼‰](https://labuladong.online/algo/essential-technique/binary-tree-summary/) çš„ç¬¬äº”ç¯‡æ–‡ç« ï¼Œä¸»è¦è®²äºŒå‰æ ‘ååºä½ç½®çš„å¦™ç”¨ï¼Œå¤è¿°ä¸‹å‰æ–‡å…³äºååºéå†çš„æè¿°ï¼š

> å‰åºä½ç½®çš„ä»£ç åªèƒ½ä»å‡½æ•°å‚æ•°ä¸­è·å–çˆ¶èŠ‚ç‚¹ä¼ é€’æ¥çš„æ•°æ®ï¼Œè€Œååºä½ç½®çš„ä»£ç ä¸ä»…å¯ä»¥è·å–å‚æ•°æ•°æ®ï¼Œè¿˜å¯ä»¥è·å–åˆ°å­æ ‘é€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ é€’å›æ¥çš„æ•°æ®ã€‚
>
> **é‚£ä¹ˆæ¢å¥è¯è¯´ï¼Œä¸€æ—¦ä½ å‘ç°é¢˜ç›®å’Œå­æ ‘æœ‰å…³ï¼Œé‚£å¤§æ¦‚ç‡è¦ç»™å‡½æ•°è®¾ç½®åˆç†çš„å®šä¹‰å’Œè¿”å›å€¼ï¼Œåœ¨ååºä½ç½®å†™ä»£ç äº†**ã€‚

å…¶å®äºŒå‰æ ‘çš„é¢˜ç›®çœŸçš„ä¸éš¾ï¼Œæ— éå°±æ˜¯å‰ä¸­ååºéå†æ¡†æ¶æ¥å›å€’å˜›ï¼Œåªè¦ä½ æŠŠä¸€ä¸ªèŠ‚ç‚¹è¯¥åšçš„äº‹æƒ…å®‰æ’å¥½ï¼Œå‰©ä¸‹çš„æŠ›ç»™é€’å½’æ¡†æ¶å³å¯ã€‚

ä½†æ˜¯å¯¹äºæœ‰çš„é¢˜ç›®ï¼Œä¸åŒçš„éå†é¡ºåºæ—¶é—´å¤æ‚åº¦ä¸åŒã€‚å°¤å…¶æ˜¯è¿™ä¸ªååºä½ç½®çš„ä»£ç ï¼Œæœ‰æ—¶å€™å¯ä»¥å¤§å¹…æå‡ç®—æ³•æ•ˆç‡ã€‚

æˆ‘ä»¬å†çœ‹çœ‹ååºéå†çš„ä»£ç æ¡†æ¶ï¼š

```python
def traverse(root):
    if not root:
        return
    traverse(root.left)
    traverse(root.right)
    # ååºä»£ç çš„ä½ç½®
    # åœ¨è¿™é‡Œå¤„ç†å½“å‰èŠ‚ç‚¹
```

çœ‹è¿™ä¸ªä»£ç æ¡†æ¶ï¼Œä½ è¯´ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åœ¨ååºä½ç½®å†™ä»£ç å‘¢ï¼Ÿ

**å¦‚æœå½“å‰èŠ‚ç‚¹è¦åšçš„äº‹æƒ…éœ€è¦é€šè¿‡å·¦å³å­æ ‘çš„è®¡ç®—ç»“æœæ¨å¯¼å‡ºæ¥ï¼Œå°±è¦ç”¨åˆ°ååºéå†**ã€‚

ä¸‹é¢å°±è®²ä¸€ä¸ªç»å…¸çš„ç®—æ³•é—®é¢˜ï¼Œå¯ä»¥ç›´è§‚åœ°ä½“ä¼šåˆ°ååºä½ç½®çš„å¦™ç”¨ã€‚è¿™æ˜¯åŠ›æ‰£ç¬¬ 1373 é¢˜ã€Œ[äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ](https://leetcode.cn/problems/maximum-sum-bst-in-binary-tree/)ã€ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```python
def maxSumBST(root: TreeNode)
```

## [é¢˜ç›®åˆ†æ](https://labuladong.online/algo/data-structure/bst-part4/#é¢˜ç›®åˆ†æ)

é¢˜ç›®ä¼šç»™ä½ è¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿™æ£µäºŒå‰æ ‘çš„å­æ ‘ä¸­å¯èƒ½åŒ…å«**äºŒå‰æœç´¢æ ‘**å¯¹å§ï¼Œè¯·ä½ æ‰¾åˆ°**èŠ‚ç‚¹ä¹‹å’Œæœ€å¤§çš„**é‚£æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¿”å›å®ƒçš„èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚

äºŒå‰æœç´¢æ ‘ï¼ˆç®€å†™ä½œ BSTï¼‰çš„æ€§è´¨è¯¦è§åŸºç¡€çŸ¥è¯†ç« èŠ‚ [äºŒå‰æ ‘åŸºç¡€](https://labuladong.online/algo/data-structure-basic/binary-tree-basic/)ï¼Œç®€å•è¯´å°±æ˜¯ã€Œå·¦å°å³å¤§ã€ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œæ•´æ£µå·¦å­æ ‘éƒ½æ¯”è¯¥èŠ‚ç‚¹çš„å€¼å°ï¼Œæ•´æ£µå³å­æ ‘éƒ½æ¯”è¯¥èŠ‚ç‚¹çš„å€¼å¤§ã€‚

æ¯”å¦‚é¢˜ç›®ç»™äº†è¿™ä¸ªä¾‹å­ï¼š

![img](/1.png)

å¦‚æœè¾“å…¥è¿™æ£µäºŒå‰æ ‘ï¼Œç®—æ³•åº”è¯¥è¿”å› 20ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­ç»¿åœˆçš„é‚£æ£µå­æ ‘çš„èŠ‚ç‚¹å€¼ä¹‹å’Œï¼Œå› ä¸ºå®ƒæ˜¯ä¸€æ£µ BSTï¼Œä¸”èŠ‚ç‚¹ä¹‹å’Œæœ€å¤§ã€‚

é‚£æœ‰çš„è¯»è€…å¯èƒ½ä¼šé—®ï¼Œè¾“å…¥çš„æ˜¯ä¸€æ£µæ™®é€šäºŒå‰æ ‘ï¼Œæœ‰æ²¡æœ‰å¯èƒ½å…¶ä¸­ä¸å­˜åœ¨ BSTï¼Ÿ

ä¸ä¼šçš„ï¼Œå› ä¸ºæŒ‰ç…§ BST çš„å®šä¹‰ï¼Œä»»ä½•ä¸€ä¸ªå•ç‹¬çš„èŠ‚ç‚¹è‚¯å®šæ˜¯ BSTï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå†ä¸æµï¼ŒäºŒå‰æ ‘æœ€ä¸‹é¢çš„å¶å­èŠ‚ç‚¹è‚¯å®šéƒ½æ˜¯ BSTã€‚

æ¯”å¦‚è¯´å¦‚æœè¾“å…¥ä¸‹é¢è¿™æ£µäºŒå‰æ ‘ï¼š

![img](/2.png)

ä¸¤ä¸ªå¶å­èŠ‚ç‚¹ `1` å’Œ `2` å°±æ˜¯ BSTï¼Œæ¯”è¾ƒä¸€ä¸‹èŠ‚ç‚¹ä¹‹å’Œï¼Œç®—æ³•åº”è¯¥è¿”å› 2ã€‚

å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œé¢˜ç›®åº”è¯¥è§£é‡Šåœ°å¾ˆæ¸…æ¥šäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™é“é¢˜åº”è¯¥æ€ä¹ˆåšã€‚

## [æ€è·¯åˆ†æ](https://labuladong.online/algo/data-structure/bst-part4/#æ€è·¯åˆ†æ)

åˆšæ‰è¯´äº†ï¼Œ**äºŒå‰æ ‘ç›¸å…³é¢˜ç›®æœ€æ ¸å¿ƒçš„æ€è·¯æ˜¯æ˜ç¡®å½“å‰èŠ‚ç‚¹éœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆ**ã€‚

**é‚£ä¹ˆæˆ‘ä»¬æƒ³è®¡ç®—å­æ ‘ä¸­ BST çš„æœ€å¤§å’Œï¼Œç«™åœ¨å½“å‰èŠ‚ç‚¹çš„è§†è§’ï¼Œéœ€è¦åšä»€ä¹ˆå‘¢**ï¼Ÿ

1ã€æˆ‘è‚¯å®šå¾—çŸ¥é“å·¦å³å­æ ‘æ˜¯ä¸æ˜¯åˆæ³•çš„ BSTï¼Œå¦‚æœä¸‹é¢çš„è¿™ä¿©å„¿å­æœ‰ä¸€ä¸ªä¸æ˜¯ BSTï¼Œä»¥æˆ‘ä¸ºæ ¹çš„è¿™æ£µæ ‘è‚¯å®šä¸ä¼šæ˜¯ BSTï¼Œå¯¹å§ã€‚

2ã€å¦‚æœå·¦å³å­æ ‘éƒ½æ˜¯åˆæ³•çš„ BSTï¼Œæˆ‘å¾—ç…ç…å·¦å³å­æ ‘åŠ ä¸Šè‡ªå·±è¿˜æ˜¯ä¸æ˜¯åˆæ³•çš„ BST äº†ã€‚å› ä¸ºæŒ‰ç…§ BST çš„å®šä¹‰ï¼Œå½“å‰èŠ‚ç‚¹çš„å€¼åº”è¯¥å¤§äºå·¦å­æ ‘çš„æœ€å¤§å€¼ï¼Œå°äºå³å­æ ‘çš„æœ€å°å€¼ï¼Œå¦åˆ™å°±ç ´åäº† BST çš„æ€§è´¨ã€‚

3ã€å› ä¸ºé¢˜ç›®è¦è®¡ç®—æœ€å¤§çš„èŠ‚ç‚¹ä¹‹å’Œï¼Œå¦‚æœå·¦å³å­æ ‘åŠ ä¸Šæˆ‘è‡ªå·±è¿˜æ˜¯ä¸€æ£µåˆæ³•çš„ BSTï¼Œä¹Ÿå°±æ˜¯è¯´ä»¥æˆ‘ä¸ºæ ¹çš„æ•´æ£µæ ‘æ˜¯ä¸€æ£µ BSTï¼Œé‚£æˆ‘éœ€è¦çŸ¥é“æˆ‘ä»¬è¿™æ£µ BST çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œæ˜¯å¤šå°‘ï¼Œæ–¹ä¾¿å’Œåˆ«çš„ BST äº‰ä¸ªé«˜ä¸‹ï¼Œå¯¹å§ã€‚

**æ ¹æ®ä»¥ä¸Šä¸‰ç‚¹ï¼Œç«™åœ¨å½“å‰èŠ‚ç‚¹çš„è§†è§’ï¼Œéœ€è¦çŸ¥é“ä»¥ä¸‹å…·ä½“ä¿¡æ¯**ï¼š

1ã€å·¦å³å­æ ‘æ˜¯å¦æ˜¯ BSTã€‚

2ã€å·¦å­æ ‘çš„æœ€å¤§å€¼å’Œå³å­æ ‘çš„æœ€å°å€¼ã€‚

3ã€å·¦å³å­æ ‘çš„èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚

åªæœ‰çŸ¥é“äº†è¿™å‡ ä¸ªå€¼ï¼Œæˆ‘ä»¬æ‰èƒ½æ»¡è¶³é¢˜ç›®çš„è¦æ±‚ï¼Œç°åœ¨å¯ä»¥å°è¯•ç”¨ä¼ªç å†™å‡ºç®—æ³•çš„å¤§è‡´é€»è¾‘ï¼š

```python
class Solution:
    
    def __init__(self):
        # å…¨å±€å˜é‡ï¼Œè®°å½• BST æœ€å¤§èŠ‚ç‚¹ä¹‹å’Œ
        self.maxSum = 0

    def maxSumBST(self, root):
        self.traverse(root)
        return self.maxSum

    # éå†äºŒå‰æ ‘
    def traverse(self, root):
        if root is None:
            return

        # ******* å‰åºä½ç½® *******
        # åˆ¤æ–­å·¦å³å­æ ‘æ˜¯ä¸æ˜¯ BST
        if self.isBST(root.left) and self.isBST(root.right):
            # è®¡ç®—å·¦å­æ ‘çš„æœ€å¤§å€¼å’Œå³å­æ ‘çš„æœ€å°å€¼
            leftMax = self.findMax(root.left)
            rightMin = self.findMin(root.right)
            # åˆ¤æ–­ä»¥ root èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘æ˜¯ä¸æ˜¯ BST
            if root.val > leftMax and root.val < rightMin:
                # å¦‚æœæ¡ä»¶éƒ½ç¬¦åˆï¼Œè®¡ç®—å½“å‰ BST çš„èŠ‚ç‚¹ä¹‹å’Œ
                leftSum = self.findSum(root.left)
                rightSum = self.findSum(root.right)
                rootSum = leftSum + rightSum + root.val
                # è®¡ç®— BST èŠ‚ç‚¹çš„æœ€å¤§å’Œ
                self.maxSum = max(self.maxSum, rootSum)
        # **************************

        # äºŒå‰æ ‘éå†æ¡†æ¶ï¼Œéå†å­æ ‘èŠ‚ç‚¹
        self.traverse(root.left)
        self.traverse(root.right)

    # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§å€¼
    def findMax(self, root):
        pass

    # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å°å€¼
    def findMin(self, root):
        pass

    # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„èŠ‚ç‚¹å’Œ
    def findSum(self, root):
        pass

    # åˆ¤æ–­ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯å¦æ˜¯ BST
    def isBST(self, root):
        pass
```

è¿™ä¸ªä»£ç é€»è¾‘åº”è¯¥æ˜¯ä¸éš¾ç†è§£çš„ï¼Œä»£ç åœ¨å‰åºéå†çš„ä½ç½®æŠŠä¹‹å‰çš„åˆ†æéƒ½å®ç°äº†ä¸€éã€‚

å…¶ä¸­æœ‰å››ä¸ªè¾…åŠ©å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œæˆ‘å°±ä¸å…·ä½“å®ç°äº†ï¼Œå…¶ä¸­åªæœ‰åˆ¤æ–­åˆæ³• BST çš„å‡½æ•°ç¨æœ‰æŠ€æœ¯å«é‡ï¼Œå‰æ–‡ [äºŒå‰æœç´¢æ ‘æ“ä½œé›†é”¦](https://labuladong.online/algo/data-structure/bst-part2/) å†™è¿‡ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚

**ç¨ä½œåˆ†æå°±ä¼šå‘ç°ï¼Œè¿™å‡ ä¸ªè¾…åŠ©å‡½æ•°éƒ½æ˜¯é€’å½’å‡½æ•°ï¼Œéƒ½è¦éå†è¾“å…¥çš„äºŒå‰æ ‘ï¼Œå¤–åŠ  `traverse` å‡½æ•°æœ¬èº«çš„é€’å½’ï¼Œå¯ä»¥è¯´æ˜¯é€’å½’ä¸ŠåŠ é€’å½’ï¼Œæ‰€ä»¥è¿™ä¸ªè§£æ³•çš„å¤æ‚åº¦æ˜¯éå¸¸é«˜çš„**ã€‚

å…·ä½“æ¥è¯´ï¼Œæ¯ä¸€ä¸ªè¾…åŠ©æ–¹æ³•éƒ½æ˜¯äºŒå‰æ ‘éå†å‡½æ•°ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(N)*O*(*N*)ï¼Œè€Œ `traverse` éå†æ¡†æ¶ä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æŠŠè¿™äº›è¾…åŠ©å‡½æ•°è°ƒç”¨ä¸€éï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N2)*O*(*N*2)ã€‚

ä½†æ˜¯æ ¹æ®åˆšæ‰çš„åˆ†æï¼Œåƒ `leftMax`ã€`rootSum` è¿™äº›å˜é‡åˆéƒ½å¾—ç®—å‡ºæ¥ï¼Œå¦åˆ™æ— æ³•å®Œæˆé¢˜ç›®çš„è¦æ±‚ã€‚

## [æ€è·¯ä¼˜åŒ–](https://labuladong.online/algo/data-structure/bst-part4/#æ€è·¯ä¼˜åŒ–)

æˆ‘ä»¬å¸Œæœ›æ—¢ç®—å‡ºè¿™äº›å˜é‡ï¼Œåˆé¿å…è¾…åŠ©å‡½æ•°å¸¦æ¥çš„é¢å¤–å¤æ‚åº¦ï¼Œé±¼å’Œç†ŠæŒå…¨éƒ½è¦ï¼Œå¯ä»¥åšåˆ°å—ï¼Ÿ

å…¶å®æ˜¯å¯ä»¥çš„ï¼Œ**åªè¦æŠŠå‰åºéå†å˜æˆååºéå†ï¼Œè®© `traverse` å‡½æ•°æŠŠè¾…åŠ©å‡½æ•°åšçš„äº‹æƒ…é¡ºä¾¿åšæ‰**ã€‚

ä½ ä»”ç»†æƒ³æƒ³ï¼Œå¦‚æœæˆ‘çŸ¥é“äº†æˆ‘çš„å·¦å³å­æ ‘çš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆæŠŠæˆ‘çš„å€¼å’Œå®ƒä»¬æ¯”è¾ƒä¸€ä¸‹ï¼Œå°±å¯ä»¥æ¨å¯¼å‡ºä»¥æˆ‘ä¸ºæ ¹çš„è¿™æ•´æ£µäºŒå‰æ ‘çš„æœ€å¤§å€¼ã€‚æ ¹æœ¬æ²¡å¿…è¦å†éå†ä¸€éæ‰€æœ‰èŠ‚ç‚¹ï¼Œå¯¹å§ï¼Ÿæ±‚æœ€å°èŠ‚ç‚¹çš„å€¼å’ŒèŠ‚ç‚¹çš„å’Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚

è¿™å°±æ˜¯æˆ‘åœ¨å‰æ–‡ [æ‰‹æŠŠæ‰‹å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆçº²é¢†ç¯‡ï¼‰](https://labuladong.online/algo/essential-technique/binary-tree-summary/) æ‰€è®²çš„ååºéå†ä½ç½®çš„å¦™ç”¨ã€‚

å½“ç„¶ï¼Œæ­£å¦‚å‰æ–‡æ‰€è®²ï¼Œå¦‚æœè¦åˆ©ç”¨å‡½æ•°çš„è¿”å›å€¼ï¼Œå°±ä¸å»ºè®®ä½¿ç”¨ `traverse` è¿™ä¸ªå‡½æ•°åäº†ï¼Œæˆ‘ä»¬æƒ³è®¡ç®—æœ€å¤§å€¼ã€æœ€å°å€¼å’Œæ‰€æœ‰èŠ‚ç‚¹ä¹‹å’Œï¼Œä¸å¦¨å«è¿™ä¸ªå‡½æ•° `findMaxMinSum` å¥½äº†ã€‚

å…¶ä»–ä»£ç ä¸å˜ï¼Œæˆ‘ä»¬è®© `findMaxMinSum` å‡½æ•°åšä¸€äº›è®¡ç®—ä»»åŠ¡ï¼Œè¿”å›ä¸€ä¸ªå¤§å°ä¸º 4 çš„ int æ•°ç»„ï¼Œæˆ‘ä»¬æš‚ä¸”ç§°å®ƒä¸º `res`ï¼Œå…¶ä¸­ï¼š

`res[0]` è®°å½•ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯å¦æ˜¯ BSTï¼Œè‹¥ä¸º 1 åˆ™è¯´æ˜æ˜¯ BSTï¼Œè‹¥ä¸º 0 åˆ™è¯´æ˜ä¸æ˜¯ BSTï¼›

`res[1]` è®°å½•ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æœ€å°å€¼ï¼›

`res[2]` è®°å½•ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æœ€å¤§å€¼ï¼›

`res[3]` è®°å½•ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚

å¯¹äºå½“å‰èŠ‚ç‚¹ï¼Œå¦‚æœåˆ†åˆ«å¯¹å·¦å³å­æ ‘è®¡ç®—å‡ºäº†è¿™ 4 ä¸ªå€¼ï¼Œåªéœ€è¦ç®€å•çš„è¿ç®—ï¼Œå°±å¯ä»¥æ¨å¯¼å‡ºä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹çš„äºŒå‰æ ‘çš„è¿™ 4 ä¸ªå€¼ï¼Œé¿å…äº†é‡å¤éå†ã€‚

ç›´æ¥çœ‹ä»£ç å®ç°å§ï¼š

```python
class Solution:
    
    def __init__(self):
        # è®°å½• BST æœ€å¤§èŠ‚ç‚¹ä¹‹å’Œ
        self.maxSum = 0

    def maxSumBST(self, root):
        self.findMaxMinSum(root)
        return self.maxSum

    # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€èŠ‚ç‚¹å’Œ
    def findMaxMinSum(self, root):
        # base case
        if root is None:
            return [1, float('inf'), float('-inf'), 0]
        
        # é€’å½’è®¡ç®—å·¦å³å­æ ‘
        left = self.findMaxMinSum(root.left)
        right = self.findMaxMinSum(root.right)

        # ******* ååºä½ç½® *******
        # é€šè¿‡ left å’Œ right æ¨å¯¼è¿”å›å€¼
        # å¹¶ä¸”æ­£ç¡®æ›´æ–° maxSum å˜é‡
        res = [0, 0, 0, 0]
        if left[0] == 1 and right[0] == 1 and root.val > left[2] and root.val < right[1]:
            # ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯ BST
            res[0] = 1
            # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST çš„æœ€å°å€¼
            res[1] = min(left[1], root.val)
            # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST çš„æœ€å¤§å€¼
            res[2] = max(right[2], root.val)
            # è®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST æ‰€æœ‰èŠ‚ç‚¹ä¹‹å’Œ
            res[3] = left[3] + right[3] + root.val
            # æ›´æ–°å…¨å±€å˜é‡
            self.maxSum = max(self.maxSum, res[3])
        else:
            # ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸æ˜¯ BST
            res[0] = 0
            # å…¶ä»–çš„å€¼éƒ½æ²¡å¿…è¦è®¡ç®—äº†ï¼Œå› ä¸ºç”¨ä¸åˆ°
            
        return res
```

è¿™æ ·ï¼Œè¿™é“é¢˜å°±è§£å†³äº†ï¼Œ`findMaxMinSum` å‡½æ•°åœ¨éå†äºŒå‰æ ‘çš„åŒæ—¶é¡ºä¾¿æŠŠä¹‹å‰è¾…åŠ©å‡½æ•°åšçš„äº‹æƒ…éƒ½åšäº†ï¼Œé¿å…äº†åœ¨é€’å½’å‡½æ•°ä¸­è°ƒç”¨é€’å½’å‡½æ•°ï¼Œæ—¶é—´å¤æ‚åº¦åªæœ‰ O(N)ã€‚

## [æœ€åæ€»ç»“](https://labuladong.online/algo/data-structure/bst-part4/#æœ€åæ€»ç»“)

ä½ çœ‹ï¼Œè¿™å°±æ˜¯ååºéå†çš„å¦™ç”¨ï¼Œç›¸å¯¹å‰åºéå†çš„è§£æ³•ï¼Œç°åœ¨çš„è§£æ³•ä¸ä»…æ•ˆç‡é«˜ï¼Œè€Œä¸”ä»£ç é‡å°‘ï¼Œæ¯”è¾ƒä¼˜ç¾ã€‚

è¿™ä¸ªä¼˜åŒ–å±äºå‰æ–‡ [ç®—æ³•çš„æœ¬è´¨](https://labuladong.online/algo/essential-technique/algorithm-summary/) ä¸­æåˆ°çš„ã€Œå¦‚ä½•èªæ˜çš„ç©·ä¸¾ã€çš„èŒƒç•´ã€‚

é‚£å¯èƒ½æœ‰è¯»è€…é—®ï¼Œååºéå†è¿™ä¹ˆå¥½ï¼Œæ˜¯ä¸æ˜¯å°±åº”è¯¥å°½å¯èƒ½å¤šç”¨ååºéå†ï¼Ÿ

ä¸æ˜¯ï¼Œä¸»è¦æ˜¯çœ‹é¢˜ç›®ï¼Œçœ‹ä½ è¿™ä¸ªé—®é¢˜é€‚åˆã€Œéå†ã€çš„æ€è·¯è¿˜æ˜¯ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€è·¯ã€‚ä¸ºä»€ä¹ˆè¿™é“é¢˜ç”¨ååºéå†æœ‰å¥‡æ•ˆå‘¢ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çš„è¿™äº›å˜é‡å…¨éƒ½å¯ä»¥é€šè¿‡å­é—®é¢˜çš„ç»“æœæ¨åˆ°å‡ºæ¥ï¼Œé€‚åˆç”¨ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€è·¯æ±‚è§£ã€‚

ä½ è®¡ç®—ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å·¦å³å­æ ‘çš„å’ŒåŠ ä¸Š `root.val` è®¡ç®—å‡ºæ¥ï¼Ÿ

ä½ è®¡ç®—ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§å€¼/æœ€å°å€¼ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å·¦å³å­æ ‘çš„æœ€å¤§å€¼/æœ€å°å€¼å’Œ `root.val` æ¯”è¾ƒå‡ºæ¥ï¼Ÿ

ä½ åˆ¤æ–­ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯ä¸æ˜¯ BSTï¼Œæ˜¯ä¸æ˜¯å¾—å…ˆåˆ¤æ–­å·¦å³å­æ ‘æ˜¯ä¸æ˜¯ BSTï¼Ÿæ˜¯ä¸æ˜¯è¿˜å¾—çœ‹çœ‹å·¦å³å­æ ‘çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Ÿ

é‚£ä¹ˆå……åˆ†åˆ©ç”¨å­é—®é¢˜çš„ç­”æ¡ˆï¼Œå½“ç„¶è¦æ¯”æ¯æ¬¡éƒ½å‚»ä¹ä¹éå†æ‰€æœ‰èŠ‚ç‚¹è¦é«˜æ•ˆã€‚

**ä»¥æˆ‘çš„åˆ·é¢˜ç»éªŒï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½é¿å…é€’å½’å‡½æ•°ä¸­è°ƒç”¨å…¶ä»–é€’å½’å‡½æ•°**ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œå¤§æ¦‚ç‡æ˜¯ä»£ç å®ç°æœ‰ç‘•ç–µï¼Œå¯ä»¥è¿›è¡Œç±»ä¼¼æœ¬æ–‡çš„ä¼˜åŒ–æ¥é¿å…é€’å½’å¥—é€’å½’ã€‚

æœ¬æ–‡å°±åˆ°è¿™é‡Œï¼Œæ›´å¤šç»å…¸çš„äºŒå‰æ ‘ä¹ é¢˜ä»¥åŠé€’å½’æ€ç»´çš„è®­ç»ƒï¼Œè¯·å‚è§äºŒå‰æ ‘ç« èŠ‚ä¸­çš„ [é€’å½’ä¸“é¡¹ç»ƒä¹ ](https://labuladong.online/algo/intro/binary-tree-practice/)ã€‚

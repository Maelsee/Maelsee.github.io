---
title: äºŒå‰æ ‘ç®—æ³•ä¹ é¢˜
typora-root-url: äºŒå‰æ ‘ç®—æ³•ä¹ é¢˜
mathjax: true
date: 2025-08-03 14:02:25
tags:
    - å®è·µ
    - LeetCode
categories: 
  - äºŒå‰æ ‘ç®—æ³•
  - ç®—æ³•
  - æ•°æ®ç»“æ„
---

# ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I

ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè®©ä½ åœ¨äºŒå‰æ ‘çš„ã€Œæ ‘æã€ä¸Šåšæ–‡ç« ï¼Œé‚£ä¹ˆç”¨éå†çš„æ€ç»´æ¨¡å¼è§£é¢˜æ˜¯æ¯”è¾ƒè‡ªç„¶çš„æƒ³æ³•ã€‚

## [257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#slug_binary-tree-paths)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-paths/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-paths/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼ŒæŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä»»æ„é¡ºåº</strong><span>&nbsp;</span>ï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">å¶å­èŠ‚ç‚¹</strong><span>&nbsp;</span>æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p>&nbsp;<p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/03/12/paths-tree.jpg" style="max-width: 100%; width: 207px; height: 293px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,null,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>["1-&gt;2-&gt;5","1-&gt;3"]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>["1"]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 100]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-paths/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

ä½ è®©æˆ‘æ±‚æ‰€æœ‰æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œé‚£æˆ‘éå†ä¸€éäºŒå‰æ ‘è‚¯å®šå¯ä»¥æå®šï¼Œéå†åˆ°å¶å­èŠ‚ç‚¹çš„æ—¶å€™æƒ³åŠæ³•æŠŠè·¯å¾„ç”Ÿæˆå‡ºæ¥å°±è¡Œäº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#è§£æ³•ä»£ç )

```python
class Solution:
    def binaryTreePaths(self, root: TreeNode) -> List[str]:
        # éå†ä¸€éäºŒå‰æ ‘å°±èƒ½å‡ºç»“æœäº†
        self.traverse(root)
        return self.res

    def __init__(self):
        # è®°å½• traverse å‡½æ•°é€’å½’æ—¶çš„è·¯å¾„
        self.path = []
        # è®°å½•æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„
        self.res = []

    def traverse(self, root: TreeNode):
        if root is None:
            return
        # root æ˜¯å¶å­èŠ‚ç‚¹
        if root.left is None and root.right is None:
            self.path.append(str(root.val))
            # å°†è¿™æ¡è·¯å¾„è£…å…¥ res
            self.res.append("->".join(self.path))
            self.path.pop()
            return
        # å‰åºéå†ä½ç½®
        self.path.append(str(root.val))
        # é€’å½’éå†å·¦å³å­æ ‘
        self.traverse(root.left)
        self.traverse(root.right)
        # ååºéå†ä½ç½®
        self.path.pop()
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_binary-tree-paths" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-paths" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-paths/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [129. æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#slug_sum-root-to-leaf-numbers)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">129. æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/sum-root-to-leaf-numbers/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/sum-root-to-leaf-numbers/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜æ”¾æœ‰ä¸€ä¸ª<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">9</code><span>&nbsp;</span>ä¹‹é—´çš„æ•°å­—ã€‚<div class="original__bRMd"><div><p style="line-height: 1.6; overflow-wrap: break-word;">æ¯æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„éƒ½ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä¾‹å¦‚ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 -&gt; 2 -&gt; 3</code><span>&nbsp;</span>è¡¨ç¤ºæ•°å­—<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">123</code><span>&nbsp;</span>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">è®¡ç®—ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹ç”Ÿæˆçš„<span>&nbsp;</span><strong style="font-weight: 600;">æ‰€æœ‰æ•°å­—ä¹‹å’Œ</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">å¶èŠ‚ç‚¹</strong><span>&nbsp;</span>æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/num1tree.jpg" style="max-width: 100%; width: 212px; height: 182px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>25
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">1-&gt;2</code> ä»£è¡¨æ•°å­— <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">12</code>
ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">1-&gt;3</code> ä»£è¡¨æ•°å­— <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">13</code>
å› æ­¤ï¼Œæ•°å­—æ€»å’Œ = 12 + 13 = <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">25</code></pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/num2tree.jpg" style="max-width: 100%; width: 292px; height: 302px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [4,9,0,5,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1026
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">4-&gt;9-&gt;5</code> ä»£è¡¨æ•°å­— 495
ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">4-&gt;9-&gt;1</code> ä»£è¡¨æ•°å­— 491
ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">4-&gt;0</code> ä»£è¡¨æ•°å­— 40
å› æ­¤ï¼Œæ•°å­—æ€»å’Œ = 495 + 491 + 40 = <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">1026</code>
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 9</code></li><li>æ ‘çš„æ·±åº¦ä¸è¶…è¿‡<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">10</code></li></ul></div></div></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/sum-root-to-leaf-numbers/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 129. æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

ä½ æƒ³ï¼Œè®©æˆ‘è·å–æ‰€æœ‰è·¯å¾„æ•°å­—ä¹‹å’Œï¼Œé‚£æˆ‘é€’å½’éå†ä¸€éäºŒå‰æ ‘ï¼Œæ²¿è·¯è®°å½•ä¸‹æ¥è·¯å¾„ä¸Šçš„æ•°å­—ï¼Œåˆ°å¶å­èŠ‚ç‚¹çš„æ—¶å€™æ±‚å’Œï¼Œä¸å°±å®Œäº‹äº†ï¼Ÿ

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def __init__(self):
        self.path = ""
        self.res = 0

    def sumNumbers(self, root: TreeNode) -> int:
        # éå†ä¸€éäºŒå‰æ ‘å°±èƒ½å‡ºç»“æœ
        self.traverse(root)
        return self.res

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root):
        if root is None:
            return
        # å‰åºéå†ä½ç½®ï¼Œè®°å½•èŠ‚ç‚¹å€¼
        self.path += str(root.val)
        if root.left is None and root.right is None:
            # åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œç´¯åŠ è·¯å¾„å’Œ
            self.res += int(self.path)
        # äºŒå‰æ ‘é€’å½’æ¡†æ¶ï¼Œéå†å·¦å³å­æ ‘
        self.traverse(root.left)
        self.traverse(root.right)

        # åç»­éå†ä½ç½®ï¼Œæ’¤é”€èŠ‚ç‚¹å€¼
        self.path = self.path[:-1]
```

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 049. ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„æ•°å­—ä¹‹å’Œ ğŸŸ ](https://leetcode.cn/problems/3Etpl5)

## [199. äºŒå‰æ ‘çš„å³è§†å›¾](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#slug_binary-tree-right-side-view)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">199. äºŒå‰æ ‘çš„å³è§†å›¾</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-right-side-view/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-right-side-view/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">æ ¹èŠ‚ç‚¹</strong><span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/02/14/tree.jpg" style="max-width: 100%; width: 270px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> [1,2,3,null,5,null,4]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [1,3,4]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> [1,null,3]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [1,3]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> []
<strong style="font-weight: 600;">è¾“å‡º:</strong> []
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0,100]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-right-side-view/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 199. äºŒå‰æ ‘çš„å³è§†å›¾</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#åŸºæœ¬æ€è·¯-2)

è¿™é¢˜æœ‰ä¸¤ä¸ªæ€è·¯ï¼š

1ã€ç”¨ BFS å±‚åºéå†ç®—æ³•ï¼Œæ¯ä¸€å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯äºŒå‰æ ‘çš„å³ä¾§è§†å›¾ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ BFS åè¿‡æ¥ï¼Œä»å³å¾€å·¦éå†æ¯ä¸€è¡Œï¼Œè¿›ä¸€æ­¥æå‡æ•ˆç‡ã€‚

2ã€ç”¨ DFS é€’å½’éå†ç®—æ³•ï¼ŒåŒæ ·éœ€è¦åè¿‡æ¥ï¼Œå…ˆé€’å½’ `root.right` å†é€’å½’ `root.left`ï¼ŒåŒæ—¶ç”¨ `res` è®°å½•æ¯ä¸€å±‚çš„æœ€å³ä¾§èŠ‚ç‚¹ä½œä¸ºå³ä¾§è§†å›¾ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#è§£æ³•ä»£ç -2)

```python
from collections import deque

class Solution:
    # BFS å±‚åºéå†è§£æ³•
    def rightSideView(self, root) -> list:
        res = []
        if root is None:
            return res
        # BFS å±‚åºéå†ï¼Œè®¡ç®—å³ä¾§è§†å›¾
        q = deque([root])
        # while å¾ªç¯æ§åˆ¶ä»ä¸Šå‘ä¸‹ä¸€å±‚å±‚éå†
        while q:
            sz = len(q)
            # æ¯ä¸€å±‚å¤´éƒ¨å°±æ˜¯æœ€å³ä¾§çš„å…ƒç´ 
            last = q[0]
            for i in range(sz):
                cur = q.popleft()
                # æ§åˆ¶æ¯ä¸€å±‚ä»å³å‘å·¦éå†
                if cur.right:
                    q.append(cur.right)
                if cur.left:
                    q.append(cur.left)
            # æ¯ä¸€å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯äºŒå‰æ ‘çš„å³ä¾§è§†å›¾
            res.append(last.val)
        return res

    # DFS é€’å½’éå†è§£æ³•
    def rightSideView_DFS(self, root) -> list:
        self.res = []
        # è®°å½•é€’å½’çš„å±‚æ•°
        self.depth = 0
        self.traverse(root)
        return self.res

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root):
        if root is None:
            return
        # å‰åºéå†ä½ç½®
        self.depth += 1
        if len(self.res) < self.depth:
            # è¿™ä¸€å±‚è¿˜æ²¡æœ‰è®°å½•å€¼
            # è¯´æ˜ root å°±æ˜¯å³ä¾§è§†å›¾çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
            self.res.append(root.val)
        # æ³¨æ„ï¼Œè¿™é‡Œåè¿‡æ¥ï¼Œå…ˆéå†å³å­æ ‘å†éå†å·¦å­æ ‘
        # è¿™æ ·é¦–å…ˆéå†çš„ä¸€å®šæ˜¯å³ä¾§èŠ‚ç‚¹
        self.traverse(root.right)
        self.traverse(root.left)
        # ååºéå†ä½ç½®
        self.depth -= 1
# ä»å·¦åˆ°å³æ­£å¸¸éå†
class Solution:
    def __init__(self):
        self.res = []

    def rightSideView(self, root: Optional[TreeNode]) -> List[int]:
        self.bfs(root)
        return self.res

    def bfs(self, root: Optional[TreeNode]):
        if root is None:
            return
        q = [root]
        while q:
            sz = len(q)
            self.res.append(q[-1].val)
            for _ in range(sz):
                cur = q.pop(0)  # ç§»é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ 
                if cur.left:
                    q.append(cur.left)
                if cur.right:
                    q.append(cur.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_binary-tree-right-side-view" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-right-side-view" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-right-side-view/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [662. äºŒå‰æ ‘æœ€å¤§å®½åº¦ ğŸŸ ](https://leetcode.cn/problems/maximum-width-of-binary-tree)
- [å‰‘æŒ‡ Offer II 046. äºŒå‰æ ‘çš„å³ä¾§è§†å›¾ ğŸŸ ](https://leetcode.cn/problems/WNC0Lk)

## [988. ä»å¶ç»“ç‚¹å¼€å§‹çš„æœ€å°å­—ç¬¦ä¸²](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#slug_smallest-string-starting-from-leaf)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">988. ä»å¶ç»“ç‚¹å¼€å§‹çš„æœ€å°å­—ç¬¦ä¸²</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/smallest-string-starting-from-leaf/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/smallest-string-starting-from-leaf/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€é¢—æ ¹ç»“ç‚¹ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;çš„äºŒå‰æ ‘ï¼Œæ ‘ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹éƒ½æœ‰ä¸€ä¸ª&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 25]</code>&nbsp;èŒƒå›´å†…çš„å€¼ï¼Œåˆ†åˆ«ä»£è¡¨å­—æ¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'a'</code><span>&nbsp;</span>åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'z'</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›<span>&nbsp;</span><em><strong style="font-weight: 600;">æŒ‰å­—å…¸åºæœ€å°</strong><span>&nbsp;</span>çš„å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ä»è¿™æ£µæ ‘çš„ä¸€ä¸ªå¶ç»“ç‚¹å¼€å§‹ï¼Œåˆ°æ ¹ç»“ç‚¹ç»“æŸ</em>ã€‚</p><blockquote style="margin: 1rem 0px; padding-block: 0.25rem; padding-inline: 1rem 0px; border-inline-start: 3px solid rgb(184, 184, 186); color: rgba(60, 60, 67, 0.78); font-size: 1rem; overflow-wrap: break-word; transition: border-color 0.3s, color 0.3s;"><p style="line-height: 1.6; overflow-wrap: break-word; margin: inherit;">æ³¨<strong style="font-weight: 600;">ï¼š</strong>å­—ç¬¦ä¸²ä¸­ä»»ä½•è¾ƒçŸ­çš„å‰ç¼€åœ¨<span>&nbsp;</span><strong style="font-weight: 600;">å­—å…¸åºä¸Š</strong><span>&nbsp;</span>éƒ½æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">è¾ƒå°</strong><span>&nbsp;</span>çš„ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä¾‹å¦‚ï¼Œåœ¨å­—å…¸åºä¸Š&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">"ab"</code><span>&nbsp;</span>æ¯”&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">"aba"</code>&nbsp;è¦å°ã€‚å¶ç»“ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹ã€‚&nbsp;</li></ul></blockquote><p style="line-height: 1.6; overflow-wrap: break-word;">èŠ‚ç‚¹çš„å¶èŠ‚ç‚¹æ˜¯æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><ol style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"></ol><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/02/tree1.png" style="max-width: 100%; height: 358px; width: 534px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [0,1,2,3,4,3,4]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>"dba"
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2019/01/30/tree2.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [25,1,3,1,3,0,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>"adz"
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2019/02/01/tree3.png" style="max-width: 100%; height: 513px; width: 490px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,2,1,null,1,0,null,0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>"abc"
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ç»™å®šæ ‘çš„ç»“ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 8500]</code><span>&nbsp;</span>èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 25</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/smallest-string-starting-from-leaf/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 988. ä»å¶ç»“ç‚¹å¼€å§‹çš„æœ€å°å­—ç¬¦ä¸²</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

ä»£ç çœ‹èµ·æ¥è™½ç„¶å¤šï¼Œä½†æ€è·¯éå¸¸ç®€å•ï¼šç”¨ `path` ç»´æŠ¤é€’å½’éå†çš„è·¯å¾„ï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹çš„æ—¶å€™åˆ¤æ–­å­—å…¸åºæœ€å°çš„è·¯å¾„ã€‚

ä¸è¦å¿˜äº†åœ¨å¶å­èŠ‚ç‚¹çš„æ—¶å€™ä¹Ÿè¦æ­£ç¡®ç»´æŠ¤ `path` å˜é‡ï¼Œè€Œä¸”è¦æŠŠ StringBuilder ä¸­çš„å­—ç¬¦ä¸²åè½¬æ‰æ˜¯é¢˜ç›®æƒ³è¦çš„ç­”æ¡ˆã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#è§£æ³•ä»£ç -3)

```python
class Solution:
    def smallestFromLeaf(self, root: TreeNode) -> str:
        self.traverse(root)
        return self.res
    
    # éå†è¿‡ç¨‹ä¸­çš„è·¯å¾„
    path = ""
    res = None

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root):
        if root is None:
            return
        if root.left is None and root.right is None:
            # æ‰¾åˆ°å¶å­ç»“ç‚¹ï¼Œæ¯”è¾ƒå­—å…¸åºæœ€å°çš„è·¯å¾„
            # ç»“æœå­—ç¬¦ä¸²æ˜¯ä»å¶å­å‘æ ¹ï¼Œæ‰€ä»¥éœ€è¦åè½¬
            self.path = chr(ord('a') + root.val) + self.path

            s = self.path
            if self.res is None or self.res > s:
                # å¦‚æœå­—å…¸åºæ›´å°ï¼Œåˆ™æ›´æ–° res
                self.res = s

            # æ¢å¤ï¼Œæ­£ç¡®ç»´æŠ¤ path ä¸­çš„å…ƒç´ 
            self.path = self.path[1:]
            return
        # å‰åºä½ç½®
        self.path = chr(ord('a') + root.val) + self.path

        self.traverse(root.left)
        self.traverse(root.right)

        # ååºä½ç½®
        self.path = self.path[1:]
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_smallest-string-starting-from-leaf" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_smallest-string-starting-from-leaf" src="https://labuladong.online/algo-visualize/leetcode/smallest-string-starting-from-leaf/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1022. ä»æ ¹åˆ°å¶çš„äºŒè¿›åˆ¶æ•°ä¹‹å’Œ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#slug_sum-of-root-to-leaf-binary-numbers)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1022. ä»æ ¹åˆ°å¶çš„äºŒè¿›åˆ¶æ•°ä¹‹å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/sum-of-root-to-leaf-binary-numbers/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/sum-of-root-to-leaf-binary-numbers/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å‡ºä¸€æ£µäºŒå‰æ ‘ï¼Œå…¶ä¸Šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½æ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code>&nbsp;æˆ–&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;ã€‚æ¯ä¸€æ¡ä»æ ¹åˆ°å¶çš„è·¯å¾„éƒ½ä»£è¡¨ä¸€ä¸ªä»æœ€é«˜æœ‰æ•ˆä½å¼€å§‹çš„äºŒè¿›åˆ¶æ•°ã€‚</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä¾‹å¦‚ï¼Œå¦‚æœè·¯å¾„ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 -&gt; 1 -&gt; 1 -&gt; 0 -&gt; 1</code>ï¼Œé‚£ä¹ˆå®ƒè¡¨ç¤ºäºŒè¿›åˆ¶æ•°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">01101</code>ï¼Œä¹Ÿå°±æ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">13</code>&nbsp;ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">å¯¹æ ‘ä¸Šçš„æ¯ä¸€ç‰‡å¶å­ï¼Œæˆ‘ä»¬éƒ½è¦æ‰¾å‡ºä»æ ¹åˆ°è¯¥å¶å­çš„è·¯å¾„æ‰€è¡¨ç¤ºçš„æ•°å­—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›è¿™äº›æ•°å­—ä¹‹å’Œã€‚é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆæ˜¯ä¸€ä¸ª<span>&nbsp;</span><strong style="font-weight: 600;">32 ä½<span>&nbsp;</span></strong>æ•´æ•°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/04/04/sum-of-root-to-leaf-binary-numbers.png" style="max-width: 100%;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,0,1,0,1,0,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>22
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>(100) + (101) + (110) + (111) = 4 + 5 + 6 + 7 = 22
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>0
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code>&nbsp;èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code>&nbsp;ä»…ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>æˆ–<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/sum-of-root-to-leaf-binary-numbers/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1022. ä»æ ¹åˆ°å¶çš„äºŒè¿›åˆ¶æ•°ä¹‹å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#åŸºæœ¬æ€è·¯-4)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

ç”¨ `path` å˜é‡ç»´æŠ¤æ¯ä¸€æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„å½¢æˆçš„äºŒè¿›åˆ¶æ•°ï¼Œåˆ°äº†å¶å­èŠ‚ç‚¹ä¹‹åå°†è¿™æ¡è·¯å¾„çš„äºŒè¿›åˆ¶æ•°ç´¯åŠ åˆ° `res` ä¸­å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#è§£æ³•ä»£ç -4)

```python
class Solution:
    def sumRootToLeaf(self, root: TreeNode) -> int:
        self.path = 0
        self.res = 0
        self.traverse(root)
        return self.res

    def traverse(self, root: TreeNode):
        if root is None:
            return
        if root.left is None and root.right is None:
            # å¶å­èŠ‚ç‚¹
            self.res += self.path << 1 | root.val
            return
        # å‰åºä½ç½®
        self.path = self.path << 1 | root.val
        self.traverse(root.left)
        self.traverse(root.right)
        # ååºä½ç½®
        self.path = self.path >> 1
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_sum-of-root-to-leaf-binary-numbers" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_sum-of-root-to-leaf-binary-numbers" src="https://labuladong.online/algo-visualize/leetcode/sum-of-root-to-leaf-binary-numbers/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1457. äºŒå‰æ ‘ä¸­çš„ä¼ªå›æ–‡è·¯å¾„](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#slug_pseudo-palindromic-paths-in-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1457. äºŒå‰æ ‘ä¸­çš„ä¼ªå›æ–‡è·¯å¾„</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/pseudo-palindromic-paths-in-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/pseudo-palindromic-paths-in-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä¸º 1 åˆ° 9 ã€‚æˆ‘ä»¬ç§°äºŒå‰æ ‘ä¸­çš„ä¸€æ¡è·¯å¾„æ˜¯ ã€Œ<strong style="font-weight: 600;">ä¼ªå›æ–‡</strong>ã€çš„ï¼Œå½“å®ƒæ»¡è¶³ï¼šè·¯å¾„ç»è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹å€¼çš„æ’åˆ—ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå›æ–‡åºåˆ—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ è¿”å›ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸­&nbsp;<strong style="font-weight: 600;">ä¼ªå›æ–‡&nbsp;</strong>è·¯å¾„çš„æ•°ç›®ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/05/23/palindromic_paths_1.png" style="max-width: 100%; height: 201px; width: 300px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,3,1,3,1,null,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2 
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ä¸Šå›¾ä¸ºç»™å®šçš„äºŒå‰æ ‘ã€‚æ€»å…±æœ‰ 3 æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„ï¼šçº¢è‰²è·¯å¾„ [2,3,3] ï¼Œç»¿è‰²è·¯å¾„ [2,1,1] å’Œè·¯å¾„ [2,3,1] ã€‚
     åœ¨è¿™äº›è·¯å¾„ä¸­ï¼Œåªæœ‰çº¢è‰²å’Œç»¿è‰²çš„è·¯å¾„æ˜¯ä¼ªå›æ–‡è·¯å¾„ï¼Œå› ä¸ºçº¢è‰²è·¯å¾„ [2,3,3] å­˜åœ¨å›æ–‡æ’åˆ— [3,2,3] ï¼Œç»¿è‰²è·¯å¾„ [2,1,1] å­˜åœ¨å›æ–‡æ’åˆ— [1,2,1] ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/05/23/palindromic_paths_2.png" style="max-width: 100%; height: 314px; width: 300px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,1,1,1,3,null,null,null,null,null,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1 
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ä¸Šå›¾ä¸ºç»™å®šäºŒå‰æ ‘ã€‚æ€»å…±æœ‰ 3 æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„ï¼šç»¿è‰²è·¯å¾„ [2,1,1] ï¼Œè·¯å¾„ [2,1,3,1] å’Œè·¯å¾„ [2,1] ã€‚
     è¿™äº›è·¯å¾„ä¸­åªæœ‰ç»¿è‰²è·¯å¾„æ˜¯ä¼ªå›æ–‡è·¯å¾„ï¼Œå› ä¸º [2,1,1] å­˜åœ¨å›æ–‡æ’åˆ— [1,2,1] ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [9]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ç»™å®šäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>5</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 9</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/pseudo-palindromic-paths-in-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1457. äºŒå‰æ ‘ä¸­çš„ä¼ªå›æ–‡è·¯å¾„</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#åŸºæœ¬æ€è·¯-5)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

éå†ä¸€éäºŒå‰æ ‘å°±èƒ½å¾—åˆ°æ¯æ¡è·¯å¾„ä¸Šçš„æ•°å­—ï¼Œä½†è¿™é¢˜çš„è€ƒç‚¹åœ¨äºï¼Œå¦‚ä½•åˆ¤æ–­ä¸€ç»„æ•°å­—æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå›æ–‡ä¸²ç»„åˆï¼Ÿ

ç¨åŠ æ€è€ƒä¸éš¾æƒ³åˆ°ï¼š**å¦‚æœä¸€ç»„æ•°å­—ä¸­ï¼Œåªæœ‰æœ€å¤šä¸€ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°ä¸ºå¥‡æ•°ï¼Œå‰©ä½™æ•°å­—çš„å‡ºç°æ¬¡æ•°å‡ä¸ºå¶æ•°ï¼Œé‚£ä¹ˆè¿™ç»„æ•°å­—å¯ä»¥ç»„æˆä¸€ä¸ªå›æ–‡ä¸²**ã€‚

é¢˜ç›®è¯´äº† `1 <= root.val <= 9`ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¤§å°ä¸º 10 çš„ `count` æ•°ç»„åšè®¡æ•°å™¨æ¥è®°å½•æ¯æ¡è·¯å¾„ä¸Šçš„å…ƒç´ å‡ºç°æ¬¡æ•°ï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹ä¹‹åæ ¹æ®å…ƒç´ å‡ºç°çš„æ¬¡æ•°åˆ¤æ–­æ˜¯å¦å¯ä»¥æ„æˆå›æ–‡ä¸²ã€‚

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ›´å·§å¦™çš„ä½è¿ç®—æ¥å®ç°ä¸Šè¿°é€»è¾‘ï¼š

1ã€é¦–å…ˆç”¨åˆ°å¼‚æˆ–è¿ç®—çš„ç‰¹æ€§ï¼Œ1 ^ 1 = 0, 0 ^ 0 = 0, 1 ^ 0 = 1ã€‚

2ã€å…¶æ¬¡ç”¨åˆ° `n & (n - 1)` å»é™¤äºŒè¿›åˆ¶æœ€åä¸€ä¸ª 1 çš„æŠ€å·§ï¼Œè¯¦è§ [ä¸œå“¥æ•™ä½ å‡ æ‹›å¸¸ç”¨çš„ä½è¿ç®—æŠ€å·§](https://labuladong.online/algo/frequency-interview/bitwise-operation/)ã€‚

æˆ‘åŒæ—¶å®ç°äº†è¿™ä¸¤ç§æ–¹æ³•ï¼Œä¾›ä½ å‚è€ƒã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#è§£æ³•ä»£ç -5)

```python
class Solution:
    def __init__(self):
        self.count = [0] * 10
        self.res = 0

    def pseudoPalindromicPaths(self, root: TreeNode) -> int:
        self.traverse(root)
        return self.res

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root: TreeNode):
        if root is None:
            return
        if root.left is None and root.right is None:
            # é‡åˆ°å¶å­èŠ‚ç‚¹ï¼Œåˆ¤æ–­è·¯å¾„æ˜¯å¦æ˜¯ä¼ªå›æ–‡ä¸²
            self.count[root.val] += 1
            # å¦‚æœè·¯å¾„ä¸Šå‡ºç°å¥‡æ•°æ¬¡çš„æ•°å­—ä¸ªæ•°å¤§äº 1ï¼Œ
            # åˆ™ä¸å¯èƒ½ç»„æˆå›æ–‡ä¸²ï¼Œåä¹‹åˆ™å¯ä»¥ç»„æˆå›æ–‡ä¸²
            odd = 0
            for n in self.count:
                if n % 2 == 1:
                    odd += 1
            if odd <= 1:
                self.res += 1
            self.count[root.val] -= 1
            return

        self.count[root.val] += 1
        # äºŒå‰æ ‘éå†æ¡†æ¶
        self.traverse(root.left)
        self.traverse(root.right)

        self.count[root.val] -= 1

# ç”¨ä½è¿ç®—ä»£æ›¿æ•°ç»„è®¡æ•°ï¼Œè¿›ä¸€æ­¥æå‡æ•ˆç‡
class Solution2:
    def __init__(self):
        self.count = 0
        self.res = 0

    def pseudoPalindromicPaths(self, root: TreeNode) -> int:
        self.traverse(root)
        return self.res

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root: TreeNode):
        if root is None:
            return
        if root.left is None and root.right is None:
            # é‡åˆ°å¶å­èŠ‚ç‚¹ï¼Œåˆ¤æ–­è·¯å¾„æ˜¯å¦æ˜¯ä¼ªå›æ–‡ä¸²
            self.count ^= (1 << root.val)
            # åˆ¤æ–­äºŒè¿›åˆ¶ä¸­åªæœ‰ä¸€ä½ 1ï¼ŒåŸç†è§ https://labuladong.online/algo/frequency-interview/bitwise-operation/
            if (self.count & (self.count - 1)) == 0:
                self.res += 1
            self.count ^= (1 << root.val)
            return
        self.count ^= (1 << root.val)
        # äºŒå‰æ ‘éå†æ¡†æ¶
        self.traverse(root.left)
        self.traverse(root.right)

        self.count ^= (1 << root.val)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-i/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_pseudo-palindromic-paths-in-a-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 0px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_pseudo-palindromic-paths-in-a-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/pseudo-palindromic-paths-in-a-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>



## [404. å·¦å¶å­ä¹‹å’Œ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_sum-of-left-leaves)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">404. å·¦å¶å­ä¹‹å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/sum-of-left-leaves/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/sum-of-left-leaves/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ï¼Œè¿”å›æ‰€æœ‰å·¦å¶å­ä¹‹å’Œã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/04/08/leftsum-tree.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [3,9,20,null,null,15,7] 
<strong style="font-weight: 600;">è¾“å‡º:</strong> 24 
<strong style="font-weight: 600;">è§£é‡Š:</strong> åœ¨è¿™ä¸ªäºŒå‰æ ‘ä¸­ï¼Œæœ‰ä¸¤ä¸ªå·¦å¶å­ï¼Œåˆ†åˆ«æ˜¯ 9 å’Œ 15ï¼Œæ‰€ä»¥è¿”å› 24
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹&nbsp;2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [1]
<strong style="font-weight: 600;">è¾“å‡º:</strong> 0
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code>&nbsp;èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/sum-of-left-leaves/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 404. å·¦å¶å­ä¹‹å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

æ— éå°±æ˜¯éå†ä¸€éäºŒå‰æ ‘ï¼Œç„¶åæ‰¾åˆ°é‚£äº›å·¦å¶å­èŠ‚ç‚¹ï¼Œç´¯åŠ å®ƒä»¬çš„å€¼ç½¢äº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç )

```python
class Solution:
    def __init__(self):
        # è®°å½•å·¦å¶å­ä¹‹å’Œ
        self.sum = 0

    def sumOfLeftLeaves(self, root: TreeNode) -> int:
        self.traverse(root)
        return self.sum


    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root: TreeNode):
        if root is None:
            return

        if (root.left is not None and
            root.left.left is None and root.left.right is None):
            # æ‰¾åˆ°å·¦ä¾§çš„å¶å­èŠ‚ç‚¹ï¼Œè®°å½•ç´¯åŠ å€¼
            self.sum += root.left.val

        # é€’å½’æ¡†æ¶
        self.traverse(root.left)
        self.traverse(root.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_sum-of-left-leaves" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_sum-of-left-leaves" src="https://labuladong.online/algo-visualize/leetcode/sum-of-left-leaves/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [623. åœ¨äºŒå‰æ ‘ä¸­å¢åŠ ä¸€è¡Œ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_add-one-row-to-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">623. åœ¨äºŒå‰æ ‘ä¸­å¢åŠ ä¸€è¡Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/add-one-row-to-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/add-one-row-to-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;å’Œä¸¤ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">depth</code>&nbsp;ï¼Œåœ¨ç»™å®šçš„æ·±åº¦&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">depth</code>&nbsp;å¤„æ·»åŠ ä¸€ä¸ªå€¼ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>çš„èŠ‚ç‚¹è¡Œã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ³¨æ„ï¼Œæ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ä½äºæ·±åº¦&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">åŠ æ³•è§„åˆ™å¦‚ä¸‹:</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ç»™å®šæ•´æ•°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">depth</code>ï¼Œå¯¹äºæ·±åº¦ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">depth - 1</code><span>&nbsp;</span>çš„æ¯ä¸ªéç©ºæ ‘èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cur</code><span>&nbsp;</span>ï¼Œåˆ›å»ºä¸¤ä¸ªå€¼ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>çš„æ ‘èŠ‚ç‚¹ä½œä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cur</code><span>&nbsp;</span>çš„å·¦å­æ ‘æ ¹å’Œå³å­æ ‘æ ¹ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cur</code><span>&nbsp;</span>åŸæ¥çš„å·¦å­æ ‘åº”è¯¥æ˜¯æ–°çš„å·¦å­æ ‘æ ¹çš„å·¦å­æ ‘ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cur</code><span>&nbsp;</span>åŸæ¥çš„å³å­æ ‘åº”è¯¥æ˜¯æ–°çš„å³å­æ ‘æ ¹çš„å³å­æ ‘ã€‚</li><li>å¦‚æœ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">depth == 1<span>&nbsp;</span></code>æ„å‘³ç€&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">depth - 1</code>&nbsp;æ ¹æœ¬æ²¡æœ‰æ·±åº¦ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼Œå€¼<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val<span>&nbsp;</span></code>ä½œä¸ºæ•´ä¸ªåŸå§‹æ ‘çš„æ–°æ ¹ï¼Œè€ŒåŸå§‹æ ‘å°±æ˜¯æ–°æ ¹çš„å·¦å­æ ‘ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/03/15/addrow-tree.jpg" style="max-width: 100%; height: 231px; width: 500px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [4,2,6,3,1,5], val = 1, depth = 2
<strong style="font-weight: 600;">è¾“å‡º:</strong> [4,1,1,2,null,null,6,3,1,5]</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/03/11/add2-tree.jpg" style="max-width: 100%; height: 277px; width: 500px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [4,2,null,3,1], val = 1, depth = 3
<strong style="font-weight: 600;">è¾“å‡º:</strong>  [4,2,null,1,1,3,null,null,1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>&nbsp;èŒƒå›´å†…</li><li>æ ‘çš„æ·±åº¦åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup>&nbsp;&lt;= val &lt;= 10<sup>5</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= depth &lt;= the depth of tree + 1</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/add-one-row-to-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 623. åœ¨äºŒå‰æ ‘ä¸­å¢åŠ ä¸€è¡Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

ç”¨ `traverse` å‡½æ•°éå†åˆ°å¯¹åº”è¡Œï¼Œè¿›è¡Œæ’å…¥å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def __init__(self):
        self.targetVal = 0
        self.targetDepth = 0

    def addOneRow(self, root: TreeNode, val: int, depth: int) -> TreeNode:
        self.targetVal = val
        self.targetDepth = depth
        # æ’å…¥åˆ°ç¬¬ä¸€è¡Œçš„è¯ç‰¹æ®Šå¯¹å¾…ä¸€ä¸‹
        if self.targetDepth == 1:
            newRoot = TreeNode(self.targetVal)
            newRoot.left = root
            return newRoot
        # éå†äºŒå‰æ ‘ï¼Œèµ°åˆ°å¯¹åº”è¡Œè¿›è¡Œæ’å…¥
        self.traverse(root, 1)

        return root

    def traverse(self, root: TreeNode, curDepth: int):
        if root is None:
            return
        # å‰åºéå†
        if curDepth == self.targetDepth - 1:
            # è¿›è¡Œæ’å…¥
            newLeft = TreeNode(self.targetVal)
            newRight = TreeNode(self.targetVal)
            newLeft.left = root.left
            newRight.right = root.right
            root.left = newLeft
            root.right = newRight
        # Recursively traverse the left and right subtree
        self.traverse(root.left, curDepth + 1)
        self.traverse(root.right, curDepth + 1)
        # ååºéå†
        # Note: The original Java code does not have any action in the post-order position,
        # but we keep the comment for consistency.
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_add-one-row-to-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_add-one-row-to-tree" src="https://labuladong.online/algo-visualize/leetcode/add-one-row-to-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [971. ç¿»è½¬äºŒå‰æ ‘ä»¥åŒ¹é…å…ˆåºéå†](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_flip-binary-tree-to-match-preorder-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">971. ç¿»è½¬äºŒå‰æ ‘ä»¥åŒ¹é…å…ˆåºéå†</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/flip-binary-tree-to-match-preorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/flip-binary-tree-to-match-preorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œæ ‘ä¸­æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä¸åŒäºå…¶ä»–èŠ‚ç‚¹ä¸”å¤„äº<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¹‹é—´çš„å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦ç»™ä½ ä¸€ä¸ªç”±<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªå€¼ç»„æˆçš„è¡Œç¨‹åºåˆ—<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">voyage</code><span>&nbsp;</span>ï¼Œè¡¨ç¤º<span>&nbsp;</span><strong style="font-weight: 600;">é¢„æœŸ</strong><span>&nbsp;</span>çš„äºŒå‰æ ‘<span>&nbsp;</span><a href="https://baike.baidu.com/item/%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/6442839?fr=aladdin" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;"><strong style="font-weight: 600;">å…ˆåºéå†</strong></a><span>&nbsp;</span>ç»“æœã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">é€šè¿‡äº¤æ¢èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Œå¯ä»¥<span>&nbsp;</span><strong style="font-weight: 600;">ç¿»è½¬</strong><span>&nbsp;</span>è¯¥äºŒå‰æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹ã€‚ä¾‹ï¼Œç¿»è½¬èŠ‚ç‚¹ 1 çš„æ•ˆæœå¦‚ä¸‹ï¼š</p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/15/fliptree.jpg" style="max-width: 100%; width: 400px; height: 187px;"><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ç¿»è½¬<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å°‘<span>&nbsp;</span></strong>çš„æ ‘ä¸­èŠ‚ç‚¹ï¼Œä½¿äºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">å…ˆåºéå†</strong><span>&nbsp;</span>ä¸é¢„æœŸçš„éå†è¡Œç¨‹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">voyage</code><span>&nbsp;</span><strong style="font-weight: 600;">ç›¸åŒ¹é…</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœå¯ä»¥ï¼Œåˆ™è¿”å›<span>&nbsp;</span><strong style="font-weight: 600;">ç¿»è½¬çš„</strong><span>&nbsp;</span>æ‰€æœ‰èŠ‚ç‚¹çš„å€¼çš„åˆ—è¡¨ã€‚ä½ å¯ä»¥æŒ‰ä»»ä½•é¡ºåºè¿”å›ç­”æ¡ˆã€‚å¦‚æœä¸èƒ½ï¼Œåˆ™è¿”å›åˆ—è¡¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[-1]</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/01/02/1219-01.png" style="max-width: 100%; width: 150px; height: 205px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2], voyage = [2,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[-1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç¿»è½¬èŠ‚ç‚¹æ— æ³•ä»¤å…ˆåºéå†åŒ¹é…é¢„æœŸè¡Œç¨‹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/01/02/1219-02.png" style="max-width: 100%; width: 150px; height: 142px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3], voyage = [1,3,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>äº¤æ¢èŠ‚ç‚¹ 2 å’Œ 3 æ¥ç¿»è½¬èŠ‚ç‚¹ 1 ï¼Œå…ˆåºéå†å¯ä»¥åŒ¹é…é¢„æœŸè¡Œç¨‹ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/01/02/1219-02.png" style="max-width: 100%; width: 150px; height: 142px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3], voyage = [1,2,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å…ˆåºéå†å·²ç»åŒ¹é…é¢„æœŸè¡Œç¨‹ï¼Œæ‰€ä»¥ä¸éœ€è¦ç¿»è½¬èŠ‚ç‚¹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç›®ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n == voyage.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val, voyage[i] &lt;= n</code></li><li>æ ‘ä¸­çš„æ‰€æœ‰å€¼<span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">voyage</code><span>&nbsp;</span>ä¸­çš„æ‰€æœ‰å€¼<span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/flip-binary-tree-to-match-preorder-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 971. ç¿»è½¬äºŒå‰æ ‘ä»¥åŒ¹é…å…ˆåºéå†</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯-2)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

ç”¨ `traverse` å‡½æ•°éå†æ•´æ£µäºŒå‰æ ‘ï¼Œå¯¹æ¯”å‰åºéå†ç»“æœï¼Œå¦‚æœèŠ‚ç‚¹çš„å€¼å¯¹ä¸ä¸Šï¼Œå°±æ— è§£ï¼›å¦‚æœå­æ ‘å¯¹ä¸ä¸Š `voyage`ï¼Œå°±å°è¯•ç¿»è½¬å­æ ‘ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç -2)

```python
class Solution:
    def flipMatchVoyage(self, root: TreeNode, voyage: List[int]) -> List[int]:
        self.res = []
        self.i = 0
        self.can_flip = True
        
        def dfs(node):
            # éå†çš„è¿‡ç¨‹ä¸­å°è¯•è¿›è¡Œåè½¬
            if not node or not self.can_flip:
                return True
            if node.val != voyage[self.i]:
                # èŠ‚ç‚¹çš„ val å¯¹ä¸ä¸Šï¼Œå¿…ç„¶æ— è§£
                self.can_flip = False
                return False
            self.i += 1
            # Only flip if there's a left child and the next value in voyage doesn't match the left child's value
            if node.left and node.left.val != voyage[self.i]:
                # å‰åºéå†ç»“æœä¸å¯¹ï¼Œå°è¯•ç¿»è½¬å·¦å³å­æ ‘
                self.res.append(node.val)
                node.left, node.right = node.right, node.left
            # è®°å½•ç¿»è½¬èŠ‚ç‚¹
            # Note: This comment was not in the original Java code, but added to match the pattern of comments. 
            # If this was not intended, it can be removed.
            return dfs(node.left) and dfs(node.right)
        
        if dfs(root):
            return self.res
        else:
            return [-1]
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_flip-binary-tree-to-match-preorder-traversal" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_flip-binary-tree-to-match-preorder-traversal" src="https://labuladong.online/algo-visualize/leetcode/flip-binary-tree-to-match-preorder-traversal/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [987. äºŒå‰æ ‘çš„å‚åºéå†](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_vertical-order-traversal-of-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">987. äºŒå‰æ ‘çš„å‚åºéå†</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/vertical-order-traversal-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/vertical-order-traversal-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸ”´</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¯·ä½ è®¾è®¡ç®—æ³•è®¡ç®—äºŒå‰æ ‘çš„<em><span>&nbsp;</span></em><strong style="font-weight: 600;">å‚åºéå†</strong><span>&nbsp;</span>åºåˆ—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¯¹ä½äº&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">(row, col)</code>&nbsp;çš„æ¯ä¸ªç»“ç‚¹è€Œè¨€ï¼Œå…¶å·¦å³å­ç»“ç‚¹åˆ†åˆ«ä½äº&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">(row + 1, col - 1)</code>&nbsp;å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">(row + 1, col + 1)</code><span>&nbsp;</span>ã€‚æ ‘çš„æ ¹ç»“ç‚¹ä½äº<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">(0, 0)</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">äºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">å‚åºéå†</strong><span>&nbsp;</span>ä»æœ€å·¦è¾¹çš„åˆ—å¼€å§‹ç›´åˆ°æœ€å³è¾¹çš„åˆ—ç»“æŸï¼ŒæŒ‰åˆ—ç´¢å¼•æ¯ä¸€åˆ—ä¸Šçš„æ‰€æœ‰ç»“ç‚¹ï¼Œå½¢æˆä¸€ä¸ªæŒ‰å‡ºç°ä½ç½®ä»ä¸Šåˆ°ä¸‹æ’åºçš„æœ‰åºåˆ—è¡¨ã€‚å¦‚æœåŒè¡ŒåŒåˆ—ä¸Šæœ‰å¤šä¸ªç»“ç‚¹ï¼Œåˆ™æŒ‰ç»“ç‚¹çš„å€¼ä»å°åˆ°å¤§è¿›è¡Œæ’åºã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›äºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">å‚åºéå†</strong><span>&nbsp;</span>åºåˆ—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/29/vtree1.jpg" style="max-width: 100%; width: 431px; height: 304px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[9],[3,15],[20],[7]]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
åˆ— -1 ï¼šåªæœ‰ç»“ç‚¹ 9 åœ¨æ­¤åˆ—ä¸­ã€‚
åˆ—  0 ï¼šåªæœ‰ç»“ç‚¹ 3 å’Œ 15 åœ¨æ­¤åˆ—ä¸­ï¼ŒæŒ‰ä»ä¸Šåˆ°ä¸‹é¡ºåºã€‚
åˆ—  1 ï¼šåªæœ‰ç»“ç‚¹ 20 åœ¨æ­¤åˆ—ä¸­ã€‚
åˆ—  2 ï¼šåªæœ‰ç»“ç‚¹ 7 åœ¨æ­¤åˆ—ä¸­ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/29/vtree2.jpg" style="max-width: 100%; width: 512px; height: 304px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,6,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[4],[2],[1,5,6],[3],[7]]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
åˆ— -2 ï¼šåªæœ‰ç»“ç‚¹ 4 åœ¨æ­¤åˆ—ä¸­ã€‚
åˆ— -1 ï¼šåªæœ‰ç»“ç‚¹ 2 åœ¨æ­¤åˆ—ä¸­ã€‚
åˆ—  0 ï¼šç»“ç‚¹ 1 ã€5 å’Œ 6 éƒ½åœ¨æ­¤åˆ—ä¸­ã€‚
          1 åœ¨ä¸Šé¢ï¼Œæ‰€ä»¥å®ƒå‡ºç°åœ¨å‰é¢ã€‚
          5 å’Œ 6 ä½ç½®éƒ½æ˜¯ (2, 0) ï¼Œæ‰€ä»¥æŒ‰å€¼ä»å°åˆ°å¤§æ’åºï¼Œ5 åœ¨ 6 çš„å‰é¢ã€‚
åˆ—  1 ï¼šåªæœ‰ç»“ç‚¹ 3 åœ¨æ­¤åˆ—ä¸­ã€‚
åˆ—  2 ï¼šåªæœ‰ç»“ç‚¹ 7 åœ¨æ­¤åˆ—ä¸­ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/29/vtree3.jpg" style="max-width: 100%; width: 512px; height: 304px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,6,5,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[4],[2],[1,5,6],[3],[7]]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
è¿™ä¸ªç¤ºä¾‹å®é™…ä¸Šä¸ç¤ºä¾‹ 2 å®Œå…¨ç›¸åŒï¼Œåªæ˜¯ç»“ç‚¹ 5 å’Œ 6 åœ¨æ ‘ä¸­çš„ä½ç½®å‘ç”Ÿäº†äº¤æ¢ã€‚
å› ä¸º 5 å’Œ 6 çš„ä½ç½®ä»ç„¶ç›¸åŒï¼Œæ‰€ä»¥ç­”æ¡ˆä¿æŒä¸å˜ï¼Œä»ç„¶æŒ‰å€¼ä»å°åˆ°å¤§æ’åºã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­ç»“ç‚¹æ•°ç›®æ€»æ•°åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/vertical-order-traversal-of-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 987. äºŒå‰æ ‘çš„å‚åºéå†</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

çœ‹è¿™é¢˜çš„éš¾åº¦æ˜¯å›°éš¾ï¼Œä½†ä½ åˆ«è¢«å“ä½äº†ï¼Œæˆ‘ä»¬ä»ç®€å•çš„å¼€å§‹ï¼Œå¦‚æœä»¥æ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºåæ ‡ `(0, 0)`ï¼Œä½ å¦‚ä½•æ‰“å°å‡ºå…¶ä»–èŠ‚ç‚¹çš„åæ ‡ï¼Ÿ

å¾ˆç®€å•ï¼Œå†™å‡ºå¦‚ä¸‹ä»£ç éå†ä¸€éäºŒå‰æ ‘å³å¯ï¼š

```cpp
void traverse(TreeNode root, int row, int col) {
    if (root == null) {
        return;
    }
    print(row, col);
    traverse(root.left, row + 1, col - 1);
    traverse(root.right, row + 1, col + 1);
}
```

ç„¶åå°±ç®€å•äº†ï¼ŒæŠŠè¿™äº›åæ ‡æ”¶é›†èµ·æ¥ï¼Œä¾æ®é¢˜ç›®è¦æ±‚è¿›è¡Œæ’åºï¼Œç»„è£…æˆé¢˜ç›®è¦æ±‚çš„è¿”å›æ•°æ®æ ¼å¼å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç -3)

```python
class Solution:
    # è®°å½•æ¯ä¸ªèŠ‚ç‚¹å’Œå¯¹åº”çš„åæ ‡ (row, col)
    class Triple:
        def __init__(self, node, row, col):
            self.node = node
            self.row = row
            self.col = col

    def verticalTraversal(self, root: TreeNode) -> List[List[int]]:
        # éå†äºŒå‰æ ‘ï¼Œå¹¶ä¸”ä¸ºæ‰€æœ‰èŠ‚ç‚¹ç”Ÿæˆå¯¹åº”çš„åæ ‡
        self.traverse(root, 0, 0)
        # æ ¹æ®é¢˜æ„ï¼Œæ ¹æ®åæ ‡å€¼å¯¹æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œæ’åºï¼š
        # æŒ‰ç…§ col ä»å°åˆ°å¤§æ’åºï¼Œcol ç›¸åŒçš„è¯æŒ‰ row ä»å°åˆ°å¤§æ’åºï¼Œ
        # å¦‚æœ col å’Œ row éƒ½ç›¸åŒï¼ŒæŒ‰ç…§ node.val ä»å°åˆ°å¤§æ’åºã€‚
        self.nodes.sort(key=lambda x: (x.col, x.row, x.node.val))
        # å°†æ’å¥½åºçš„èŠ‚ç‚¹ç»„è£…æˆé¢˜ç›®è¦æ±‚çš„è¿”å›æ ¼å¼
        res = collections.deque()
        # è®°å½•ä¸Šä¸€åˆ—ç¼–å·ï¼Œåˆå§‹åŒ–ä¸€ä¸ªç‰¹æ®Šå€¼
        preCol = float('-inf')
        for cur in self.nodes:
            if cur.col != preCol:
                # å¼€å§‹è®°å½•æ–°çš„ä¸€åˆ—
                res.append(collections.deque())
                preCol = cur.col
            res[-1].append(cur.node.val)

        return [list(col) for col in res]

    def __init__(self):
        self.nodes = []
        
    # äºŒå‰æ ‘éå†å‡½æ•°ï¼Œè®°å½•æ‰€æœ‰èŠ‚ç‚¹å¯¹åº”çš„åæ ‡
    def traverse(self, root: TreeNode, row: int, col: int):
        if root is None:
            return
        # è®°å½•åæ ‡
        self.nodes.append(self.Triple(root, row, col))
        # äºŒå‰æ ‘éå†æ¡†æ¶
        self.traverse(root.left, row + 1, col - 1)
        self.traverse(root.right, row + 1, col + 1)
```

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [666. è·¯å¾„æ€»å’Œ IV ğŸŸ ](https://leetcode.cn/problems/path-sum-iv)

## [993. äºŒå‰æ ‘çš„å ‚å…„å¼ŸèŠ‚ç‚¹](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_cousins-in-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">993. äºŒå‰æ ‘çš„å ‚å…„å¼ŸèŠ‚ç‚¹</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/cousins-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/cousins-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">åœ¨äºŒå‰æ ‘ä¸­ï¼Œæ ¹èŠ‚ç‚¹ä½äºæ·±åº¦<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>å¤„ï¼Œæ¯ä¸ªæ·±åº¦ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k</code><span>&nbsp;</span>çš„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä½äºæ·±åº¦<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k+1</code><span>&nbsp;</span>å¤„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœäºŒå‰æ ‘çš„ä¸¤ä¸ªèŠ‚ç‚¹æ·±åº¦ç›¸åŒï¼Œä½†<strong style="font-weight: 600;"><span>&nbsp;</span>çˆ¶èŠ‚ç‚¹ä¸åŒ</strong><span>&nbsp;</span>ï¼Œåˆ™å®ƒä»¬æ˜¯ä¸€å¯¹<em>å ‚å…„å¼ŸèŠ‚ç‚¹</em>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æˆ‘ä»¬ç»™å‡ºäº†å…·æœ‰å”¯ä¸€å€¼çš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œä»¥åŠæ ‘ä¸­ä¸¤ä¸ªä¸åŒèŠ‚ç‚¹çš„å€¼<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">x</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">y</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">åªæœ‰ä¸å€¼<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">x</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">y</code><span>&nbsp;</span>å¯¹åº”çš„èŠ‚ç‚¹æ˜¯å ‚å…„å¼ŸèŠ‚ç‚¹æ—¶ï¼Œæ‰è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ã€‚å¦åˆ™ï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š<br><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/16/q1248-01.png" style="max-width: 100%; height: 160px; width: 180px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4], x = 4, y = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š<br><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/16/q1248-02.png" style="max-width: 100%; height: 160px; width: 201px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,null,4,null,5], x = 5, y = 4
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/16/q1248-03.png" style="max-width: 100%; height: 160px; width: 156px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,null,4], x = 2, y = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ä»‹äº<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">100</code><span>&nbsp;</span>ä¹‹é—´ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€èŒƒå›´ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">100</code><span>&nbsp;</span>çš„æ•´æ•°ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/cousins-in-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 993. äºŒå‰æ ‘çš„å ‚å…„å¼ŸèŠ‚ç‚¹</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯-4)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

éå†æ‰¾åˆ° xï¼Œy çš„æ·±åº¦å’Œçˆ¶èŠ‚ç‚¹ï¼Œå¯¹æ¯”å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç -4)

```python
class Solution:
    def __init__(self):
        self.parentX = None
        self.parentY = None
        self.depthX = 0
        self.depthY = 0
        self.x = 0
        self.y = 0

    def isCousins(self, root: TreeNode, x: int, y: int) -> bool:
        self.x = x
        self.y = y
        self.traverse(root, 0, None)
        if self.depthX == self.depthY and self.parentX != self.parentY:
            # åˆ¤æ–­ xï¼Œy æ˜¯å¦æ˜¯è¡¨å…„å¼ŸèŠ‚ç‚¹
            return True
        return False

    def traverse(self, root: TreeNode, depth: int, parent: TreeNode) -> None:
        if root is None:
            return
        if root.val == self.x:
            # æ‰¾åˆ° xï¼Œè®°å½•å®ƒçš„æ·±åº¦å’Œçˆ¶èŠ‚ç‚¹
            self.parentX = parent
            self.depthX = depth
        if root.val == self.y:
            # æ‰¾åˆ° yï¼Œè®°å½•å®ƒçš„æ·±åº¦å’Œçˆ¶èŠ‚ç‚¹
            self.parentY = parent
            self.depthY = depth
        self.traverse(root.left, depth + 1, root)
        self.traverse(root.right, depth + 1, root)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_cousins-in-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_cousins-in-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/cousins-in-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1315. ç¥–çˆ¶èŠ‚ç‚¹å€¼ä¸ºå¶æ•°çš„èŠ‚ç‚¹å’Œ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_sum-of-nodes-with-even-valued-grandparent)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1315. ç¥–çˆ¶èŠ‚ç‚¹å€¼ä¸ºå¶æ•°çš„èŠ‚ç‚¹å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/sum-of-nodes-with-even-valued-grandparent/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/sum-of-nodes-with-even-valued-grandparent/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ä¹‹å’Œï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>è¯¥èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹çš„å€¼ä¸ºå¶æ•°ã€‚ï¼ˆä¸€ä¸ªèŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹æ˜¯æŒ‡è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ï¼‰</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœä¸å­˜åœ¨ç¥–çˆ¶èŠ‚ç‚¹å€¼ä¸ºå¶æ•°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/01/10/1473_ex1.png" style="max-width: 100%; height: 214px; width: 350px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [6,7,8,2,7,1,3,9,null,1,4,null,null,null,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>18
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å›¾ä¸­çº¢è‰²èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹çš„å€¼ä¸ºå¶æ•°ï¼Œè“è‰²èŠ‚ç‚¹ä¸ºè¿™äº›çº¢è‰²èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">10^4</code>&nbsp;ä¹‹é—´ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">100</code><span>&nbsp;</span>ä¹‹é—´ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/sum-of-nodes-with-even-valued-grandparent/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1315. ç¥–çˆ¶èŠ‚ç‚¹å€¼ä¸ºå¶æ•°çš„èŠ‚ç‚¹å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯-5)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

å¾ˆç®€å•ï¼Œéå†ä¸€éäºŒå‰æ ‘ï¼Œå¯¹äºèŠ‚ç‚¹å€¼ä¸ºå¶æ•°çš„èŠ‚ç‚¹ï¼Œç´¯åŠ å®ƒçš„å­™å­èŠ‚ç‚¹çš„å€¼å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç -5)

```python
class Solution:
    def __init__(self):
        self.sum = 0

    def sumEvenGrandparent(self, root: TreeNode) -> int:
        self.traverse(root)
        return self.sum

    # äºŒå‰æ ‘çš„éå†å‡½æ•°
    def traverse(self, root: TreeNode):
        if root is None:
            return
        if root.val % 2 == 0:
            # ç´¯åŠ å·¦å­æ ‘å­™å­èŠ‚ç‚¹çš„å€¼
            if root.left is not None:
                if root.left.left is not None:
                    self.sum += root.left.left.val
                if root.left.right is not None:
                    self.sum += root.left.right.val

            # ç´¯åŠ å³å­æ ‘å­™å­èŠ‚ç‚¹çš„å€¼
            if root.right is not None:
                if root.right.left is not None:
                    self.sum += root.right.left.val
                if root.right.right is not None:
                    self.sum += root.right.right.val

        # äºŒå‰æ ‘çš„éå†æ¡†æ¶
        self.traverse(root.left)
        self.traverse(root.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_sum-of-nodes-with-even-valued-grandparent" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_sum-of-nodes-with-even-valued-grandparent" src="https://labuladong.online/algo-visualize/leetcode/sum-of-nodes-with-even-valued-grandparent/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1448. ç»Ÿè®¡äºŒå‰æ ‘ä¸­å¥½èŠ‚ç‚¹çš„æ•°ç›®](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#slug_count-good-nodes-in-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1448. ç»Ÿè®¡äºŒå‰æ ‘ä¸­å¥½èŠ‚ç‚¹çš„æ•°ç›®</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/count-good-nodes-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/count-good-nodes-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µæ ¹ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;çš„äºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›äºŒå‰æ ‘ä¸­å¥½èŠ‚ç‚¹çš„æ•°ç›®ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ã€Œå¥½èŠ‚ç‚¹ã€X å®šä¹‰ä¸ºï¼šä»æ ¹åˆ°è¯¥èŠ‚ç‚¹ X æ‰€ç»è¿‡çš„èŠ‚ç‚¹ä¸­ï¼Œæ²¡æœ‰ä»»ä½•èŠ‚ç‚¹çš„å€¼å¤§äº X çš„å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/05/16/test_sample_1.png" style="max-width: 100%; height: 156px; width: 263px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,1,4,3,null,1,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>4
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å›¾ä¸­è“è‰²èŠ‚ç‚¹ä¸ºå¥½èŠ‚ç‚¹ã€‚
æ ¹èŠ‚ç‚¹ (3) æ°¸è¿œæ˜¯ä¸ªå¥½èŠ‚ç‚¹ã€‚
èŠ‚ç‚¹ 4 -&gt; (3,4) æ˜¯è·¯å¾„ä¸­çš„æœ€å¤§å€¼ã€‚
èŠ‚ç‚¹ 5 -&gt; (3,4,5) æ˜¯è·¯å¾„ä¸­çš„æœ€å¤§å€¼ã€‚
èŠ‚ç‚¹ 3 -&gt; (3,1,3) æ˜¯è·¯å¾„ä¸­çš„æœ€å¤§å€¼ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/05/16/test_sample_2.png" style="max-width: 100%; height: 161px; width: 157px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,3,null,4,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>èŠ‚ç‚¹ 2 -&gt; (3, 3, 2) ä¸æ˜¯å¥½èŠ‚ç‚¹ï¼Œå› ä¸º "3" æ¯”å®ƒå¤§ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ ¹èŠ‚ç‚¹æ˜¯å¥½èŠ‚ç‚¹ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10^5]</code>&nbsp;ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹æƒå€¼çš„èŒƒå›´æ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[-10^4, 10^4]</code>&nbsp;ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/count-good-nodes-in-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1448. ç»Ÿè®¡äºŒå‰æ ‘ä¸­å¥½èŠ‚ç‚¹çš„æ•°ç›®</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#åŸºæœ¬æ€è·¯-6)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ï¼Œåˆ©ç”¨å‡½æ•°å‚æ•°ç»™å­æ ‘ä¼ é€’ä¿¡æ¯ã€‚

å‡½æ•°å‚æ•° `pathMax` è®°å½•ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹è·¯å¾„ä¸­çš„æœ€å¤§å€¼ï¼Œé€šè¿‡æ¯”è¾ƒ `root.val` å’Œ `pathMax` æ¯”è¾ƒå°±å¯åˆ¤æ–­ `root` èŠ‚ç‚¹æ˜¯ä¸æ˜¯ã€Œå¥½èŠ‚ç‚¹ã€ã€‚ç„¶åå†æŠŠ `pathMax` ä¼ é€’åˆ°å­æ ‘ä¸­ç»§ç»­åˆ¤æ–­å…¶ä»–èŠ‚ç‚¹ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#è§£æ³•ä»£ç -6)

```python
class Solution:
    def __init__(self):
        self.count = 0

    def goodNodes(self, root: TreeNode) -> int:
        self.traverse(root, root.val)
        return self.count

    # äºŒå‰æ ‘éå†å‡½æ•°ï¼ŒpathMax å‚æ•°è®°å½•ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹è·¯å¾„ä¸­çš„æœ€å¤§å€¼
    def traverse(self, root: TreeNode, pathMax: int):
        if root is None:
            return
        if pathMax <= root.val:
            # æ‰¾åˆ°ä¸€ä¸ªã€Œå¥½èŠ‚ç‚¹ã€
            self.count += 1
        # æ›´æ–°è·¯å¾„ä¸Šçš„æœ€å¤§å€¼
        pathMax = max(pathMax, root.val)

        self.traverse(root.left, pathMax)
        self.traverse(root.right, pathMax)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-ii/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_count-good-nodes-in-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_count-good-nodes-in-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/count-good-nodes-in-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>



## [437. è·¯å¾„æ€»å’Œ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_path-sum-iii)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">437. è·¯å¾„æ€»å’Œ III</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/path-sum-iii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/path-sum-iii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œå’Œä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">targetSum</code><span>&nbsp;</span>ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">targetSum</code><span>&nbsp;</span>çš„<span>&nbsp;</span><strong style="font-weight: 600;">è·¯å¾„</strong><span>&nbsp;</span>çš„æ•°ç›®ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">è·¯å¾„</strong><span>&nbsp;</span>ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/04/09/pathsum3-1-tree.jpg" style="max-width: 100%; width: 452px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [10,5,-3,3,2,null,11,3,-2,null,1], targetSum = 8
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å’Œç­‰äº 8 çš„è·¯å¾„æœ‰ 3 æ¡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0,1000]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>9</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 10<sup>9</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= targetSum &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/path-sum-iii/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 437. è·¯å¾„æ€»å’Œ III</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼ã€‚

è¿™é¢˜çš„éš¾åº¦åº”è¯¥è®¾ç½®ä¸ºå›°éš¾ï¼Œå› ä¸ºè¿™é¢˜åŠè¦æ±‚ä½ å‡†ç¡®ç†è§£äºŒå‰æ ‘çš„å‰åºååºéå†ï¼Œè¿˜è¦ç†Ÿæ‚‰å‰ç¼€å’ŒæŠ€å·§ï¼ŒæŠŠå‰ç¼€å’ŒæŠ€å·§ç”¨åˆ°äºŒå‰æ ‘ä¸Šã€‚

ä½ å¯ä»¥å…ˆçœ‹å‰æ–‡ [å‰ç¼€å’ŒæŠ€å·§](https://labuladong.online/algo/data-structure/prefix-sum/)ï¼Œç„¶ååšä¸€ä¸‹ [560. å’Œä¸ºKçš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k)ï¼Œåº”è¯¥èƒ½å¤Ÿç†è§£è¿™é“é¢˜çš„æ€è·¯äº†ã€‚

ä½ æŠŠäºŒå‰æ ‘çœ‹åšæ˜¯æ•°ç»„ï¼Œåˆ©ç”¨å‰ååºéå†æ¥ç»´æŠ¤å‰ç¼€å’Œï¼Œçœ‹ä¸‹å›¾å°±èƒ½ç†è§£è§£æ³•ä¸­å‡ ä¸ªå…³é”®å˜é‡çš„å…³ç³»äº†ï¼š

![img](437.jpeg)

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç )

```python
class Solution:
    # è®°å½•å‰ç¼€å’Œ
    # å®šä¹‰ï¼šä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum çš„è·¯å¾„æœ‰ preSumCount.get(pathSum) ä¸ª
    def __init__(self):
        self.preSumCount = {}
        self.path_sum = 0
        self.target_sum = 0
        self.res = 0

    def pathSum(self, root: TreeNode, targetSum: int) -> int:
        if root is None:
            return 0
        self.path_sum = 0
        self.target_sum = targetSum
        self.preSumCount[0] = 1
        self.traverse(root)
        return self.res

    def traverse(self, root: TreeNode):
        if root is None:
            return
        # å‰åºéå†ä½ç½®
        self.path_sum += root.val
        # ä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum - targetSum çš„è·¯å¾„æ¡æ•°
        # å°±æ˜¯è·¯å¾„å’Œä¸º targetSum çš„è·¯å¾„æ¡æ•°
        self.res += self.preSumCount.get(self.path_sum - self.target_sum, 0)
        # è®°å½•ä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum çš„è·¯å¾„æ¡æ•°
        self.preSumCount[self.path_sum] = self.preSumCount.get(self.path_sum, 0) + 1

        self.traverse(root.left)
        self.traverse(root.right)

        # ååºéå†ä½ç½®
        self.preSumCount[self.path_sum] = self.preSumCount.get(self.path_sum) - 1
        self.path_sum -= root.val
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_path-sum-iii" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_path-sum-iii" src="https://labuladong.online/algo-visualize/leetcode/path-sum-iii/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 050. å‘ä¸‹çš„è·¯å¾„èŠ‚ç‚¹ä¹‹å’Œ ğŸŸ ](https://leetcode.cn/problems/6eUYwP)

## [513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_find-bottom-left-tree-value)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/find-bottom-left-tree-value/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/find-bottom-left-tree-value/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">æ ¹èŠ‚ç‚¹</strong><span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€åº•å±‚ æœ€å·¦è¾¹<span>&nbsp;</span></strong>èŠ‚ç‚¹çš„å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2020/12/14/tree1.jpg" style="max-width: 100%; width: 182px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>root = [2,1,3]
<strong style="font-weight: 600;">è¾“å‡º: </strong>1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2020/12/14/tree2.jpg" style="max-width: 100%; width: 242px;"><strong style="font-weight: 600;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>[1,2,3,4,null,5,6,null,null,7]
<strong style="font-weight: 600;">è¾“å‡º: </strong>7
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1,10<sup>4</sup>]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-2<sup>31</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 2<sup>31</sup><span>&nbsp;</span>- 1</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/find-bottom-left-tree-value/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

äºŒå‰æ ‘é€’å½’æ¡†æ¶ä»£ç æ˜¯å…ˆé€’å½’å·¦å­æ ‘ï¼Œåé€’å½’å³å­æ ‘ï¼Œæ‰€ä»¥åˆ°æœ€å¤§æ·±åº¦æ—¶ç¬¬ä¸€æ¬¡é‡åˆ°çš„èŠ‚ç‚¹å°±æ˜¯å·¦ä¸‹è§’çš„èŠ‚ç‚¹ã€‚

å½“ç„¶ï¼Œè¿™é¢˜ä¹Ÿå¯ä»¥ç”¨ BFS å±‚åºéå†æ¥åšï¼Œç•™ç»™ä½ æ€è€ƒå§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def __init__(self):
        # è®°å½•äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦
        self.maxDepth = 0
        # è®°å½• traverse é€’å½’éå†åˆ°çš„æ·±åº¦
        self.depth = 0
        self.res = None

    def findBottomLeftValue(self, root: TreeNode) -> int:
        self.traverse(root)
        return self.res.val

    def traverse(self, root: TreeNode):
        if root is None:
            return
        # å‰åºéå†ä½ç½®
        self.depth += 1
        if self.depth > self.maxDepth:
            # åˆ°æœ€å¤§æ·±åº¦æ—¶ç¬¬ä¸€æ¬¡é‡åˆ°çš„èŠ‚ç‚¹å°±æ˜¯å·¦ä¸‹è§’çš„èŠ‚ç‚¹
            self.maxDepth = self.depth
            self.res = root
        self.traverse(root.left)
        self.traverse(root.right)
        # ååºéå†ä½ç½®
        self.depth -= 1
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_find-bottom-left-tree-value" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_find-bottom-left-tree-value" src="https://labuladong.online/algo-visualize/leetcode/find-bottom-left-tree-value/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 045. äºŒå‰æ ‘æœ€åº•å±‚æœ€å·¦è¾¹çš„å€¼ ğŸŸ ](https://leetcode.cn/problems/LwUNpT)

## [1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_find-elements-in-a-contaminated-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ </strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/find-elements-in-a-contaminated-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/find-elements-in-a-contaminated-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å‡ºä¸€ä¸ªæ»¡è¶³ä¸‹è¿°è§„åˆ™çš„äºŒå‰æ ‘ï¼š</p><ol style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root.val == 0</code></li><li>å¦‚æœ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.val == x</code><span>&nbsp;</span>ä¸”&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.left != null</code>ï¼Œé‚£ä¹ˆ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.left.val == 2 * x + 1</code></li><li>å¦‚æœ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.val == x</code><span>&nbsp;</span>ä¸”<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.right != null</code>ï¼Œé‚£ä¹ˆ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.right.val == 2 * x + 2</code></li></ol><p style="line-height: 1.6; overflow-wrap: break-word;">ç°åœ¨è¿™ä¸ªäºŒå‰æ ‘å—åˆ°ã€Œæ±¡æŸ“ã€ï¼Œæ‰€æœ‰çš„&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">treeNode.val</code>&nbsp;éƒ½å˜æˆäº†&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ å…ˆè¿˜åŸäºŒå‰æ ‘ï¼Œç„¶åå®ç°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">FindElements</code>&nbsp;ç±»ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">FindElements(TreeNode* root)</code>&nbsp;ç”¨å—æ±¡æŸ“çš„äºŒå‰æ ‘åˆå§‹åŒ–å¯¹è±¡ï¼Œä½ éœ€è¦å…ˆæŠŠå®ƒè¿˜åŸã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">bool find(int target)</code>&nbsp;åˆ¤æ–­ç›®æ ‡å€¼&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;æ˜¯å¦å­˜åœ¨äºè¿˜åŸåçš„äºŒå‰æ ‘ä¸­å¹¶è¿”å›ç»“æœã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/11/16/untitled-diagram-4-1.jpg" style="max-width: 100%; height: 119px; width: 320px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>
["FindElements","find","find"]
[[[-1,null,-1]],[1],[2]]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>
[null,false,true]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
FindElements findElements = new FindElements([-1,null,-1]); 
findElements.find(1); // return False 
findElements.find(2); // return True </pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/11/16/untitled-diagram-4.jpg" style="max-width: 100%; height: 198px; width: 400px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>
["FindElements","find","find","find"]
[[[-1,-1,-1,-1,-1]],[1],[3],[5]]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>
[null,true,true,false]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
FindElements findElements = new FindElements([-1,-1,-1,-1,-1]);
findElements.find(1); // return True
findElements.find(3); // return True
findElements.find(5); // return False</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/11/16/untitled-diagram-4-1-1.jpg" style="max-width: 100%; height: 274px; width: 306px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>
["FindElements","find","find","find","find"]
[[[-1,null,-1,-1,null,-1]],[2],[3],[4],[5]]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>
[null,true,false,false,true]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
FindElements findElements = new FindElements([-1,null,-1,-1,null,-1]);
findElements.find(2); // return True
findElements.find(3); // return False
findElements.find(4); // return False
findElements.find(5); // return True
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">TreeNode.val == -1</code></li><li>äºŒå‰æ ‘çš„é«˜åº¦ä¸è¶…è¿‡&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">20</code></li><li>èŠ‚ç‚¹çš„æ€»æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1,&nbsp;10^4]</code>&nbsp;ä¹‹é—´</li><li>è°ƒç”¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">find()</code>&nbsp;çš„æ€»æ¬¡æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1,&nbsp;10^4]</code>&nbsp;ä¹‹é—´</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= target &lt;= 10^6</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/find-elements-in-a-contaminated-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ </a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-2)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

è¿˜åŸäºŒå‰æ ‘çš„æ—¶å€™åªéœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œé€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼›ç”±äºèŠ‚ç‚¹çš„ä¸ªæ•°è§„æ¨¡ä¸ç®—å¤§ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ª HashSet ç¼“å­˜æ‰€æœ‰èŠ‚ç‚¹å€¼ï¼Œå®ç° `find` å‡½æ•°çš„åŠŸèƒ½ã€‚

å½“ç„¶ï¼Œé¢˜ç›®ç»™çš„è¿™ç§äºŒå‰æ ‘èŠ‚ç‚¹çš„å–å€¼è§„å¾‹éå¸¸åƒç”¨æ•°ç»„å­˜å‚¨å®Œå…¨äºŒå‰æ ‘çš„åœºæ™¯ï¼Œæ‰€ä»¥ä½ åº”è¯¥å¯ä»¥é€šè¿‡ `target` æ¨ç®—å‡ºæ¥å®ƒåœ¨ç¬¬å‡ å±‚çš„ä»€ä¹ˆä½ç½®ï¼Œä¸è¿‡æˆ‘è¿™é‡Œå°±ä¸å®ç°äº†ï¼Œç±»ä¼¼çš„é¢˜ç›®ä½ å¯ä»¥å‚è€ƒ [1104. äºŒå‰æ ‘å¯»è·¯](https://leetcode.cn/problems/path-in-zigzag-labelled-binary-tree) å’Œ [662. äºŒå‰æ ‘æœ€å¤§å®½åº¦](https://leetcode.cn/problems/maximum-width-of-binary-tree)ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -2)

```python
class FindElements:
    # å¸®åŠ© find å‡½æ•°å¿«é€Ÿåˆ¤æ–­
    def __init__(self, root):
        # è¿˜åŸäºŒå‰æ ‘ä¸­çš„å€¼
        self.values = set()
        self.traverse(root, 0)

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root, val):
        if root is None:
            return
        root.val = val
        self.values.add(val)

        self.traverse(root.left, 2 * val + 1)
        self.traverse(root.right, 2 * val + 2)

    def find(self, target):
        return target in self.values
```

## [386. å­—å…¸åºæ’æ•°](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_lexicographical-numbers)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">386. å­—å…¸åºæ’æ•°</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/lexicographical-numbers/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/lexicographical-numbers/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ï¼ŒæŒ‰å­—å…¸åºè¿”å›èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, n]</code><span>&nbsp;</span>å†…æ‰€æœ‰æ•´æ•°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">O(n)</code><span>&nbsp;</span>ä¸”ä½¿ç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">O(1)</code><span>&nbsp;</span>é¢å¤–ç©ºé—´çš„ç®—æ³•ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 13
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,10,11,12,13,2,3,4,5,6,7,8,9]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 2
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,2]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 5 * 10<sup>4</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/lexicographical-numbers/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 386. å­—å…¸åºæ’æ•°</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-3)

è¿™ä¸ªé¢˜è¿˜æŒºæœ‰æ„æ€ï¼Œè¦ä¸æ˜¯å®ƒæŠŠè¿™é“é¢˜æ”¾åœ¨ DFS çš„é¢˜ç›®åˆ†ç±»é‡Œé¢ï¼Œå¯èƒ½è¿˜ä¸å¤ªå¥½å‘ç°è¿™æ˜¯ä¸€ä¸ª DFS çš„é¢˜ç›®ã€‚

æ—¢ç„¶é¢˜ç›®æç¤ºä½ è¿™æ˜¯ä¸ª DFS çš„é¢˜ç›®äº†ï¼Œä½ å¿ƒé‡Œé‚£æ£µé€’å½’æ ‘å‡ºæ¥æ²¡æœ‰ï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œå»ºè®®å»çœ‹çœ‹å‰æ–‡ [äºŒå‰æ ‘è§†è§’å­¦ä¹ é€’å½’æ€ç»´](https://labuladong.online/algo/essential-technique/binary-tree-summary/)ã€‚

å®ƒçš„é€’å½’æ ‘å¤§æ¦‚æ˜¯è¿™æ ·ç”Ÿé•¿çš„ï¼š

é¦–å…ˆçœ‹ 1 è¿™ä¸ªèŠ‚ç‚¹ï¼Œ1 å¯ä»¥ç”Ÿå‡ºäºŒä½æ•° 10, 11, 12...

å…¶ä¸­ 10 åˆå¯ä»¥ç”Ÿå‡º 100, 101, 102...ï¼Œ11 åˆå¯ä»¥ç”Ÿå‡º 110, 111, 112...

è¿™æ£µå¤šå‰æ ‘æ˜¯ä¸æ˜¯å°±å‡ºæ¥äº†ï¼Ÿæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå¯ä»¥ç”Ÿå‡º 10 ä¸ªèŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªåå‰æ ‘ã€‚

è¿˜æ˜¯æƒ³ä¸å‡ºæ¥ï¼Ÿçœ‹å¯è§†åŒ–é¢æ¿ã€‚å®é™…çš„è§£æ³•ä»£ç éœ€è¦ä»¥ 1~9 åˆ†åˆ«ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œç”» 9 æ£µå¤šå‰æ ‘ï¼Œ**è¿™é‡Œä»…ä»…ä»¥ 1 ä¸ºæ ¹èŠ‚ç‚¹ç”»é€’å½’æ ‘ï¼Œæ–¹ä¾¿ä½ ç†è§£**ï¼š

<details data-v-ee1a9bd0="" id="div_lexicographical-numbers-example" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_lexicographical-numbers-example" src="https://labuladong.online/algo-visualize/tutorial/lexicographical-numbers-example/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

æˆ‘ä»¬åªéœ€è¦ä»¥å‰åºé¡ºåºéå†è¿™æ£µå¤šå‰æ ‘ï¼Œæ”¶é›†æ‰€æœ‰å°äº `n` çš„èŠ‚ç‚¹ï¼Œå°±å¯ä»¥å¾—åˆ°é¢˜ç›®æƒ³è¦çš„ç­”æ¡ˆã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -3)

```python
class Solution:

    def __init__(self):
        self.res = []

    def lexicalOrder(self, n: int) -> List[int]:
        # æ€»å…±æœ‰ 9 æ£µå¤šå‰æ ‘ï¼Œä» 1 å¼€å§‹
        for i in range(1, 10):
            self.traverse(i, n)
        return self.res

    # å¤šå‰æ ‘éå†æ¡†æ¶ï¼Œå‰åºä½ç½®æ”¶é›†æ‰€æœ‰å°äº n çš„èŠ‚ç‚¹
    def traverse(self, root: int, n: int) -> None:
        if root > n:
            return
        self.res.append(root)
        for child in range(root * 10, root * 10 + 10):
            if child > n:
                break
            self.traverse(child, n)
```

## [1104. äºŒå‰æ ‘å¯»è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_path-in-zigzag-labelled-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1104. äºŒå‰æ ‘å¯»è·¯</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/path-in-zigzag-labelled-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/path-in-zigzag-labelled-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">åœ¨ä¸€æ£µæ— é™çš„äºŒå‰æ ‘ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæ ‘ä¸­çš„èŠ‚ç‚¹<span>&nbsp;</span><strong style="font-weight: 600;">é€è¡Œ</strong><span>&nbsp;</span>ä¾æ¬¡æŒ‰&nbsp;â€œä¹‹â€ å­—å½¢è¿›è¡Œæ ‡è®°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å¥‡æ•°è¡Œï¼ˆå³ï¼Œç¬¬ä¸€è¡Œã€ç¬¬ä¸‰è¡Œã€ç¬¬äº”è¡Œâ€¦â€¦ï¼‰ä¸­ï¼ŒæŒ‰ä»å·¦åˆ°å³çš„é¡ºåºè¿›è¡Œæ ‡è®°ï¼›</p><p style="line-height: 1.6; overflow-wrap: break-word;">è€Œå¶æ•°è¡Œï¼ˆå³ï¼Œç¬¬äºŒè¡Œã€ç¬¬å››è¡Œã€ç¬¬å…­è¡Œâ€¦â€¦ï¼‰ä¸­ï¼ŒæŒ‰ä»å³åˆ°å·¦çš„é¡ºåºè¿›è¡Œæ ‡è®°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/06/28/tree.png" style="max-width: 100%; height: 138px; width: 300px;"></p><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ æ ‘ä¸ŠæŸä¸€ä¸ªèŠ‚ç‚¹çš„æ ‡å·<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">label</code>ï¼Œè¯·ä½ è¿”å›ä»æ ¹èŠ‚ç‚¹åˆ°è¯¥æ ‡å·ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">label</code><span>&nbsp;</span>èŠ‚ç‚¹çš„è·¯å¾„ï¼Œè¯¥è·¯å¾„æ˜¯ç”±é€”ç»çš„èŠ‚ç‚¹æ ‡å·æ‰€ç»„æˆçš„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>label = 14
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,3,4,14]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>label = 26
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,2,6,10,26]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= label &lt;= 10^6</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/path-in-zigzag-labelled-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1104. äºŒå‰æ ‘å¯»è·¯</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-4)

å¦‚æœä½ çœ‹è¿‡å‰æ–‡ [äºŒå‰å †ï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰åŸç†åŠå®ç°](https://labuladong.online/algo/data-structure-basic/binary-heap-basic/)ï¼Œå°±çŸ¥é“è¿™ç§å®Œå…¨äºŒå‰æ ‘å¯ä»¥é€šè¿‡ç´¢å¼•æ¥æ¨¡æ‹Ÿå·¦å³æŒ‡é’ˆä»¥åŠçˆ¶èŠ‚ç‚¹æŒ‡é’ˆã€‚

å…·ä½“æ¥è¯´ï¼Œå…ˆå‡è®¾å…¨éƒ½æ˜¯ä»å·¦åˆ°å³æ’åˆ—ï¼Œæ²¡æœ‰ä¹‹å­—å½¢æ’åˆ—çš„è¿™ä¸ªæ¡ä»¶ï¼š

![img](1104.png)

å¦‚æœæˆ‘æƒ³æ±‚åˆ°è¾¾æŸä¸€ä¸ª `label` èŠ‚ç‚¹çš„è·¯å¾„ï¼Œé‚£ä¹ˆæˆ‘ä¸€ç›´å¯¹ `label` é™¤ä»¥ 2 å°±è¡Œäº†ï¼ˆå¿½ç•¥ä½™æ•°ï¼‰ã€‚

ä½ æ¯”å¦‚æˆ‘æƒ³æ±‚åˆ°è¾¾ 13 çš„è·¯å¾„ï¼Œå°±æ˜¯ 13, 6, 3, 1ï¼Œç„¶ååè½¬ä¸€ä¸‹å°±è¡Œäº†ã€‚å¤§è‡´çš„ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š

```java
ArrayList<Integer> path = new ArrayList<>();
while (label >= 1) {
    path.add(label);
    label = label / 2;
}
// åè½¬æˆä»æ ¹èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„è·¯å¾„
Collections.reverse(path);
```

ç°åœ¨è™½ç„¶æ˜¯ä¹‹å­—å½¢æ’åˆ—ï¼Œä½†ç¨åŠ ä¿®æ”¹å°±å¯ä»¥é€‚åº”è¿™ä¸ªå˜åŒ–ï¼š

![img](tree.png)

13 çš„çˆ¶èŠ‚ç‚¹ä¸æ˜¯ 6 äº†ï¼Œè€Œæ˜¯ 7 - (6 - 4) = 5ã€‚

è¿™ä¸ª 7 å’Œ 4 æ˜¯å“ªé‡Œæ¥çš„ï¼Ÿå°±æ˜¯ 6 è¿™ä¸€è¡Œçš„æœ€å°èŠ‚ç‚¹å€¼å’Œæœ€å¤§èŠ‚ç‚¹å€¼ï¼Œè€Œå¯¹äºå®Œå…¨äºŒå‰æ ‘ï¼Œæ¯ä¸€è¡Œçš„æœ€å¤§æœ€å°å€¼å¯ä»¥é€šè¿‡è®¡ç®— 2 çš„æŒ‡æ•°ç®—å‡ºæ¥çš„ã€‚

ç†è§£äº†ä¸Šè¿°æ€è·¯ï¼Œå°±èƒ½çœ‹æ‡‚è§£æ³•ä»£ç äº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -4)

```python
import math
from typing import List

class Solution:
    def pathInZigZagTree(self, label: int) -> List[int]:
        path = []
        while label >= 1:
            path.append(label)
            label = label // 2

            if label == 0:
                break

            depth = self.log(label)
            range_ = self.getLevelRange(depth)
            # ç”±äºä¹‹å­—å½¢åˆ†å¸ƒï¼Œæ ¹æ®ä¸Šå±‚çš„èŠ‚ç‚¹å–å€¼èŒƒå›´ï¼Œä¿®æ­£çˆ¶èŠ‚ç‚¹
            label = range_[1] - (label - range_[0])
        
        # åè½¬æˆä»æ ¹èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„è·¯å¾„
        path.reverse()
        return path

    # è·å–ç¬¬ n å±‚èŠ‚ç‚¹çš„å–å€¼èŒƒå›´
    def getLevelRange(self, n: int) -> List[int]:
        p = 2 ** n
        return [p, 2 * p - 1]

    def log(self, x: int) -> int:
        if x == 0:
            return 0
        return int(math.log(x) / math.log(2))
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_path-in-zigzag-labelled-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_path-in-zigzag-labelled-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/path-in-zigzag-labelled-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´  ğŸŸ ](https://leetcode.cn/problems/find-elements-in-a-contaminated-binary-tree)
- [662. äºŒå‰æ ‘æœ€å¤§å®½åº¦ ğŸŸ ](https://leetcode.cn/problems/maximum-width-of-binary-tree)
- [666. è·¯å¾„æ€»å’Œ IV ğŸŸ ](https://leetcode.cn/problems/path-sum-iv)

## [1145. äºŒå‰æ ‘ç€è‰²æ¸¸æˆ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_binary-tree-coloring-game)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1145. äºŒå‰æ ‘ç€è‰²æ¸¸æˆ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-coloring-game/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-coloring-game/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">æœ‰ä¸¤ä½æå®¢ç©å®¶å‚ä¸äº†ä¸€åœºã€ŒäºŒå‰æ ‘ç€è‰²ã€çš„æ¸¸æˆã€‚æ¸¸æˆä¸­ï¼Œç»™å‡ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼Œæ ‘ä¸Šæ€»å…±æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªèŠ‚ç‚¹ï¼Œä¸”<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ºå¥‡æ•°ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„å€¼ä»&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code>&nbsp;å„ä¸ç›¸åŒã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æœ€å¼€å§‹æ—¶ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ã€Œä¸€å·ã€ç©å®¶ä»<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, n]</code>&nbsp;ä¸­å–ä¸€ä¸ªå€¼&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">x</code>ï¼ˆ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= x &lt;= n</code>ï¼‰ï¼›</li><li>ã€ŒäºŒå·ã€ç©å®¶ä¹Ÿä»&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, n]</code>&nbsp;ä¸­å–ä¸€ä¸ªå€¼&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">y</code>ï¼ˆ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= y &lt;= n</code>ï¼‰ä¸”&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">y != x</code>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">ã€Œä¸€å·ã€ç©å®¶ç»™å€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">x</code>&nbsp;çš„èŠ‚ç‚¹æŸ“ä¸Šçº¢è‰²ï¼Œè€Œã€ŒäºŒå·ã€ç©å®¶ç»™å€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">y</code>&nbsp;çš„èŠ‚ç‚¹æŸ“ä¸Šè“è‰²ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¹‹åä¸¤ä½ç©å®¶è½®æµè¿›è¡Œæ“ä½œï¼Œã€Œä¸€å·ã€ç©å®¶å…ˆæ‰‹ã€‚æ¯ä¸€å›åˆï¼Œç©å®¶é€‰æ‹©ä¸€ä¸ªè¢«ä»–æŸ“è¿‡è‰²çš„èŠ‚ç‚¹ï¼Œå°†æ‰€é€‰èŠ‚ç‚¹ä¸€ä¸ª<span>&nbsp;</span><strong style="font-weight: 600;">æœªç€è‰²<span>&nbsp;</span></strong>çš„é‚»èŠ‚ç‚¹ï¼ˆå³å·¦å³å­èŠ‚ç‚¹ã€æˆ–çˆ¶èŠ‚ç‚¹ï¼‰è¿›è¡ŒæŸ“è‰²ï¼ˆã€Œä¸€å·ã€ç©å®¶æŸ“çº¢è‰²ï¼Œã€ŒäºŒå·ã€ç©å®¶æŸ“è“è‰²ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœï¼ˆä¸”ä»…åœ¨æ­¤ç§æƒ…å†µä¸‹ï¼‰å½“å‰ç©å®¶æ— æ³•æ‰¾åˆ°è¿™æ ·çš„èŠ‚ç‚¹æ¥æŸ“è‰²æ—¶ï¼Œå…¶å›åˆå°±ä¼šè¢«è·³è¿‡ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è‹¥ä¸¤ä¸ªç©å®¶éƒ½æ²¡æœ‰å¯ä»¥æŸ“è‰²çš„èŠ‚ç‚¹æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚ç€è‰²èŠ‚ç‚¹æœ€å¤šçš„é‚£ä½ç©å®¶è·å¾—èƒœåˆ© âœŒï¸ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç°åœ¨ï¼Œå‡è®¾ä½ æ˜¯ã€ŒäºŒå·ã€ç©å®¶ï¼Œæ ¹æ®æ‰€ç»™å‡ºçš„è¾“å…¥ï¼Œå‡å¦‚å­˜åœ¨ä¸€ä¸ª&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">y</code>&nbsp;å€¼å¯ä»¥ç¡®ä¿ä½ èµ¢å¾—è¿™åœºæ¸¸æˆï¼Œåˆ™è¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ï¼›è‹¥æ— æ³•è·èƒœï¼Œå°±è¯·è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</p>&nbsp;<p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 1 ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/08/01/1480-binary-tree-coloring-game.png" style="max-width: 100%; width: 500px; height: 310px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,6,7,8,9,10,11], n = 11, x = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç¬¬äºŒä¸ªç©å®¶å¯ä»¥é€‰æ‹©å€¼ä¸º 2 çš„èŠ‚ç‚¹ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 2 ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3], n = 3, x = 1
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= x &lt;= n &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>æ˜¯å¥‡æ•°</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= n</code></li><li>æ ‘ä¸­æ‰€æœ‰å€¼<span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-coloring-game/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1145. äºŒå‰æ ‘ç€è‰²æ¸¸æˆ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-5)

è¿™é“é¢˜çš„å…³é”®æ˜¯è¦è§‚å¯Ÿè§„å¾‹ï¼Œæ ¹æ®æ¸¸æˆè§„åˆ™ï¼Œå¯¹æ–¹å…ˆé€‰ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åï¼Œä½ çš„æœ€ä¼˜ç­–ç•¥å°±æ˜¯ç´§è´´ç€å¯¹æ–¹çš„é‚£ä¸ªèŠ‚ç‚¹é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åº”è¯¥é€‰æ‹©èŠ‚ç‚¹ `x` çš„å·¦å³å­èŠ‚ç‚¹æˆ–è€…çˆ¶èŠ‚ç‚¹ã€‚

åšå‡ºä»¥ä¸Šä¸‰ç§é€‰æ‹©ï¼Œä½ å¯ä»¥å æ®äºŒå‰æ ‘çš„ä¸åŒéƒ¨åˆ†ï¼Œå¦‚ä¸‹å›¾ï¼š

![img](1145.png)

ä½ å¦‚æœæƒ³èµ¢ï¼Œå¿…é¡»å æ®è¶…è¿‡ `n / 2` çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¿™ä¸‰ä¸ªè“è‰²åŒºåŸŸä¸­èŠ‚ç‚¹æ•°æœ€å¤šçš„é‚£ä¸ªåŒºåŸŸä¸­çš„èŠ‚ç‚¹ä¸ªæ•°å¤§äº `n / 2`ï¼Œä½ èƒ½èµ¢ï¼Œå¦åˆ™ä½ å°±è¾“ã€‚

æ‰€ä»¥æœ¬é¢˜è½¬åŒ–ä¸ºè®¡ç®—äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°çš„ç®€å•é—®é¢˜ï¼Œå…·ä½“çœ‹ä»£ç é€»è¾‘ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -5)

```python
class Solution:
    def btreeGameWinningMove(self, root: TreeNode, n: int, x: int) -> bool:
        node = self.find(root, x)
        left_count = self.count(node.left)
        right_count = self.count(node.right)
        other_count = n - 1 - left_count - right_count

        return max(left_count, max(right_count, other_count)) > n // 2

    # å®šä¹‰ï¼šåœ¨ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­æœç´¢å€¼ä¸º x çš„èŠ‚ç‚¹å¹¶è¿”å›
    def find(self, root: TreeNode, x: int) -> TreeNode:
        if root is None:
            return None
        if root.val == x:
            return root
        # å»å·¦å­æ ‘æ‰¾
        left = self.find(root.left, x)
        if left is not None:
            return left
        # å·¦å­æ ‘æ‰¾ä¸åˆ°çš„è¯å»å³å­æ ‘æ‰¾
        return self.find(root.right, x)

    # å®šä¹‰ï¼šè®¡ç®—ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘çš„èŠ‚ç‚¹æ€»æ•°
    def count(self, root: TreeNode) -> int:
        if root is None:
            return 0
        return 1 + self.count(root.left) + self.count(root.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_binary-tree-coloring-game" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-coloring-game" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-coloring-game/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [2096. ä»äºŒå‰æ ‘ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹æ¯ä¸€æ­¥çš„æ–¹å‘](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_step-by-step-directions-from-a-binary-tree-node-to-another)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">2096. ä»äºŒå‰æ ‘ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹æ¯ä¸€æ­¥çš„æ–¹å‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/step-by-step-directions-from-a-binary-tree-node-to-another/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/step-by-step-directions-from-a-binary-tree-node-to-another/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µ<span>&nbsp;</span><strong style="font-weight: 600;">äºŒå‰æ ‘</strong>&nbsp;çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ï¼Œè¿™æ£µäºŒå‰æ ‘æ€»å…±æœ‰&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code>&nbsp;ä¸ªèŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code>&nbsp;ä¸­çš„ä¸€ä¸ªæ•´æ•°ï¼Œä¸”äº’ä¸ç›¸åŒã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">startValue</code>&nbsp;ï¼Œè¡¨ç¤ºèµ·ç‚¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">s</code>&nbsp;çš„å€¼ï¼Œå’Œå¦ä¸€ä¸ªä¸åŒçš„æ•´æ•°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">destValue</code>&nbsp;ï¼Œè¡¨ç¤ºç»ˆç‚¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code>&nbsp;çš„å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·æ‰¾åˆ°ä»èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">s</code>&nbsp;åˆ°èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code>&nbsp;çš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€çŸ­è·¯å¾„</strong>&nbsp;ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›æ¯ä¸€æ­¥çš„æ–¹å‘ã€‚æ¯ä¸€æ­¥ç”¨<span>&nbsp;</span><strong style="font-weight: 600;">å¤§å†™</strong>&nbsp;å­—æ¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'L'</code>&nbsp;ï¼Œ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'R'</code>&nbsp;å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'U'</code>&nbsp;åˆ†åˆ«è¡¨ç¤ºä¸€ç§æ–¹å‘ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'L'</code>&nbsp;è¡¨ç¤ºä»ä¸€ä¸ªèŠ‚ç‚¹å‰å¾€å®ƒçš„<span>&nbsp;</span><strong style="font-weight: 600;">å·¦å­©å­</strong>&nbsp;èŠ‚ç‚¹ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'R'</code>&nbsp;è¡¨ç¤ºä»ä¸€ä¸ªèŠ‚ç‚¹å‰å¾€å®ƒçš„<span>&nbsp;</span><strong style="font-weight: 600;">å³å­©å­</strong>&nbsp;èŠ‚ç‚¹ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'U'</code>&nbsp;è¡¨ç¤ºä»ä¸€ä¸ªèŠ‚ç‚¹å‰å¾€å®ƒçš„<span>&nbsp;</span><strong style="font-weight: 600;">çˆ¶</strong>&nbsp;èŠ‚ç‚¹ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ è¿”å›ä»<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">s</code>&nbsp;åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">t</code>&nbsp;<strong style="font-weight: 600;">æœ€çŸ­è·¯å¾„</strong>&nbsp;æ¯ä¸€æ­¥çš„æ–¹å‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/11/15/eg1.png" style="max-width: 100%; width: 214px; height: 163px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><b>è¾“å…¥ï¼š</b>root = [5,1,2,3,null,6,4], startValue = 3, destValue = 6
<b>è¾“å‡ºï¼š</b>"UURL"
<b>è§£é‡Šï¼š</b>æœ€çŸ­è·¯å¾„ä¸ºï¼š3 â†’ 1 â†’ 5 â†’ 2 â†’ 6 ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/11/15/eg2.png" style="max-width: 100%; width: 74px; height: 102px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><b>è¾“å…¥ï¼š</b>root = [2,1], startValue = 2, destValue = 1
<b>è¾“å‡ºï¼š</b>"L"
<b>è§£é‡Šï¼š</b>æœ€çŸ­è·¯å¾„ä¸ºï¼š2 â†’ 1 ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code>&nbsp;ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2 &lt;= n &lt;= 10<sup>5</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= n</code></li><li>æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å€¼<span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong>&nbsp;ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= startValue, destValue &lt;= n</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">startValue != destValue</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/step-by-step-directions-from-a-binary-tree-node-to-another/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 2096. ä»äºŒå‰æ ‘ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹æ¯ä¸€æ­¥çš„æ–¹å‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-6)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼ã€‚

è¿™é¢˜çš„æ€è·¯æ¯”è¾ƒå·§å¦™ï¼Œä¸»è¦åˆ†ä¸‰æ­¥ï¼š

1ã€åˆ†åˆ«è®°å½•ä»æ ¹èŠ‚ç‚¹åˆ° `startValue` å’Œ `destValue` çš„è·¯å¾„ `startPath` å’Œ `destPath`ã€‚

2ã€ç„¶åå»é™¤ `startPath` å’Œ `destPath` çš„å…¬å…±å‰ç¼€ã€‚

3ã€æœ€åå°† `startPath` å…¨éƒ¨å˜æˆ `U`ï¼ŒæŠŠ `startPath` å’Œ `destPath` æ¥åœ¨ä¸€èµ·ï¼Œå°±æ˜¯é¢˜ç›®è¦æ±‚çš„è·¯å¾„äº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -6)

```python
class Solution:
    def getDirections(self, root: TreeNode, startValue: int, destValue: int) -> str:
        self.startValue = startValue
        self.destValue = destValue
        # å¯»æ‰¾èµ°åˆ° startValue å’Œ destValue çš„æ–¹å‘è·¯å¾„
        self.traverse(root)
        # å»é™¤ä¸¤ä¸ªæ–¹å‘è·¯å¾„çš„å…¬å…±å‰ç¼€
        p = 0
        m = len(self.startPath)
        n = len(self.destPath)
        while p < m and p < n and self.startPath[p] == self.destPath[p]:
            p += 1
        self.startPath = self.startPath[p:]
        self.destPath = self.destPath[p:]
        # å°†èµ°å‘ startValue çš„æ–¹å‘è·¯å¾„å…¨éƒ¨å˜æˆ U
        self.startPath = 'U' * len(self.startPath)
        # ç»„åˆ startPath å’Œ destPath å°±å¾—åˆ°äº†ç­”æ¡ˆ
        return self.startPath + self.destPath

    def __init__(self):
        self.path = ''
        self.startPath = ''
        self.destPath = ''
        self.startValue = 0
        self.destValue = 0

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root):
        if root is None:
            return
        if root.val == self.startValue:
            self.startPath = self.path
        elif root.val == self.destValue:
            self.destPath = self.path

        # äºŒå‰æ ‘éå†æ¡†æ¶
        self.path += 'L'
        self.traverse(root.left)
        self.path = self.path[:-1]

        self.path += 'R'
        self.traverse(root.right)
        self.path = self.path[:-1]
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_step-by-step-directions-from-a-binary-tree-node-to-another" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_step-by-step-directions-from-a-binary-tree-node-to-another" src="https://labuladong.online/algo-visualize/leetcode/step-by-step-directions-from-a-binary-tree-node-to-another/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

Tip

é¢˜ç›®ä¹Ÿå¯ä»¥è®©ä½ åœ¨äºŒå‰æ ‘ä¸­å¯»æ‰¾æŸæ£µå­æ ‘ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šåœ¨é€’å½’å‡½æ•°ä¸­è°ƒç”¨å…¶ä»–é€’å½’å‡½æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šä¸Šå‡åˆ°å¹³æ–¹çº§åˆ«ï¼Œä½†ä¹Ÿæ²¡æœ‰ä»€ä¹ˆåˆ«çš„åŠæ³•ä¼˜åŒ–ï¼Œåªèƒ½é€šè¿‡éå†æ¥å¯¹æ¯”å­æ ‘ã€‚

## [572. å¦ä¸€æ£µæ ‘çš„å­æ ‘](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_subtree-of-another-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">572. å¦ä¸€æ£µæ ‘çš„å­æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/subtree-of-another-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/subtree-of-another-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><div class="original__bRMd"><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">subRoot</code><span>&nbsp;</span>ã€‚æ£€éªŒ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ä¸­æ˜¯å¦åŒ…å«å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">subRoot</code><span>&nbsp;</span>å…·æœ‰ç›¸åŒç»“æ„å’ŒèŠ‚ç‚¹å€¼çš„å­æ ‘ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ï¼›å¦åˆ™ï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">äºŒå‰æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">tree</code><span>&nbsp;</span>çš„ä¸€æ£µå­æ ‘åŒ…æ‹¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">tree</code><span>&nbsp;</span>çš„æŸä¸ªèŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ã€‚<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">tree</code><span>&nbsp;</span>ä¹Ÿå¯ä»¥çœ‹åšå®ƒè‡ªèº«çš„ä¸€æ£µå­æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/04/28/subtree1-tree.jpg" style="max-width: 100%; width: 532px; height: 400px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,4,5,1,2], subRoot = [4,1,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/04/28/subtree2-tree.jpg" style="max-width: 100%; width: 502px; height: 458px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,4,5,1,2,null,null,null,null,0], subRoot = [4,1,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>æ ‘ä¸Šçš„èŠ‚ç‚¹æ•°é‡èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 2000]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">subRoot</code><span>&nbsp;</span>æ ‘ä¸Šçš„èŠ‚ç‚¹æ•°é‡èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup><span>&nbsp;</span>&lt;= root.val &lt;= 10<sup>4</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup><span>&nbsp;</span>&lt;= subRoot.val &lt;= 10<sup>4</sup></code></li></ul></div></div></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/subtree-of-another-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 572. å¦ä¸€æ£µæ ‘çš„å­æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-7)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

éå†ä»¥ `root` ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œç”¨ [100. ç›¸åŒçš„æ ‘](https://leetcode.cn/problems/same-tree) ä¸­çš„ `isSame` å‡½æ•°åˆ¤æ–­ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘æ˜¯å¦å’Œä»¥ `subRoot` ä¸ºæ ¹çš„é‚£æ£µæ ‘ç›¸åŒã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

```python
class Solution:
    def isSubtree(self, root: TreeNode, subRoot: TreeNode) -> bool:
        if root is None:
            return subRoot is None
        # åˆ¤æ–­ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘æ˜¯å¦å’Œ subRoot ç›¸åŒ
        if self.isSameTree(root, subRoot):
            return True
        # å»å·¦å³å­æ ‘ä¸­åˆ¤æ–­æ˜¯å¦æœ‰å’Œ subRoot ç›¸åŒçš„å­æ ‘
        return self.isSubtree(root.left, subRoot) or self.isSubtree(root.right, subRoot)

    def isSameTree(self, p: TreeNode, q: TreeNode) -> bool:
        # åˆ¤æ–­ä¸€å¯¹èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ
        if p is None and q is None:
            return True
        if p is None or q is None:
            return False
        if p.val != q.val:
            return False
        # åˆ¤æ–­å…¶ä»–èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ
        return self.isSameTree(p.left, q.left) and self.isSameTree(p.right, q.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_subtree-of-another-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_subtree-of-another-tree" src="https://labuladong.online/algo-visualize/leetcode/subtree-of-another-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1367. äºŒå‰æ ‘ä¸­çš„åˆ—è¡¨](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#slug_linked-list-in-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1367. äºŒå‰æ ‘ä¸­çš„é“¾è¡¨</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/linked-list-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/linked-list-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µä»¥&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ä¸ºæ ¹çš„äºŒå‰æ ‘å’Œä¸€ä¸ª&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">head</code>&nbsp;ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœåœ¨äºŒå‰æ ‘ä¸­ï¼Œå­˜åœ¨ä¸€æ¡ä¸€ç›´å‘ä¸‹çš„è·¯å¾„ï¼Œä¸”æ¯ä¸ªç‚¹çš„æ•°å€¼æ°å¥½ä¸€ä¸€å¯¹åº”ä»¥&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">head</code>&nbsp;ä¸ºé¦–çš„é“¾è¡¨ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆè¯·ä½ è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">True</code><span>&nbsp;</span>ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">False</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¸€ç›´å‘ä¸‹çš„è·¯å¾„çš„æ„æ€æ˜¯ï¼šä»æ ‘ä¸­æŸä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œä¸€ç›´è¿ç»­å‘ä¸‹çš„è·¯å¾„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/02/29/sample_1_1720.png" style="max-width: 100%; height: 280px; width: 220px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>head = [4,2,8], root = [1,4,4,null,2,2,null,1,null,6,8,null,null,null,null,1,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ ‘ä¸­è“è‰²çš„èŠ‚ç‚¹æ„æˆäº†ä¸é“¾è¡¨å¯¹åº”çš„å­è·¯å¾„ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/02/29/sample_2_1720.png" style="max-width: 100%; height: 280px; width: 220px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>head = [1,4,2,6], root = [1,4,4,null,2,2,null,1,null,6,8,null,null,null,null,1,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>head = [1,4,2,6,8], root = [1,4,4,null,2,2,null,1,null,6,8,null,null,null,null,1,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>äºŒå‰æ ‘ä¸­ä¸å­˜åœ¨ä¸€ä¸€å¯¹åº”é“¾è¡¨çš„è·¯å¾„ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘å’Œé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ»¡è¶³&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= node.val&nbsp;&lt;= 100</code>&nbsp;ã€‚</li><li>é“¾è¡¨åŒ…å«çš„èŠ‚ç‚¹æ•°ç›®åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">100</code>&nbsp;ä¹‹é—´ã€‚</li><li>äºŒå‰æ ‘åŒ…å«çš„èŠ‚ç‚¹æ•°ç›®åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2500</code>&nbsp;ä¹‹é—´ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/linked-list-in-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1367. äºŒå‰æ ‘ä¸­çš„é“¾è¡¨</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#åŸºæœ¬æ€è·¯-8)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

æœ¬è´¨ä¸Šï¼Œ`isSubPath` å°±æ˜¯åœ¨éå†äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹ç”¨ `check` å‡½æ•°åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿå°†é“¾è¡¨åµŒè¿›å»ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œéå†ã€æ€ç»´è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#è§£æ³•ä»£ç -8)

```python
class Solution:
    def isSubPath(self, head: ListNode, root: TreeNode) -> bool:
        # base case
        if head is None:
            return True
        if root is None:
            return False
        # å½“æ‰¾åˆ°ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„å€¼ç­‰äºé“¾è¡¨å¤´ç»“ç‚¹æ—¶
        if head.val == root.val:
            # åˆ¤æ–­æ˜¯å¦èƒ½æŠŠé“¾è¡¨åµŒè¿›å»
            if self.check(head, root):
                return True
        # ç»§ç»­å»éå†å…¶ä»–èŠ‚ç‚¹å°è¯•åµŒå…¥é“¾è¡¨
        return self.isSubPath(head, root.left) or self.isSubPath(head, root.right)

    # æ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿå°†é“¾è¡¨åµŒå…¥äºŒå‰æ ‘
    def check(self, head: ListNode, root: TreeNode) -> bool:
        if head is None:
            return True
        if root is None:
            return False

        if head.val == root.val:
            # åœ¨å­æ ‘ä¸ŠåµŒå…¥å­é“¾è¡¨
            return self.check(head.next, root.left) or self.check(head.next, root.right)

        return False
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-traverse-iii/#å¯è§†åŒ–-6)

<details data-v-ee1a9bd0="" id="div_linked-list-in-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_linked-list-in-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/linked-list-in-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

# ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I

## [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_construct-binary-tree-from-preorder-and-inorder-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;ï¼Œå…¶ä¸­&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code><span>&nbsp;</span>æ˜¯äºŒå‰æ ‘çš„<strong style="font-weight: 600;">å…ˆåºéå†</strong>ï¼Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;æ˜¯åŒä¸€æ£µæ ‘çš„<strong style="font-weight: 600;">ä¸­åºéå†</strong>ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/tree.jpg" style="max-width: 100%; height: 302px; width: 277px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥</strong><strong style="font-weight: 600;">:</strong> preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [3,9,20,null,null,15,7]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> preorder = [-1], inorder = [-1]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [-1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= preorder.length &lt;= 3000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder.length == preorder.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-3000 &lt;= preorder[i], inorder[i] &lt;= 3000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code>&nbsp;å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;å‡<span>&nbsp;</span><strong style="font-weight: 600;">æ— é‡å¤</strong><span>&nbsp;</span>å…ƒç´ </li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;å‡å‡ºç°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code>&nbsp;<strong style="font-weight: 600;">ä¿è¯</strong><span>&nbsp;</span>ä¸ºäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;<strong style="font-weight: 600;">ä¿è¯</strong><span>&nbsp;</span>ä¸ºäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯)

**æ„é€ äºŒå‰æ ‘ï¼Œç¬¬ä¸€ä»¶äº‹ä¸€å®šæ˜¯æ‰¾æ ¹èŠ‚ç‚¹ï¼Œç„¶åæƒ³åŠæ³•æ„é€ å·¦å³å­æ ‘**ã€‚

äºŒå‰æ ‘çš„å‰åºå’Œä¸­åºéå†ç»“æœçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š

![img](1.jpeg)

å‰åºéå†ç»“æœç¬¬ä¸€ä¸ªå°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åå†æ ¹æ®ä¸­åºéå†ç»“æœç¡®å®šå·¦å³å­æ ‘çš„èŠ‚ç‚¹ã€‚

![img](4.jpeg)

ç»“åˆè¿™ä¸ªå›¾çœ‹ä»£ç è¾…åŠ©ç†è§£ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [äºŒå‰æ ‘å¿ƒæ³•ï¼ˆæ„é€ ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/binary-tree-part2/)
- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç )

```python
class Solution:
    # å­˜å‚¨ inorder ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„
    valToIndex = dict()

    def buildTree(self, preorder, inorder):
        for i in range(len(inorder)):
            self.valToIndex[inorder[i]] = i
        return self.build(preorder, 0, len(preorder) - 1,
                          inorder, 0, len(inorder) - 1)

    # build å‡½æ•°çš„å®šä¹‰ï¼š
    # è‹¥å‰åºéå†æ•°ç»„ä¸º preorder[preStart..preEnd]ï¼Œ
    # ä¸­åºéå†æ•°ç»„ä¸º inorder[inStart..inEnd]ï¼Œ
    # æ„é€ äºŒå‰æ ‘ï¼Œè¿”å›è¯¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
    def build(self, preorder, preStart, preEnd,
               inorder, inStart, inEnd):
        if preStart > preEnd:
            return None

        # root èŠ‚ç‚¹å¯¹åº”çš„å€¼å°±æ˜¯å‰åºéå†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
        rootVal = preorder[preStart]
        # rootVal åœ¨ä¸­åºéå†æ•°ç»„ä¸­çš„ç´¢å¼•
        index = self.valToIndex[rootVal]

        leftSize = index - inStart

        # å…ˆæ„é€ å‡ºå½“å‰æ ¹èŠ‚ç‚¹
        root = TreeNode(rootVal) 

        # é€’å½’æ„é€ å·¦å³å­æ ‘
        root.left = self.build(preorder, preStart + 1, preStart + leftSize,
                               inorder, inStart, index - 1)

        root.right = self.build(preorder, preStart + leftSize + 1, preEnd,
                                inorder, index + 1, inEnd)

        return root
```

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal)
- [654. æœ€å¤§äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/maximum-binary-tree)
- [889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal)
- [å‰‘æŒ‡ Offer 07. é‡å»ºäºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/zhong-jian-er-cha-shu-lcof)

## [106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_construct-binary-tree-from-inorder-and-postorder-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code><span>&nbsp;</span>ï¼Œå…¶ä¸­<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code><span>&nbsp;</span>æ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code><span>&nbsp;</span>æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œè¯·ä½ æ„é€ å¹¶è¿”å›è¿™é¢—&nbsp;<em>äºŒå‰æ ‘</em>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/tree.jpg" style="max-width: 100%;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><b>è¾“å…¥ï¼š</b>inorder = [9,3,15,20,7], postorder = [9,15,7,20,3]
<b>è¾“å‡ºï¼š</b>[3,9,20,null,null,15,7]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><b>è¾“å…¥ï¼š</b>inorder = [-1], postorder = [-1]
<b>è¾“å‡ºï¼š</b>[-1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= inorder.length &lt;= 3000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder.length == inorder.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-3000 &lt;= inorder[i], postorder[i] &lt;= 3000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code>&nbsp;éƒ½ç”±<span>&nbsp;</span><strong style="font-weight: 600;">ä¸åŒ</strong><span>&nbsp;</span>çš„å€¼ç»„æˆ</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code>&nbsp;ä¸­æ¯ä¸€ä¸ªå€¼éƒ½åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;ä¸­</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">inorder</code>&nbsp;<strong style="font-weight: 600;">ä¿è¯</strong>æ˜¯æ ‘çš„ä¸­åºéå†</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code>&nbsp;<strong style="font-weight: 600;">ä¿è¯</strong>æ˜¯æ ‘çš„ååºéå†</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯-1)

**æ„é€ äºŒå‰æ ‘ï¼Œç¬¬ä¸€ä»¶äº‹ä¸€å®šæ˜¯æ‰¾æ ¹èŠ‚ç‚¹ï¼Œç„¶åæƒ³åŠæ³•æ„é€ å·¦å³å­æ ‘**ã€‚

äºŒå‰æ ‘çš„ååºå’Œä¸­åºéå†ç»“æœçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š

![img](5.jpeg)

ååºéå†ç»“æœæœ€åä¸€ä¸ªå°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åå†æ ¹æ®ä¸­åºéå†ç»“æœç¡®å®šå·¦å³å­æ ‘çš„èŠ‚ç‚¹ã€‚

![img](6.jpeg)

ç»“åˆè¿™ä¸ªå›¾çœ‹ä»£ç è¾…åŠ©ç†è§£ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [äºŒå‰æ ‘å¿ƒæ³•ï¼ˆæ„é€ ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/binary-tree-part2/)
- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç -1)

```python
class Solution:
    # å­˜å‚¨ inorder ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„
    val_to_index = {}

    def buildTree(self, inorder, postorder):
        for i in range(len(inorder)):
            self.val_to_index[inorder[i]] = i
        return self.build(inorder, 0, len(inorder) - 1,
                          postorder, 0, len(postorder) - 1)

    # å®šä¹‰ï¼šä¸­åºéå†æ•°ç»„ä¸º inorder[inStart..inEnd]ï¼Œ
    # ååºéå†æ•°ç»„ä¸º postorder[postStart..postEnd]ï¼Œ
    # build å‡½æ•°æ„é€ è¿™ä¸ªäºŒå‰æ ‘å¹¶è¿”å›è¯¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
    def build(self, inorder, in_start, in_end,
              postorder, post_start, post_end):

        if in_start > in_end:
            return None
        # root èŠ‚ç‚¹å¯¹åº”çš„å€¼å°±æ˜¯ååºéå†æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ 
        root_val = postorder[post_end]
        # rootVal åœ¨ä¸­åºéå†æ•°ç»„ä¸­çš„ç´¢å¼•
        index = self.val_to_index[root_val]
        # å·¦å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°
        left_size = index - in_start
        root = TreeNode(root_val) 
        # é€’å½’æ„é€ å·¦å³å­æ ‘
        root.left = self.build(inorder, in_start, index - 1,
                               postorder, post_start, post_start + left_size - 1)
        
        root.right = self.build(inorder, index + 1, in_end,
                                postorder, post_start + left_size, post_end - 1)
        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_construct-binary-tree-from-inorder-and-postorder-traversal" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_construct-binary-tree-from-inorder-and-postorder-traversal" src="https://labuladong.online/algo-visualize/leetcode/construct-binary-tree-from-inorder-and-postorder-traversal/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal)
- [654. æœ€å¤§äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/maximum-binary-tree)
- [889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal)

## [889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_construct-binary-tree-from-preorder-and-postorder-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/construct-binary-tree-from-preorder-and-postorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ï¼Œ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code>&nbsp;å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code><span>&nbsp;</span>ï¼Œå…¶ä¸­<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code><span>&nbsp;</span>æ˜¯ä¸€ä¸ªå…·æœ‰<span>&nbsp;</span><strong style="font-weight: 600;">æ— é‡å¤</strong><span>&nbsp;</span>å€¼çš„äºŒå‰æ ‘çš„å‰åºéå†ï¼Œ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code><span>&nbsp;</span>æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œé‡æ„å¹¶è¿”å›äºŒå‰æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœå­˜åœ¨å¤šä¸ªç­”æ¡ˆï¼Œæ‚¨å¯ä»¥è¿”å›å…¶ä¸­<span>&nbsp;</span><strong style="font-weight: 600;">ä»»ä½•</strong><span>&nbsp;</span>ä¸€ä¸ªã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/07/24/lc-prepost.jpg" style="max-width: 100%; height: 265px; width: 304px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>preorder = [1,2,4,5,3,6,7], postorder = [4,5,2,6,7,3,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,2,3,4,5,6,7]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> preorder = [1], postorder = [1]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= preorder.length &lt;= 30</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= preorder[i] &lt;= preorder.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code>&nbsp;ä¸­æ‰€æœ‰å€¼éƒ½<span>&nbsp;</span><strong style="font-weight: 600;">ä¸åŒ</strong></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder.length == preorder.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= postorder[i] &lt;= postorder.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code>&nbsp;ä¸­æ‰€æœ‰å€¼éƒ½<span>&nbsp;</span><strong style="font-weight: 600;">ä¸åŒ</strong></li><li>ä¿è¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code>&nbsp;å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">postorder</code>&nbsp;æ˜¯åŒä¸€æ£µäºŒå‰æ ‘çš„å‰åºéå†å’Œååºéå†</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯-2)

åšè¿™é“é¢˜ä¹‹å‰ï¼Œå»ºè®®ä½ å…ˆçœ‹ä¸€ä¸‹ [äºŒå‰æ ‘å¿ƒæ³•ï¼ˆæ„é€ ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/binary-tree-part2/)ï¼Œåšä¸€ä¸‹ [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆä¸­ç­‰ï¼‰](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal) å’Œ [106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼ˆä¸­ç­‰ï¼‰](https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal) è¿™ä¸¤é“é¢˜ã€‚

è¿™é“é¢˜è®©ç”¨ååºéå†å’Œå‰åºéå†ç»“æœè¿˜åŸäºŒå‰æ ‘ï¼Œå’Œå‰ä¸¤é“é¢˜æœ‰ä¸€ä¸ªæœ¬è´¨çš„åŒºåˆ«ï¼š

**é€šè¿‡å‰åºä¸­åºï¼Œæˆ–è€…ååºä¸­åºéå†ç»“æœå¯ä»¥ç¡®å®šä¸€æ£µåŸå§‹äºŒå‰æ ‘ï¼Œä½†æ˜¯é€šè¿‡å‰åºååºéå†ç»“æœæ— æ³•ç¡®å®šåŸå§‹äºŒå‰æ ‘**ã€‚é¢˜ç›®ä¹Ÿè¯´äº†ï¼Œå¦‚æœæœ‰å¤šç§ç»“æœï¼Œä½ å¯ä»¥è¿”å›ä»»æ„ä¸€ç§ã€‚

ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è¯´è¿‡ï¼Œæ„å»ºäºŒå‰æ ‘çš„å¥—è·¯å¾ˆç®€å•ï¼Œå…ˆæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ‰¾åˆ°å¹¶é€’å½’æ„é€ å·¦å³å­æ ‘å³å¯ã€‚

å‰ä¸¤é“é¢˜ï¼Œå¯ä»¥é€šè¿‡å‰åºæˆ–è€…ååºéå†ç»“æœæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®ä¸­åºéå†ç»“æœç¡®å®šå·¦å³å­æ ‘ã€‚

è¿™é“é¢˜ï¼Œä½ å¯ä»¥ç¡®å®šæ ¹èŠ‚ç‚¹ï¼Œä½†æ˜¯æ— æ³•ç¡®åˆ‡çš„çŸ¥é“å·¦å³å­æ ‘æœ‰å“ªäº›èŠ‚ç‚¹ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢è¿™ä¸¤æ£µæ ‘ç»“æ„ä¸åŒï¼Œä½†æ˜¯å®ƒä»¬çš„å‰åºéå†å’Œååºéå†ç»“æœæ˜¯ç›¸åŒçš„ï¼š

![img](7.png)

ä¸è¿‡è¯è¯´å›æ¥ï¼Œç”¨ååºéå†å’Œå‰åºéå†ç»“æœè¿˜åŸäºŒå‰æ ‘ï¼Œè§£æ³•é€»è¾‘ä¸Šå’Œå‰ä¸¤é“é¢˜å·®åˆ«ä¸å¤§ï¼Œä¹Ÿæ˜¯é€šè¿‡æ§åˆ¶å·¦å³å­æ ‘çš„ç´¢å¼•æ¥æ„å»ºï¼š

**1ã€é¦–å…ˆæŠŠå‰åºéå†ç»“æœçš„ç¬¬ä¸€ä¸ªå…ƒç´ æˆ–è€…ååºéå†ç»“æœçš„æœ€åä¸€ä¸ªå…ƒç´ ç¡®å®šä¸ºæ ¹èŠ‚ç‚¹çš„å€¼**ã€‚

**2ã€ç„¶åæŠŠå‰åºéå†ç»“æœçš„ç¬¬äºŒä¸ªå…ƒç´ ä½œä¸ºå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹çš„å€¼**ã€‚

**3ã€åœ¨ååºéå†ç»“æœä¸­å¯»æ‰¾å·¦å­æ ‘æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œä»è€Œç¡®å®šäº†å·¦å­æ ‘çš„ç´¢å¼•è¾¹ç•Œï¼Œè¿›è€Œç¡®å®šå³å­æ ‘çš„ç´¢å¼•è¾¹ç•Œï¼Œé€’å½’æ„é€ å·¦å³å­æ ‘å³å¯**ã€‚

![img](8.jpeg)

**è¯¦ç»†é¢˜è§£**ï¼š

- [äºŒå‰æ ‘å¿ƒæ³•ï¼ˆæ„é€ ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/binary-tree-part2/)
- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç -2)

```python
class Solution:
    # å­˜å‚¨ postorder ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„
    valToIndex = dict()

    def constructFromPrePost(self, preorder, postorder):
        for i in range(len(postorder)):
            self.valToIndex[postorder[i]] = i
        return self.build(preorder, 0, len(preorder) - 1,
                          postorder, 0, len(postorder) - 1)

    # å®šä¹‰ï¼šæ ¹æ® preorder[preStart..preEnd] å’Œ postorder[postStart..postEnd]
    # æ„å»ºäºŒå‰æ ‘ï¼Œå¹¶è¿”å›æ ¹èŠ‚ç‚¹ã€‚
    def build(self, preorder, preStart, preEnd,
              postorder, postStart, postEnd):
        if preStart > preEnd:
            return None
        if preStart == preEnd:
            return TreeNode(preorder[preStart])

        # root èŠ‚ç‚¹å¯¹åº”çš„å€¼å°±æ˜¯å‰åºéå†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
        rootVal = preorder[preStart]
        # root.left çš„å€¼æ˜¯å‰åºéå†ç¬¬äºŒä¸ªå…ƒç´ 
        # é€šè¿‡å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘çš„å…³é”®åœ¨äºé€šè¿‡å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹
        # ç¡®å®š preorder å’Œ postorder ä¸­å·¦å³å­æ ‘çš„å…ƒç´ åŒºé—´
        leftRootVal = preorder[preStart + 1]
        # leftRootVal åœ¨ååºéå†æ•°ç»„ä¸­çš„ç´¢å¼•
        index = self.valToIndex[leftRootVal]
        # å·¦å­æ ‘çš„å…ƒç´ ä¸ªæ•°
        leftSize = index - postStart + 1
     
        # å…ˆæ„é€ å‡ºå½“å‰æ ¹èŠ‚ç‚¹
        root = TreeNode(rootVal) 
        # é€’å½’æ„é€ å·¦å³å­æ ‘
        # æ ¹æ®å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ç´¢å¼•å’Œå…ƒç´ ä¸ªæ•°æ¨å¯¼å·¦å³å­æ ‘çš„ç´¢å¼•è¾¹ç•Œ
        root.left = self.build(preorder, preStart + 1, preStart + leftSize,
                               postorder, postStart, index)
        root.right = self.build(preorder, preStart + leftSize + 1, preEnd,
                                postorder, index + 1, postEnd - 1)

        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_construct-binary-tree-from-preorder-and-postorder-traversal" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_construct-binary-tree-from-preorder-and-postorder-traversal" src="https://labuladong.online/algo-visualize/leetcode/construct-binary-tree-from-preorder-and-postorder-traversal/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal)
- [106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal)
- [654. æœ€å¤§äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/maximum-binary-tree)

## [331. éªŒè¯äºŒå‰æ ‘çš„å‰åºåºåˆ—åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_verify-preorder-serialization-of-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">331. éªŒè¯äºŒå‰æ ‘çš„å‰åºåºåˆ—åŒ–</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/verify-preorder-serialization-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/verify-preorder-serialization-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">åºåˆ—åŒ–äºŒå‰æ ‘çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<span>&nbsp;</span><strong style="font-weight: 600;">å‰åºéå†<span>&nbsp;</span></strong>ã€‚å½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªéç©ºèŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•ä¸‹è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœå®ƒæ˜¯ä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ ‡è®°å€¼è®°å½•ï¼Œä¾‹å¦‚<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">#</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/03/12/pre-tree.jpg" style="max-width: 100%;"></p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¾‹å¦‚ï¼Œä¸Šé¢çš„äºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">"9,3,4,#,#,1,#,#,2,#,6,#,#"</code>ï¼Œå…¶ä¸­<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">#</code><span>&nbsp;</span>ä»£è¡¨ä¸€ä¸ªç©ºèŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸²ä»¥é€—å·åˆ†éš”çš„åºåˆ—ï¼ŒéªŒè¯å®ƒæ˜¯å¦æ˜¯æ­£ç¡®çš„äºŒå‰æ ‘çš„å‰åºåºåˆ—åŒ–ã€‚ç¼–å†™ä¸€ä¸ªåœ¨ä¸é‡æ„æ ‘çš„æ¡ä»¶ä¸‹çš„å¯è¡Œç®—æ³•ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ä¿è¯</strong><span>&nbsp;</span>æ¯ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦æˆ–ä¸ºä¸€ä¸ªæ•´æ•°æˆ–ä¸ºä¸€ä¸ªè¡¨ç¤º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">null</code><span>&nbsp;</span>æŒ‡é’ˆçš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">'#'</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥æ ¼å¼æ€»æ˜¯æœ‰æ•ˆçš„</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä¾‹å¦‚å®ƒæ°¸è¿œä¸ä¼šåŒ…å«ä¸¤ä¸ªè¿ç»­çš„é€—å·ï¼Œæ¯”å¦‚&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">"1,,3"</code><span>&nbsp;</span>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æ³¨æ„ï¼š</strong>ä¸å…è®¸é‡å»ºæ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>preorder = <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">"9,3,4,#,#,1,#,#,2,#,6,#,#"</code>
<strong style="font-weight: 600;">è¾“å‡º: </strong><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">true</code></pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹&nbsp;2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>preorder = <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">"1,#"</code>
<strong style="font-weight: 600;">è¾“å‡º: </strong><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">false</code>
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>preorder = <code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">"9,#,#,1"</code>
<strong style="font-weight: 600;">è¾“å‡º: </strong><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0px; border-radius: 0px;">false</code>
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= preorder.length &lt;= 10<sup>4</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code>&nbsp;ç”±ä»¥é€—å·&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">â€œï¼Œâ€</code><span>&nbsp;</span>åˆ†éš”çš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0,100]</code><span>&nbsp;</span>èŒƒå›´å†…çš„æ•´æ•°å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">â€œ#â€</code><span>&nbsp;</span>ç»„æˆ</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/verify-preorder-serialization-of-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 331. éªŒè¯äºŒå‰æ ‘çš„å‰åºåºåˆ—åŒ–</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯-3)

é¦–å…ˆï¼Œå¦‚æœçœ‹è¿‡å‰æ–‡ [æ‰‹æŠŠæ‰‹å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆåºåˆ—åŒ–ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/serialize-and-deserialize-binary-tree/) ç†è§£äº†å‰åºéå†åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„åŸç†ï¼Œè‚¯å®šå¯ä»¥é€šè¿‡æ”¹é€ ååºåˆ—åŒ–å‡½æ•° `deserialize` æ¥åˆ¤æ–­åºåˆ—åŒ–çš„åˆæ³•æ€§ã€‚

å¦å¤–è¿˜æœ‰ä¸€ç§æ›´å·§å¦™çš„è§£æ³•ï¼Œå°±æ˜¯åˆ©ç”¨äºŒå‰æ ‘èŠ‚ç‚¹å’Œè¾¹çš„å…³ç³»ã€‚

æ¯ä¸ªéç©ºçš„äºŒå‰æ ‘èŠ‚ç‚¹éƒ½ä¼šäº§ç”Ÿä¸¤æ¡è¾¹ï¼Œå¹¶æ¶ˆè€—ä¸€æ¡è¾¹ï¼›è€Œæ¯ä¸ªç©ºèŠ‚ç‚¹åªä¼šæ¶ˆè€—ä¸€æ¡è¾¹ï¼š

![img](331.jpeg)

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç -3)

```python
class Solution:
    def isValidSerialization(self, preorder: str) -> bool:
        # ä¸€æ¡æŒ‡å‘æ ¹èŠ‚ç‚¹çš„è™šæ‹Ÿè¾¹
        edge = 1
        for node in preorder.split(","):
            # ä»»ä½•æ—¶å€™ï¼Œè¾¹æ•°éƒ½ä¸èƒ½å°äº 0
            if node == "#":
                # ç©ºæŒ‡é’ˆæ¶ˆè€—ä¸€æ¡ç©ºé—²è¾¹
                edge -= 1
                if edge < 0:
                    return False
            else:
                # éç©ºèŠ‚ç‚¹æ¶ˆè€—ä¸€æ¡ç©ºé—²è¾¹ï¼Œå¢åŠ ä¸¤æ¡ç©ºé—²è¾¹
                edge -= 1
                if edge < 0:
                    return False
                edge += 2
        # æœ€åä¸åº”è¯¥å­˜åœ¨ç©ºé—²è¾¹
        return edge == 0


class Solution2:
    def isValidSerialization(self, preorder: str) -> bool:
        # å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        nodes = list(preorder.split(","))
        return self.deserialize(nodes) and len(nodes) == 0

    # æ”¹é€ åçš„å‰åºéå†ååºåˆ—åŒ–å‡½æ•°
    # è¯¦ç»†è§£æï¼šhttps://labuladong.online/algo/data-structure/serialize-and-deserialize-binary-tree/
    def deserialize(self, nodes) -> bool:
        if not nodes:
            return False

        # ***** å‰åºéå†ä½ç½® *****
        # åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
        first = nodes.pop(0)
        if first == "#":
            return True
        # *********************

        return self.deserialize(nodes) and self.deserialize(nodes)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_verify-preorder-serialization-of-a-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_verify-preorder-serialization-of-a-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/verify-preorder-serialization-of-a-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [894. æ‰€æœ‰å¯èƒ½çš„æ»¡äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_all-possible-full-binary-trees)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">894. æ‰€æœ‰å¯èƒ½çš„çœŸäºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/all-possible-full-binary-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/all-possible-full-binary-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ï¼Œè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å¯èƒ½å«<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªèŠ‚ç‚¹çš„<span>&nbsp;</span><strong style="font-weight: 600;">çœŸäºŒå‰æ ‘</strong><span>&nbsp;</span>ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ç­”æ¡ˆä¸­æ¯æ£µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»ç¬¦åˆ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val == 0</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç­”æ¡ˆçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€æ£µçœŸäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ä½ å¯ä»¥æŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä»»æ„é¡ºåº</strong><span>&nbsp;</span>è¿”å›æœ€ç»ˆçš„çœŸäºŒå‰æ ‘åˆ—è¡¨<strong style="font-weight: 600;">ã€‚</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">çœŸäºŒå‰æ ‘</strong><span>&nbsp;</span>æ˜¯ä¸€ç±»äºŒå‰æ ‘ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹æ°å¥½æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>æˆ–<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code><span>&nbsp;</span>ä¸ªå­èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/08/22/fivetrees.png" style="max-width: 100%; width: 700px; height: 400px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 7
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[0,0,0,null,null,0,0,null,null,0,0],[0,0,0,null,null,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,null,null,null,null,0,0],[0,0,0,0,0,null,null,0,0]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[0,0,0]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 20</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/all-possible-full-binary-trees/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 894. æ‰€æœ‰å¯èƒ½çš„çœŸäºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯-4)

æ³¨æ„ï¼šå›½å¤–å’Œå›½å†…å…³äºå®Œå…¨äºŒå‰æ ‘ã€æ»¡äºŒå‰æ ‘çš„å®šä¹‰æœ‰åŒºåˆ«ï¼Œæˆ‘åœ¨ [äºŒå‰æ ‘åŸºç¡€çŸ¥è¯†](https://labuladong.online/algo/data-structure-basic/binary-tree-basic/) æœ‰ä»‹ç»ã€‚ä¸è¿‡è¿™äº›æ–‡å­¦è¯æ±‡å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ç®—æ³•æ€ç»´ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‰ç…§é¢˜ç›®è¯´çš„æ¥å°±å¥½ã€‚

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

å¦‚æœä½ æƒ³ç”Ÿæˆä¸€æ£µ `n` ä¸ªèŠ‚ç‚¹çš„æ»¡äºŒå‰æ ‘ï¼Œé¦–å…ˆè¦å›ºå®šæ ¹èŠ‚ç‚¹ï¼Œç„¶åç»„è£…å·¦å³å­æ ‘ï¼Œæ ¹èŠ‚ç‚¹åŠ ä¸Šå·¦å³å­æ ‘èŠ‚ç‚¹ä¹‹å’Œåº”è¯¥ç­‰äº `n`ã€‚

æˆ‘ä»¬å®šä¹‰ `helper` èƒ½å¤Ÿç”ŸæˆèŠ‚ç‚¹æ•°ä¸º `n` çš„æ‰€æœ‰å¯èƒ½çš„äºŒå‰æ ‘ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªå®šä¹‰ç”Ÿæˆå·¦å³å­æ ‘ï¼Œç„¶åé€šè¿‡å­æ ‘ç»„è£…å‡ºç»“æœå³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç -4)

```python
class Solution:
    # å¤‡å¿˜å½•ï¼Œè®°å½• n ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿç»„åˆæˆçš„æ‰€æœ‰å¯èƒ½äºŒå‰æ ‘
    memo = {}

    def allPossibleFBT(self, n: int) -> List[TreeNode]:
        if n % 2 == 0:
            # é¢˜ç›®æè¿°çš„æ»¡äºŒå‰æ ‘ä¸å¯èƒ½æ˜¯å¶æ•°ä¸ªèŠ‚ç‚¹
            return []
        self.memo = {1: [TreeNode(0)]}
        return self.build(n)

    # å®šä¹‰ï¼šè¾“å…¥ä¸€ä¸ª nï¼Œç”ŸæˆèŠ‚ç‚¹æ ‘ä¸º n çš„æ‰€æœ‰å¯èƒ½çš„æ»¡äºŒå‰æ ‘
    def build(self, n: int) -> List[TreeNode]:
        if n in self.memo:
            # é¿å…å†—ä½™è®¡ç®—
            return self.memo[n]
        res = []
        # base case
        if n == 1:
            return [TreeNode(0)]

        # é€’å½’ç”Ÿæˆæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å·¦å³å­æ ‘
        for i in range(1, n, 2):
            j = n - i - 1
            # åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œç”Ÿæˆå·¦å³å­æ ‘
            leftSubTrees = self.build(i)
            rightSubTrees = self.build(j)
            # å·¦å³å­æ ‘çš„ä¸åŒæ’åˆ—ä¹Ÿèƒ½æ„æˆä¸åŒçš„äºŒå‰æ ‘
            for left in leftSubTrees:
                for right in rightSubTrees:
                    # ç”Ÿæˆæ ¹èŠ‚ç‚¹
                    root = TreeNode(0)
                    # ç»„è£…å‡ºä¸€ç§å¯èƒ½çš„äºŒå‰æ ‘å½¢çŠ¶
                    root.left = left
                    root.right = right
                    # åŠ å…¥ç»“æœåˆ—è¡¨
                    res.append(root)
        # å­˜å…¥å¤‡å¿˜å½•
        self.memo[n] = res
        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_all-possible-full-binary-trees" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_all-possible-full-binary-trees" src="https://labuladong.online/algo-visualize/leetcode/all-possible-full-binary-trees/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [998. æœ€å¤§äºŒå‰æ ‘ II](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_maximum-binary-tree-ii)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">998. æœ€å¤§äºŒå‰æ ‘ II</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/maximum-binary-tree-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/maximum-binary-tree-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æœ€å¤§æ ‘</strong><span>&nbsp;</span>å®šä¹‰ï¼šä¸€æ£µæ ‘ï¼Œå¹¶æ»¡è¶³ï¼šå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºå…¶å­æ ‘ä¸­çš„ä»»ä½•å…¶ä»–å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ æœ€å¤§æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>å’Œä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å°±åƒ<span>&nbsp;</span><a href="https://leetcode.cn/problems/maximum-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">ä¹‹å‰çš„é—®é¢˜</a><span>&nbsp;</span>é‚£æ ·ï¼Œç»™å®šçš„æ ‘æ˜¯åˆ©ç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Construct(a)</code>&nbsp;ä¾‹ç¨‹ä»åˆ—è¡¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a</code>ï¼ˆ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root = Construct(a)</code>ï¼‰é€’å½’åœ°æ„å»ºçš„ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>å¦‚æœ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a</code><span>&nbsp;</span>ä¸ºç©ºï¼Œè¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">null</code><span>&nbsp;</span>ã€‚</li><li>å¦åˆ™ï¼Œä»¤&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a[i]</code><span>&nbsp;</span>ä½œä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a</code><span>&nbsp;</span>çš„æœ€å¤§å…ƒç´ ã€‚åˆ›å»ºä¸€ä¸ªå€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a[i]</code>&nbsp;çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;çš„å·¦å­æ ‘å°†è¢«æ„å»ºä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Construct([a[0], a[1], ..., a[i - 1]])</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;çš„å³å­æ ‘å°†è¢«æ„å»ºä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Construct([a[i + 1], a[i + 2], ..., a[a.length - 1]])</code><span>&nbsp;</span>ã€‚</li><li>è¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·æ³¨æ„ï¼Œé¢˜ç›®æ²¡æœ‰ç›´æ¥ç»™å‡º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a</code><span>&nbsp;</span>ï¼Œåªæ˜¯ç»™å‡ºä¸€ä¸ªæ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root = Construct(a)</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å‡è®¾<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">b</code><span>&nbsp;</span>æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">a</code><span>&nbsp;</span>çš„å‰¯æœ¬ï¼Œå¹¶åœ¨æœ«å°¾é™„åŠ å€¼<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">val</code>ã€‚é¢˜ç›®æ•°æ®ä¿è¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">b</code><span>&nbsp;</span>ä¸­çš„å€¼äº’ä¸ç›¸åŒã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Construct(b)</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/23/maximum-binary-tree-1-1.png" style="max-width: 100%; height: 160px; width: 159px;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/23/maximum-binary-tree-1-2.png" style="max-width: 100%; height: 160px; width: 169px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [4,1,3,null,null,2], val = 5
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[5,4,null,1,3,null,null,2]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>a = [1,4,2,3], b = [1,4,2,3,5]</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š<br><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/23/maximum-binary-tree-2-1.png" style="max-width: 100%; height: 160px; width: 180px;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/23/maximum-binary-tree-2-2.png" style="max-width: 100%; height: 160px; width: 214px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,2,4,null,1], val = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[5,2,4,null,1,null,3]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>a = [2,1,5,4], b = [2,1,5,4,3]</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š<br><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/23/maximum-binary-tree-3-1.png" style="max-width: 100%; height: 160px; width: 180px;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/02/23/maximum-binary-tree-3-2.png" style="max-width: 100%; height: 160px; width: 201px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,2,3,null,1], val = 4
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[5,2,4,null,1,3]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>a = [2,1,5,3], b = [2,1,5,3,4]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 100]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 100</code></li><li>æ ‘ä¸­çš„æ‰€æœ‰å€¼<span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= val &lt;= 100</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-binary-tree-ii/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 998. æœ€å¤§äºŒå‰æ ‘ II</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯-5)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

åšè¿™é“é¢˜ä¹‹å‰ï¼Œä½ ä¸€å®šè¦å»åšä¸€ä¸‹ [654. æœ€å¤§äºŒå‰æ ‘](https://leetcode.cn/problems/maximum-binary-tree) è¿™é“é¢˜ï¼ŒçŸ¥é“äº†æ„å»ºæœ€å¤§äºŒå‰æ ‘çš„é€»è¾‘å°±å¾ˆå®¹æ˜“è§£å†³è¿™é“é¢˜äº†ã€‚

æ–°å¢çš„ `val` æ˜¯æ·»åŠ åœ¨åŸå§‹æ•°ç»„çš„æœ€åçš„ï¼Œæ ¹æ®æ„å»ºæœ€å¤§äºŒå‰æ ‘çš„é€»è¾‘ï¼Œæ­£å¸¸æ¥è¯´æœ€åçš„è¿™ä¸ªå€¼ä¸€å®šæ˜¯åœ¨å³å­æ ‘çš„ï¼Œå¯ä»¥å¯¹å³å­æ ‘é€’å½’è°ƒç”¨ `insertIntoMaxTree` æ’å…¥è¿›å»ã€‚

ä½†æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µæ˜¯ `val` æ¯”åŸå§‹æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§ï¼Œé‚£ä¹ˆæ ¹æ®æ„å»ºæœ€å¤§äºŒå‰æ ‘çš„é€»è¾‘ï¼ŒåŸæ¥çš„è¿™æ£µæ ‘åº”è¯¥æˆä¸º `val` èŠ‚ç‚¹çš„å·¦å­æ ‘ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç -5)

```python
class Solution:
    def insertIntoMaxTree(self, root: TreeNode, val: int) -> TreeNode:
        if root is None:
            return TreeNode(val)
        if root.val < val:
            # å¦‚æœ val æ˜¯æ•´æ£µæ ‘æœ€å¤§çš„ï¼Œé‚£ä¹ˆåŸæ¥çš„è¿™æ£µæ ‘åº”è¯¥æ˜¯ val èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œ
            # å› ä¸º val èŠ‚ç‚¹æ˜¯æ¥åœ¨åŸå§‹æ•°ç»„ a çš„æœ€åä¸€ä¸ªå…ƒç´ 
            temp = root
            root = TreeNode(val)
            root.left = temp
        else:
            # å¦‚æœ val ä¸æ˜¯æœ€å¤§çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å³å­æ ‘ä¸Šï¼Œ
            # å› ä¸º val èŠ‚ç‚¹æ˜¯æ¥åœ¨åŸå§‹æ•°ç»„ a çš„æœ€åä¸€ä¸ªå…ƒç´ 
            root.right = self.insertIntoMaxTree(root.right, val)
        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_maximum-binary-tree-ii" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_maximum-binary-tree-ii" src="https://labuladong.online/algo-visualize/leetcode/maximum-binary-tree-ii/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1110. åˆ ç‚¹æˆæ—](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#slug_delete-nodes-and-return-forest)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1110. åˆ ç‚¹æˆæ—</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/delete-nodes-and-return-forest/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/delete-nodes-and-return-forest/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å‡ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼Œæ ‘ä¸Šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœèŠ‚ç‚¹å€¼åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">to_delete</code>&nbsp;ä¸­å‡ºç°ï¼Œæˆ‘ä»¬å°±æŠŠè¯¥èŠ‚ç‚¹ä»æ ‘ä¸Šåˆ å»ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªæ£®æ—ï¼ˆä¸€äº›ä¸ç›¸äº¤çš„æ ‘æ„æˆçš„é›†åˆï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›æ£®æ—ä¸­çš„æ¯æ£µæ ‘ã€‚ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºç»„ç»‡ç­”æ¡ˆã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/07/05/screen-shot-2019-07-01-at-53836-pm.png" style="max-width: 100%; height: 150px; width: 237px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,6,7], to_delete = [3,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1,2,null,4],[6],[7]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,4,null,3], to_delete = [3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1,2,4]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°æœ€å¤§ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1000</code>ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä»‹äº&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1000</code>&nbsp;ä¹‹é—´çš„å€¼ï¼Œä¸”å„ä¸ç›¸åŒã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">to_delete.length &lt;= 1000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">to_delete</code><span>&nbsp;</span>åŒ…å«ä¸€äº›ä»&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1000</code>ã€å„ä¸ç›¸åŒçš„å€¼ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/delete-nodes-and-return-forest/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1110. åˆ ç‚¹æˆæ—</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#åŸºæœ¬æ€è·¯-6)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

é¦–å…ˆï¼Œå¦‚æœåœ¨é€’å½’è¿‡ç¨‹ä¸­ä¿®æ”¹äºŒå‰æ ‘ç»“æ„ï¼Œå¿…é¡»è¦è®©çˆ¶èŠ‚ç‚¹æ¥æ”¶é€’å½’å‡½æ•°çš„è¿”å›å€¼ï¼Œå› ä¸ºå­æ ‘ä¸ç®¡åˆ æˆå•¥æ ·ï¼Œéƒ½è¦æ¥åˆ°çˆ¶èŠ‚ç‚¹ä¸Šã€‚

è€Œä¸”ï¼Œ[æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´äº†å¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’çˆ¶èŠ‚ç‚¹ä¼ é€’çš„æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å‰åºä½ç½®åˆ¤æ–­æ˜¯å¦å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„æ ¹èŠ‚ç‚¹ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-divide-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#è§£æ³•ä»£ç -6)

```python
class Solution:
    def __init__(self):
        self.delSet = set()
        # è®°å½•æ£®æ—çš„æ ¹èŠ‚ç‚¹
        self.res = []

    def delNodes(self, root, to_delete):
        if root is None:
            return []
        for d in to_delete:
            self.delSet.add(d)
        self.doDelete(root, False)
        return self.res

    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œåˆ é™¤ delSet ä¸­çš„èŠ‚ç‚¹ï¼Œè¿”å›åˆ é™¤å®Œæˆåçš„æ ¹èŠ‚ç‚¹
    def doDelete(self, root, hasParent):
        if root is None:
            return None
        # åˆ¤æ–­æ˜¯å¦éœ€è¦è¢«åˆ é™¤
        deleted = root.val in self.delSet
        if not deleted and not hasParent:
            # æ²¡æœ‰çˆ¶èŠ‚ç‚¹ä¸”ä¸éœ€è¦è¢«åˆ é™¤ï¼Œå°±æ˜¯ä¸€ä¸ªæ–°çš„æ ¹èŠ‚ç‚¹
            self.res.append(root)
        # å»å·¦å³å­æ ‘è¿›è¡Œåˆ é™¤
        root.left = self.doDelete(root.left, not deleted)
        root.right = self.doDelete(root.right, not deleted)
        # å¦‚æœéœ€è¦è¢«åˆ é™¤ï¼Œè¿”å› null ç»™çˆ¶èŠ‚ç‚¹
        return None if deleted else root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-i/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_delete-nodes-and-return-forest" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_delete-nodes-and-return-forest" src="https://labuladong.online/algo-visualize/leetcode/delete-nodes-and-return-forest/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [æŠ€å·§ä¸€](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#æŠ€å·§ä¸€)

ç±»ä¼¼äºåˆ¤æ–­é•œåƒäºŒå‰æ ‘ã€ç¿»è½¬äºŒå‰æ ‘çš„é—®é¢˜ï¼Œä¸€èˆ¬ä¹Ÿå¯ä»¥ç”¨åˆ†è§£é—®é¢˜çš„æ€è·¯ï¼Œæ— éå°±æ˜¯æŠŠæ•´æ£µæ ‘çš„é—®é¢˜ï¼ˆåŸé—®é¢˜ï¼‰åˆ†è§£æˆå­æ ‘ä¹‹é—´çš„é—®é¢˜ï¼ˆå­é—®é¢˜ï¼‰ã€‚

## [100. ç›¸åŒçš„æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#slug_same-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">100. ç›¸åŒçš„æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/same-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/same-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">p</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">q</code><span>&nbsp;</span>ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ£€éªŒè¿™ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœä¸¤ä¸ªæ ‘åœ¨ç»“æ„ä¸Šç›¸åŒï¼Œå¹¶ä¸”èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/12/20/ex1.jpg" style="max-width: 100%; width: 622px; height: 182px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>p = [1,2,3], q = [1,2,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/12/20/ex2.jpg" style="max-width: 100%; width: 382px; height: 182px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>p = [1,2], q = [1,null,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/12/20/ex3.jpg" style="max-width: 100%; width: 622px; height: 182px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>p = [1,2,1], q = [1,1,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä¸¤æ£µæ ‘ä¸Šçš„èŠ‚ç‚¹æ•°ç›®éƒ½åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 100]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 10<sup>4</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/same-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 100. ç›¸åŒçš„æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼ã€‚

åˆ¤æ–­ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒï¼Œå¯ä»¥åˆ†è§£ä¸ºåˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸åŒï¼Œç„¶ååˆ¤æ–­å·¦å³å­æ ‘çš„èŠ‚ç‚¹æ˜¯å¦éƒ½ç›¸åŒã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#è§£æ³•ä»£ç )

```python
class Solution:
    # å®šä¹‰ï¼šè¾“å…¥ä¸¤ä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿”å›ä»¥å®ƒä»¬ä¸ºæ ¹çš„ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç›¸åŒ
    def isSameTree(self, p: TreeNode, q: TreeNode) -> bool:
        # åˆ¤æ–­ä¸€å¯¹èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ
        if p is None and q is None:
            return True
        if p is None or q is None:
            return False
        if p.val != q.val:
            return False
        # åˆ¤æ–­å…¶ä»–èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ
        return self.isSameTree(p.left, q.left) and self.isSameTree(p.right, q.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_same-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_same-tree" src="https://labuladong.online/algo-visualize/leetcode/same-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [572. å¦ä¸€æ£µæ ‘çš„å­æ ‘ ğŸŸ¢](https://leetcode.cn/problems/subtree-of-another-tree)

## [101. å¯¹ç§°äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#slug_symmetric-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">101. å¯¹ç§°äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/symmetric-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/symmetric-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/1698026966-JDYPDU-image.png" style="max-width: 100%; width: 354px; height: 291px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,2,3,4,4,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/1698027008-nPFLbM-image.png" style="max-width: 100%; width: 308px; height: 258px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,2,null,3,null,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;"><strong style="font-weight: 600;">è¿›é˜¶ï¼š</strong>ä½ å¯ä»¥è¿ç”¨é€’å½’å’Œè¿­ä»£ä¸¤ç§æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</p></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/symmetric-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 101. å¯¹ç§°äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼ã€‚

è¿™é“é¢˜æœ‰ç‚¹åƒ [100.ç›¸åŒçš„æ ‘](https://leetcode.cn/problems/same-tree)ï¼Œä½ å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ä¸¤é“é¢˜çš„ä»£ç ï¼Œ**åªä¸è¿‡æœ¬é¢˜ä¸æ˜¯è®©ä½ æ¯”è¾ƒä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒï¼Œè€Œæ˜¯è®©ä½ æ¯”è¾ƒä¸¤æ£µå­æ ‘æ˜¯å¦å¯¹ç§°**ã€‚

é‚£ä¹ˆåˆ†è§£é—®é¢˜çš„æ€è·¯å°±å¾ˆæ˜æ˜¾äº†ï¼Œåˆ¤æ–­ä¸¤æ£µæ ‘æ˜¯å¦é•œåƒå¯¹ç§°ï¼Œåªè¦åˆ¤æ–­ä¸¤æ£µå­æ ‘éƒ½æ˜¯é•œåƒå¯¹ç§°çš„å°±è¡Œäº†ã€‚

å¦‚æœç”¨è¿­ä»£çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ BFS å±‚åºéå†ï¼ŒæŠŠæ¯ä¸€å±‚çš„èŠ‚ç‚¹æ±‚å‡ºæ¥ï¼Œç„¶åç”¨å·¦å³åŒæŒ‡é’ˆåˆ¤æ–­æ¯ä¸€å±‚æ˜¯å¦æ˜¯å¯¹ç§°çš„ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def isSymmetric(self, root: TreeNode) -> bool:
        if root is None:
            return True
        # æ£€æŸ¥ä¸¤æ£µå­æ ‘æ˜¯å¦å¯¹ç§°
        return self.check(root.left, root.right)

    # å®šä¹‰ï¼šåˆ¤æ–­è¾“å…¥çš„ä¸¤æ£µæ ‘æ˜¯å¦æ˜¯é•œåƒå¯¹ç§°çš„
    def check(self, left: TreeNode, right: TreeNode) -> bool:
        if left is None or right is None:
            return left == right
        # ä¸¤ä¸ªæ ¹èŠ‚ç‚¹éœ€è¦ç›¸åŒ
        if left.val != right.val:
            return False
        # å·¦å³å­æ ‘ä¹Ÿéœ€è¦é•œåƒå¯¹ç§°
        return self.check(left.right, right.left) and self.check(left.left, right.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_symmetric-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_symmetric-tree" src="https://labuladong.online/algo-visualize/leetcode/symmetric-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer 28. å¯¹ç§°çš„äºŒå‰æ ‘ ğŸŸ¢](https://leetcode.cn/problems/dui-cheng-de-er-cha-shu-lcof)

## [951. ç¿»è½¬ç­‰ä»·äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#slug_flip-equivalent-binary-trees)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">951. ç¿»è½¬ç­‰ä»·äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/flip-equivalent-binary-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/flip-equivalent-binary-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">æˆ‘ä»¬å¯ä»¥ä¸ºäºŒå‰æ ‘<span>&nbsp;</span><strong style="font-weight: 600;">T</strong><span>&nbsp;</span>å®šä¹‰ä¸€ä¸ª&nbsp;<strong style="font-weight: 600;">ç¿»è½¬æ“ä½œ&nbsp;</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šé€‰æ‹©ä»»æ„èŠ‚ç‚¹ï¼Œç„¶åäº¤æ¢å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">åªè¦ç»è¿‡ä¸€å®šæ¬¡æ•°çš„ç¿»è½¬æ“ä½œåï¼Œèƒ½ä½¿<span>&nbsp;</span><strong style="font-weight: 600;">X</strong><span>&nbsp;</span>ç­‰äº<span>&nbsp;</span><strong style="font-weight: 600;">Y</strong>ï¼Œæˆ‘ä»¬å°±ç§°äºŒå‰æ ‘<span>&nbsp;</span><strong style="font-weight: 600;">X</strong><span>&nbsp;</span><em>ç¿»è½¬ ç­‰ä»·&nbsp;</em>äºäºŒå‰æ ‘<span>&nbsp;</span><strong style="font-weight: 600;">Y</strong>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿™äº›æ ‘ç”±æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root1</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root2</code>&nbsp;ç»™å‡ºã€‚å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘æ˜¯å¦æ˜¯<em>ç¿»è½¬ ç­‰ä»·&nbsp;</em>çš„å‡½æ•°ï¼Œåˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="Flipped Trees Diagram" src="https://labuladong.online/algo/images/lc/uploads/2018/11/29/tree_ex.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [1,2,3,4,5,6,null,null,null,7,8], root2 = [1,3,2,null,6,4,5,null,null,null,null,8,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æˆ‘ä»¬ç¿»è½¬å€¼ä¸º 1ï¼Œ3 ä»¥åŠ 5 çš„ä¸‰ä¸ªèŠ‚ç‚¹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹&nbsp;2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root1 = [], root2 = []
<strong style="font-weight: 600;">è¾“å‡º:</strong> true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root1 = [], root2 = [1]
<strong style="font-weight: 600;">è¾“å‡º:</strong> false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ¯æ£µæ ‘èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 100]</code><span>&nbsp;</span>èŒƒå›´å†…</li><li>æ¯æ£µæ ‘ä¸­çš„æ¯ä¸ªå€¼éƒ½æ˜¯å”¯ä¸€çš„ã€åœ¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 99]</code>&nbsp;èŒƒå›´å†…çš„æ•´æ•°</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/flip-equivalent-binary-trees/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 951. ç¿»è½¬ç­‰ä»·äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#åŸºæœ¬æ€è·¯-2)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

å¦‚ä½•åˆ†è§£è¿™ä¸ªé—®é¢˜å‘¢ï¼ŸåŸé—®é¢˜æ˜¯ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦æ˜¯ç¿»è½¬ç­‰ä»·çš„ï¼Œåªè¦ä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹èƒ½å¤ŸåŒ¹é…ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥å»è€ƒå¯Ÿè¿™ä¸¤ä¸ªæ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼ˆå…±å››æ£µï¼‰æ˜¯å¦æ˜¯ç¿»è½¬ç­‰ä»·çš„ã€‚

å¯¹å­æ ‘æŠŠç¿»è½¬å’Œä¸ç¿»è½¬ä¸¤ç§æƒ…å†µå…¨éƒ½ç©·ä¸¾ä¸€éï¼Œåªè¦æœ‰ä¸€ç§æƒ…å†µèƒ½å¤ŸåŒ¹é…ï¼Œå°±è¯´æ˜æ•´æ£µæ ‘æ˜¯ç¿»è½¬ç­‰ä»·çš„ï¼Œå…·ä½“å®ç°è§ä»£ç ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#è§£æ³•ä»£ç -2)

```python
class Solution:
    # å®šä¹‰ï¼šè¾“å…¥ä¸¤æ£µäºŒå‰æ ‘ï¼Œåˆ¤æ–­è¿™ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦æ˜¯ç¿»è½¬ç­‰ä»·çš„
    def flipEquiv(self, root1: TreeNode, root2: TreeNode) -> bool:
        # åˆ¤æ–­ root1 å’Œ root2 ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦èƒ½å¤ŸåŒ¹é…
        if root1 is None and root2 is None:
            return True
        if root1 is None or root2 is None:
            return False
        if root1.val != root2.val:
            return False
        # æ ¹æ®å‡½æ•°å®šä¹‰ï¼Œåˆ¤æ–­å­æ ‘æ˜¯å¦èƒ½å¤ŸåŒ¹é…
        # ä¸ç¿»è½¬ã€ç¿»è½¬ä¸¤ç§æƒ…å†µæ»¡è¶³ä¸€ç§å³å¯ç®—æ˜¯åŒ¹é…
        return (
                # ä¸ç¿»è½¬å­æ ‘
                self.flipEquiv(root1.left, root2.left) and self.flipEquiv(root1.right, root2.right)
        ) or (
                # åè½¬å­æ ‘
                self.flipEquiv(root1.left, root2.right) and self.flipEquiv(root1.right, root2.left)
        )
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_flip-equivalent-binary-trees" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_flip-equivalent-binary-trees" src="https://labuladong.online/algo-visualize/leetcode/flip-equivalent-binary-trees/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [æŠ€å·§äºŒ](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#æŠ€å·§äºŒ)

ä¸€èˆ¬æ¥è¯´ï¼Œéå†çš„æ€ç»´æ¨¡å¼å¯ä»¥å¸®ä½ å¯»æ‰¾**ä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„**ç¬¦åˆæ¡ä»¶çš„ã€Œæ ‘æã€ï¼Œä½†åœ¨ä¸é™åˆ¶èµ·ç‚¹å¿…é¡»æ˜¯æ ¹èŠ‚ç‚¹çš„æ¡ä»¶ä¸‹ï¼Œè®©ä½ å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„ã€Œæ ‘æã€ï¼Œå°±éœ€è¦ç”¨åˆ°åˆ†è§£é—®é¢˜çš„æ€ç»´æ¨¡å¼äº†ã€‚

## [124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#slug_binary-tree-maximum-path-sum)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-maximum-path-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-maximum-path-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸ”´</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">äºŒå‰æ ‘ä¸­çš„<strong style="font-weight: 600;"><span>&nbsp;</span>è·¯å¾„</strong><span>&nbsp;</span>è¢«å®šä¹‰ä¸ºä¸€æ¡èŠ‚ç‚¹åºåˆ—ï¼Œåºåˆ—ä¸­æ¯å¯¹ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­<span>&nbsp;</span><strong style="font-weight: 600;">è‡³å¤šå‡ºç°ä¸€æ¬¡</strong><span>&nbsp;</span>ã€‚è¯¥è·¯å¾„<strong style="font-weight: 600;"><span>&nbsp;</span>è‡³å°‘åŒ…å«ä¸€ä¸ª<span>&nbsp;</span></strong>èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">è·¯å¾„å’Œ</strong><span>&nbsp;</span>æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¿”å›å…¶<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å¤§è·¯å¾„å’Œ</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/13/exx1.jpg" style="max-width: 100%; width: 322px; height: 182px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>6
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€ä¼˜è·¯å¾„æ˜¯ 2 -&gt; 1 -&gt; 3 ï¼Œè·¯å¾„å’Œä¸º 2 + 1 + 3 = 6</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/13/exx2.jpg" style="max-width: 100%;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [-10,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>42
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€ä¼˜è·¯å¾„æ˜¯ 15 -&gt; 20 -&gt; 7 ï¼Œè·¯å¾„å’Œä¸º 15 + 20 + 7 = 42
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 3 * 10<sup>4</sup>]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-maximum-path-sum/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

è¿™é¢˜éœ€è¦å·§ç”¨äºŒå‰æ ‘çš„ååºéå†ï¼Œå¯ä»¥å…ˆå»åšä¸€ä¸‹ [543. äºŒå‰æ ‘çš„ç›´å¾„](https://leetcode.cn/problems/diameter-of-binary-tree) å’Œ [366. å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹](https://leetcode.cn/problems/find-leaves-of-binary-tree)ã€‚

`oneSideMax` å‡½æ•°å’Œä¸Šè¿°å‡ é“é¢˜ä¸­éƒ½ç”¨åˆ°çš„ `maxDepth` å‡½æ•°éå¸¸ç±»ä¼¼ï¼Œåªä¸è¿‡ `maxDepth` è®¡ç®—æœ€å¤§æ·±åº¦ï¼Œ`oneSideMax` è®¡ç®—ã€Œå•è¾¹ã€æœ€å¤§è·¯å¾„å’Œï¼š

![img](124.png)

ç„¶ååœ¨ååºéå†çš„æ—¶å€™é¡ºä¾¿è®¡ç®—é¢˜ç›®è¦æ±‚çš„æœ€å¤§è·¯å¾„å’Œã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘ç”¨ã€Œåˆ†è§£é—®é¢˜ã€æ€ç»´è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#è§£æ³•ä»£ç -3)

```python
class Solution:
    def __init__(self):
        self.res = float('-inf')

    def maxPathSum(self, root: TreeNode) -> int:
        if root is None:
            return 0
        # è®¡ç®—å•è¾¹è·¯å¾„å’Œæ—¶é¡ºä¾¿è®¡ç®—æœ€å¤§è·¯å¾„å’Œ
        self.oneSideMax(root)
        return self.res

    # å®šä¹‰ï¼šè®¡ç®—ä»æ ¹èŠ‚ç‚¹ root ä¸ºèµ·ç‚¹çš„æœ€å¤§å•è¾¹è·¯å¾„å’Œ
    def oneSideMax(self, root: TreeNode) -> int:
        if root is None:
            return 0
        left_max_sum = max(0, self.oneSideMax(root.left))
        right_max_sum = max(0, self.oneSideMax(root.right))
        # ååºéå†ä½ç½®ï¼Œé¡ºä¾¿æ›´æ–°æœ€å¤§è·¯å¾„å’Œ
        path_max_sum = root.val + left_max_sum + right_max_sum
        self.res = max(self.res, path_max_sum)
        # å®ç°å‡½æ•°å®šä¹‰ï¼Œå·¦å³å­æ ‘çš„æœ€å¤§å•è¾¹è·¯å¾„å’ŒåŠ ä¸Šæ ¹èŠ‚ç‚¹çš„å€¼
        # å°±æ˜¯ä»æ ¹èŠ‚ç‚¹ root ä¸ºèµ·ç‚¹çš„æœ€å¤§å•è¾¹è·¯å¾„å’Œ
        return max(left_max_sum, right_max_sum) + root.val
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-divide-ii/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_binary-tree-maximum-path-sum" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-maximum-path-sum" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-maximum-path-sum/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 051. èŠ‚ç‚¹ä¹‹å’Œæœ€å¤§çš„è·¯å¾„ ğŸ”´](https://leetcode.cn/problems/jC7MId)

# ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜

## [559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_maximum-depth-of-n-ary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/maximum-depth-of-n-ary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/maximum-depth-of-n-ary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œæ‰¾åˆ°å…¶æœ€å¤§æ·±åº¦ã€‚</p><p class="MachineTrans-lang-zh-CN" style="line-height: 1.6; overflow-wrap: break-word;">æœ€å¤§æ·±åº¦æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ€»æ•°ã€‚</p><p class="MachineTrans-lang-zh-CN" style="line-height: 1.6; overflow-wrap: break-word;">N å‰æ ‘è¾“å…¥æŒ‰å±‚åºéå†åºåˆ—åŒ–è¡¨ç¤ºï¼Œæ¯ç»„å­èŠ‚ç‚¹ç”±ç©ºå€¼åˆ†éš”ï¼ˆè¯·å‚è§ç¤ºä¾‹ï¼‰ã€‚</p><p class="MachineTrans-lang-zh-CN" style="line-height: 1.6; overflow-wrap: break-word;"></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2018/10/12/narytreeexample.png" style="max-width: 300px; width: 300px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,3,2,4,null,5,6]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/11/08/sample_4_964.png" style="max-width: 100%; width: 296px; height: 241px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,2,3,4,5,null,null,6,7,null,8,null,9,10,null,null,11,null,12,null,13,null,null,14]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>5
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘çš„æ·±åº¦ä¸ä¼šè¶…è¿‡<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1000</code><span>&nbsp;</span>ã€‚</li><li>æ ‘çš„èŠ‚ç‚¹æ•°ç›®ä½äº<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 10<sup>4</sup>]</code><span>&nbsp;</span>ä¹‹é—´ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-depth-of-n-ary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œæˆ‘æŠŠä¸¤ç§è§£æ³•éƒ½å†™ä¸€ä¸‹ã€‚

å¯ä»¥å¯¹ç…§ [104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.cn/problems/maximum-depth-of-binary-tree) é¢˜çš„è§£æ³•ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç )

```python
# åˆ†è§£é—®é¢˜çš„æ€è·¯
class Solution:
    def maxDepth(self, root: 'Node') -> int:
        if root is None:
            return 0
        subTreeMaxDepth = 0
        for child in root.children:
            subTreeMaxDepth = max(subTreeMaxDepth, self.maxDepth(child))
        return 1 + subTreeMaxDepth

# éå†çš„æ€è·¯
class Solution2:
    def __init__(self):
        # è®°å½•é€’å½’éå†åˆ°çš„æ·±åº¦
        self.depth = 0
        # è®°å½•æœ€å¤§çš„æ·±åº¦
        self.res = 0

    def maxDepth(self, root: 'Node') -> int:
        self.traverse(root)
        return self.res

    def traverse(self, root: 'Node'):
        if root is None:
            return
        # å‰åºéå†ä½ç½®
        self.depth += 1
        self.res = max(self.res, self.depth)

        for child in root.children:
            self.traverse(child)
        # ååºéå†ä½ç½®
        self.depth -= 1
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_maximum-depth-of-n-ary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_maximum-depth-of-n-ary-tree" src="https://labuladong.online/algo-visualize/leetcode/maximum-depth-of-n-ary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [112. è·¯å¾„æ€»å’Œ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_path-sum)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">112. è·¯å¾„æ€»å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/path-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/path-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">targetSum</code><span>&nbsp;</span>ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨<span>&nbsp;</span><strong style="font-weight: 600;">æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹</strong><span>&nbsp;</span>çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">targetSum</code><span>&nbsp;</span>ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ï¼›å¦åˆ™ï¼Œè¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">å¶å­èŠ‚ç‚¹</strong><span>&nbsp;</span>æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/18/pathsum1.jpg" style="max-width: 100%; width: 500px; height: 356px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,4,8,11,null,13,4,7,2,null,null,null,1], targetSum = 22
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç­‰äºç›®æ ‡å’Œçš„æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹è·¯å¾„å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/18/pathsum2.jpg" style="max-width: 100%;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3], targetSum = 5
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ ‘ä¸­å­˜åœ¨ä¸¤æ¡æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼š
(1 --&gt; 2): å’Œä¸º 3
(1 --&gt; 3): å’Œä¸º 4
ä¸å­˜åœ¨ sum = 5 çš„æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [], targetSum = 0
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç”±äºæ ‘æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 5000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= targetSum &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/path-sum/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 112. è·¯å¾„æ€»å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æˆ‘çš„åˆ·é¢˜ç»éªŒæ€»ç»“](https://labuladong.online/algo/essential-technique/algorithm-summary/) è¯´è¿‡ï¼ŒäºŒå‰æ ‘çš„éå†ä»£ç æ˜¯åŠ¨æ€è§„åˆ’å’Œå›æº¯ç®—æ³•çš„ç¥–å®—ã€‚

[åŠ¨æ€è§„åˆ’](https://labuladong.online/algo/essential-technique/dynamic-programming-framework/) çš„å…³é”®åœ¨äºæ˜ç¡®é€’å½’å‡½æ•°çš„å®šä¹‰ï¼ŒæŠŠç”¨å­é—®é¢˜çš„ç»“æœæ¨å¯¼å‡ºå¤§é—®é¢˜çš„ç»“æœã€‚

[å›æº¯ç®—æ³•](https://labuladong.online/algo/essential-technique/backtrack-framework/) å°±ç®€å•ç²—æš´å¤šäº†ï¼Œå°±æ˜¯å•çº¯çš„éå†å›æº¯æ ‘ã€‚

ä¸‹é¢ç»™å‡ºä¸¤ç§æ€è·¯ä¸‹çš„è§£æ³•ï¼Œè¯·ä»”ç»†ä½“ä¼šã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç -1)

```python
class Solution:
    # è§£æ³•ä¸€ã€åˆ†è§£é—®é¢˜çš„æ€è·¯
    # å®šä¹‰ï¼šè¾“å…¥ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿”å›è¯¥æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ä¸€æ¡å’Œä¸º targetSum çš„è·¯å¾„
    def hasPathSum(self, root: TreeNode, targetSum: int) -> bool:
        # base case
        if root is None:
            return False
        # root.left == root.right ç­‰åŒäº root.left == null && root.right == null
        if root.left == root.right and root.val == targetSum:
            return True

        return self.hasPathSum(root.left, targetSum - root.val) or self.hasPathSum(root.right, targetSum - root.val)

    # è§£æ³•äºŒã€éå†äºŒå‰æ ‘çš„æ€è·¯
    # è®°å½•éå†è¿‡ç¨‹ä¸­çš„è·¯å¾„å’Œ
    def hasPathSum_2(self, root: TreeNode, targetSum: int) -> bool:
        if root is None:
            return False
        self.target = targetSum
        self.found = False
        self.curSum = 0
        self.traverse(root)
        return self.found

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root: TreeNode) -> None:
        if root is None:
            return
        # å‰åºéå†ä½ç½®
        self.curSum += root.val
        if root.left is None and root.right is None:
            if self.curSum == self.target:
                self.found = True

        self.traverse(root.left)
        self.traverse(root.right)

        # ååºéå†ä½ç½®
        self.curSum -= root.val
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_path-sum" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_path-sum" src="https://labuladong.online/algo-visualize/leetcode/path-sum/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [113. è·¯å¾„æ€»å’Œ II](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_path-sum-ii)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">113. è·¯å¾„æ€»å’Œ II</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/path-sum-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/path-sum-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">targetSum</code><span>&nbsp;</span>ï¼Œæ‰¾å‡ºæ‰€æœ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹</strong><span>&nbsp;</span>è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">å¶å­èŠ‚ç‚¹</strong><span>&nbsp;</span>æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><div class="original__bRMd"><div><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/18/pathsumii1.jpg" style="max-width: 100%; width: 500px; height: 356px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[5,4,11,2],[5,8,4,5]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/01/18/pathsum2.jpg" style="max-width: 100%; width: 212px; height: 181px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3], targetSum = 5
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2], targetSum = 0
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ€»æ•°åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 5000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= targetSum &lt;= 1000</code></li></ul></div></div></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/path-sum-ii/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 113. è·¯å¾„æ€»å’Œ II</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯-2)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜å¯ä»¥åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´ã€‚

éå†çš„æ€ç»´å¾ˆç®€å•ï¼Œåªè¦éå†ä¸€éäºŒå‰æ ‘ï¼Œå°±å¯ä»¥æŠŠæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è·¯å¾„æ‰¾å‡ºæ¥ã€‚ä¸ºäº†ç»´æŠ¤ç»è¿‡çš„è·¯å¾„ï¼Œåœ¨è¿›å…¥é€’å½’çš„æ—¶å€™è¦åœ¨ `path` åˆ—è¡¨æ·»åŠ èŠ‚ç‚¹ï¼Œç»“æŸé€’å½’çš„æ—¶å€™åˆ é™¤èŠ‚ç‚¹ï¼Œç±»ä¼¼ [å›æº¯ç®—æ³•](https://labuladong.online/algo/essential-technique/backtrack-framework/)ã€‚

åˆ†è§£é—®é¢˜çš„æ€è·¯ä¹Ÿä¸éš¾ï¼Œä½ è®¡ç®—ä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­å’Œä¸º `sum` çš„è·¯å¾„ï¼Œä¸å°±å¯ä»¥åˆ†è§£æˆè®¡ç®—ä»¥ `root.left, root.right` ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­æ‰€æœ‰å’Œä¸º `sum - root.val` çš„è·¯å¾„ï¼Œç„¶åå†åŠ ä¸Š `root` èŠ‚ç‚¹å—ï¼Ÿ

æˆ‘è¿™é‡ŒåŒæ—¶å†™å‡ºäº†éå†æ€è·¯å’Œåˆ†è§£é—®é¢˜æ€è·¯çš„è§£æ³•ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç -2)

```python
from typing import List, Optional
from collections import deque

class Solution:
    def __init__(self):
        self.res = []

    def pathSum(self, root: Optional[TreeNode], sum: int) -> List[List[int]]:
        if root is None:
            return self.res
        self.traverse(root, sum, deque())
        return self.res

    # éå†äºŒå‰æ ‘
    def traverse(self, root: Optional[TreeNode], sum: int, path: deque) -> None:
        if root is None:
            return

        remain = sum - root.val

        if root.left is None and root.right is None:
            if remain == 0:
                # æ‰¾åˆ°ä¸€æ¡è·¯å¾„
                path.append(root.val)
                self.res.append(list(path))
                path.pop()
            return

        # ç»´æŠ¤è·¯å¾„åˆ—è¡¨
        path.append(root.val)
        self.traverse(root.left, remain, path)
        path.pop()

        path.append(root.val)
        self.traverse(root.right, remain, path)
        path.pop()

# åˆ†è§£é—®é¢˜çš„æ€ç»´æ¨¡å¼
class Solution2:
    def pathSum(self, root: Optional[TreeNode], targetSum: int) -> List[List[int]]:
        self.res = []
        if root is None:
            return self.res
        
        # å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹å¹¶ä¸”å€¼ç­‰äº targetSumï¼Œåˆ™æ‰¾åˆ°ä¸€æ¡è·¯å¾„
        if root.left is None and root.right is None and root.val == targetSum:
            return [[root.val]]

        # åˆ†åˆ«é€’å½’å·¦å³å­æ ‘ï¼Œæ‰¾åˆ°å­æ ‘ä¸­å’Œä¸º targetSum - root.val çš„è·¯å¾„
        left_answers = self.pathSum(root.left, targetSum - root.val)
        right_answers = self.pathSum(root.right, targetSum - root.val)

        # å·¦å³å­æ ‘çš„è·¯å¾„åŠ ä¸Šæ ¹èŠ‚ç‚¹ï¼Œå°±æ˜¯å’Œä¸º targetSum çš„è·¯å¾„
        for answer in left_answers:
            # å› ä¸ºåº•å±‚ä½¿ç”¨çš„æ˜¯ LinkedListï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œçš„å¤æ‚åº¦æ˜¯ O(1)
            answer.insert(0, root.val)
            self.res.append(answer)
        
        for answer in right_answers:
            # å› ä¸ºåº•å±‚ä½¿ç”¨çš„æ˜¯ LinkedListï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œçš„å¤æ‚åº¦æ˜¯ O(1)
            answer.insert(0, root.val)
            self.res.append(answer)

        return self.res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_path-sum-ii" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_path-sum-ii" src="https://labuladong.online/algo-visualize/leetcode/path-sum-ii/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1430. åˆ¤æ–­ç»™å®šçš„åºåˆ—æ˜¯å¦æ˜¯äºŒå‰æ ‘ä»æ ¹åˆ°å¶çš„è·¯å¾„ ğŸŸ ](https://leetcode.cn/problems/check-if-a-string-is-a-valid-sequence-from-root-to-leaves-path-in-a-binary-tree)
- [666. è·¯å¾„æ€»å’Œ IV ğŸŸ ](https://leetcode.cn/problems/path-sum-iv)
- [å‰‘æŒ‡ Offer 34. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„ ğŸŸ ](https://leetcode.cn/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof)

## [617. åˆå¹¶äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_merge-two-binary-trees)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">617. åˆå¹¶äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/merge-two-binary-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/merge-two-binary-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root1</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root2</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œ<strong style="font-weight: 600;">ä¸ä¸º</strong><span>&nbsp;</span>null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æ³¨æ„:</strong><span>&nbsp;</span>åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/05/merge.jpg" style="max-width: 100%; height: 163px; width: 600px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [1,3,2,5], root2 = [2,1,3,null,4,null,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[3,4,5,5,4,null,7]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [1], root2 = [1,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2,2]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä¸¤æ£µæ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 2000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 10<sup>4</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/merge-two-binary-trees/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 617. åˆå¹¶äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜å¯ä»¥åŒæ—¶ç”¨åˆ°ä¸¤ç§æ€ç»´æ¨¡å¼ã€‚

è™½ç„¶è¾“å…¥çš„æ˜¯ä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä½†å®ƒä»¬çš„æ“ä½œæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åšæ˜¯åœ¨éå† `root1` è¿™ä¸€æ£µäºŒå‰æ ‘ï¼Œé¡ºä¾¿æŠŠ `root2` çš„èŠ‚ç‚¹åˆå¹¶è¿‡æ¥ã€‚ä¸‹é¢æˆ‘ç»™å‡ºä¸¤ç§æ€ç»´æ¨¡å¼çš„è§£æ³•ä»£ç ï¼Œå…·ä½“çœ‹æ³¨é‡Šå§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç -3)

```python
class Solution:
    # åˆ†è§£é—®é¢˜çš„æ€ç»´æ¨¡å¼
    # å®šä¹‰ï¼šè¾“å…¥ä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›åˆå¹¶åçš„æ ‘çš„æ ¹èŠ‚ç‚¹
    def mergeTrees(self, root1: TreeNode, root2: TreeNode) -> TreeNode:
        # å¦‚æœä¸€æ£µæ ‘éç©ºï¼Œé‚£ä¹ˆåˆå¹¶åå°±æ˜¯å¦ä¸€æ£µæ ‘
        if root1 is None:
            return root2
        if root2 is None:
            return root1
        # ä¸¤æ£µæ ‘éƒ½æœ‰çš„èŠ‚ç‚¹ï¼Œå åŠ èŠ‚ç‚¹å€¼
        root1.val += root2.val
        # åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œå­æ ‘åˆå¹¶åæ¥åˆ°
        root1.left = self.mergeTrees(root1.left, root2.left)
        root1.right = self.mergeTrees(root1.right, root2.right)
        return root1


class Solution2:

    # éå†çš„æ€ç»´æ¨¡å¼
    def mergeTrees(self, root1: TreeNode, root2: TreeNode) -> TreeNode:
        if root1 is None:
            return root2
        # éå† root1ï¼Œé¡ºä¾¿æŠŠ root2 çš„èŠ‚ç‚¹åˆå¹¶è¿‡æ¥
        self.traverse(root1, root2)
        return root1

    def traverse(self, root1: TreeNode, root2: TreeNode):
        if root1 is None or root2 is None:
            return
        if root1 is not None and root2 is not None:
            # ä¸¤æ£µæ ‘éƒ½æœ‰çš„èŠ‚ç‚¹ï¼Œå åŠ èŠ‚ç‚¹å€¼
            root1.val += root2.val
        # å¦‚æœ root1 æ²¡æœ‰å­æ ‘è€Œ root2 æœ‰ï¼Œé‚£ä¹ˆå°±æŠŠ root2 çš„å­æ ‘æ¥åˆ° root1 ä¸Š
        # æ³¨æ„æ¥å®Œä¹‹åæŠŠ root2 çš„å­æ ‘ç½®ä¸º nullï¼Œå…å¾—é”™è¯¯è®¡ç®—èŠ‚ç‚¹ç´¯åŠ å€¼
        if root1.left is None and root2.left is not None:
            root1.left = root2.left
            root2.left = None
        if root1.right is None and root2.right is not None:
            root1.right = root2.right
            root2.right = None
        # é€’å½’éå†å·¦å³å­èŠ‚ç‚¹ï¼Œroot2 çš„èŠ‚ç‚¹ä¹Ÿè·Ÿç€åŒæ­¥ç§»åŠ¨
        self.traverse(root1.left, root2.left)
        self.traverse(root1.right, root2.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_merge-two-binary-trees" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_merge-two-binary-trees" src="https://labuladong.online/algo-visualize/leetcode/merge-two-binary-trees/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [897. é€’å¢é¡ºåºæœç´¢æ ‘](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_increasing-order-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">897. é€’å¢é¡ºåºæœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/increasing-order-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/increasing-order-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æœç´¢æ ‘çš„&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ï¼Œè¯·ä½ <span>&nbsp;</span><strong style="font-weight: 600;">æŒ‰ä¸­åºéå†</strong><span>&nbsp;</span>å°†å…¶é‡æ–°æ’åˆ—ä¸ºä¸€æ£µé€’å¢é¡ºåºæœç´¢æ ‘ï¼Œä½¿æ ‘ä¸­æœ€å·¦è¾¹çš„èŠ‚ç‚¹æˆä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹æ²¡æœ‰å·¦å­èŠ‚ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªå³å­èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/11/17/ex1.jpg" style="max-width: 100%; height: 350px; width: 600px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,3,6,2,4,null,8,1,null,null,null,7,9]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,2,null,3,null,4,null,5,null,6,null,7,null,8,null,9]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/11/17/ex2.jpg" style="max-width: 100%; height: 114px; width: 300px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,1,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,5,null,7]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°çš„å–å€¼èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 100]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/increasing-order-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 897. é€’å¢é¡ºåºæœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯-4)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜å¯ä»¥åŒæ—¶ç”¨åˆ°ä¸¤ç§æ€ç»´æ¨¡å¼ã€‚

ã€Œéå†ã€çš„è¯å¾ˆç®€å•ï¼Œä½ å¯¹ BST åšä¸­åºéå†ï¼Œå…¶ç»“æœå°±æ˜¯æœ‰åºçš„ï¼Œé‡æ–°æ„é€ å‡ºé¢˜ç›®è¦æ±‚çš„è¿™ä¸ªç±»ä¼¼é“¾è¡¨çš„äºŒå‰æ ‘å³å¯ã€‚

ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€è·¯ä¹Ÿä¸éš¾ï¼Œä½ åªè¦åšè¿‡ [114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨](https://leetcode.cn/problems/flatten-binary-tree-to-linked-list) è¿™é“é¢˜ï¼Œç¨å¾®æ”¹ä¸‹è§£æ³•å°±å¯ä»¥è§£å†³è¿™é“é¢˜äº†ï¼Œæ˜ç¡® `increasingBST` çš„å®šä¹‰ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªå®šä¹‰è¿›è¡Œæ“ä½œå³å¯ã€‚

è¿™é‡Œæˆ‘ç»™å‡ºåˆ†è§£é—®é¢˜çš„è§£æ³•æ€è·¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç -4)

```python
# è¾“å…¥ä¸€æ£µ BSTï¼Œè¿”å›ä¸€ä¸ªæœ‰åºã€Œé“¾è¡¨ã€
class Solution:
    def increasingBST(self, root: TreeNode) -> TreeNode:
        if root is None:
            return None
        # å…ˆæŠŠå·¦å³å­æ ‘æ‹‰å¹³
        left = self.increasingBST(root.left)
        root.left = None
        right = self.increasingBST(root.right)
        root.right = right
        # å·¦å­æ ‘ä¸ºç©ºçš„è¯ï¼Œå°±ä¸ç”¨å¤„ç†äº†
        if left is None:
            return root
        # å·¦å­æ ‘éç©ºï¼Œéœ€è¦æŠŠæ ¹èŠ‚ç‚¹å’Œå³å­æ ‘æ¥åˆ°å·¦å­æ ‘æœ«å°¾
        p = left
        while p is not None and p.right is not None:
            p = p.right
        p.right = root

        return left
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_increasing-order-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_increasing-order-search-tree" src="https://labuladong.online/algo-visualize/leetcode/increasing-order-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 052. å±•å¹³äºŒå‰æœç´¢æ ‘ ğŸŸ¢](https://leetcode.cn/problems/NYBBNL)

## [938. äºŒå‰æœç´¢æ ‘çš„èŒƒå›´å’Œ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_range-sum-of-bst)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">938. äºŒå‰æœç´¢æ ‘çš„èŒƒå›´å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/range-sum-of-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/range-sum-of-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šäºŒå‰æœç´¢æ ‘çš„æ ¹ç»“ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼Œè¿”å›å€¼ä½äºèŒƒå›´<span>&nbsp;</span><em><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[low, high]</code></em><span>&nbsp;</span>ä¹‹é—´çš„æ‰€æœ‰ç»“ç‚¹çš„å€¼çš„å’Œã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/11/05/bst1.jpg" style="max-width: 100%; width: 400px; height: 222px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [10,5,15,3,7,null,18], low = 7, high = 15
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>32
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/11/05/bst2.jpg" style="max-width: 100%; width: 400px; height: 335px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [10,5,15,3,7,13,18,1,null,6], low = 6, high = 10
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>23
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 2 * 10<sup>4</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 10<sup>5</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= low &lt;= high &lt;= 10<sup>5</sup></code></li><li>æ‰€æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code><span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/range-sum-of-bst/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 938. äºŒå‰æœç´¢æ ‘çš„èŒƒå›´å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯-5)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜å¯ä»¥åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§æ€ç»´æ¨¡å¼ã€‚

éå†çš„æ€è·¯å°±æ˜¯å•çº¯ç”¨ `traverse` å‡½æ•°éå†ä¸€é BSTï¼Œæ‰¾åˆ°è½åœ¨åŒºé—´çš„å…ƒç´ ã€‚åˆ†è§£é—®é¢˜çš„æ€è·¯å…³é”®æ˜¯è¦æ˜ç¡®å‡½æ•°å®šä¹‰ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªå®šä¹‰ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç -5)

```python
class Solution:
    # éå†çš„æ€è·¯
    def __init__(self):
        self.sum = 0

    def rangeSumBST(self, root: TreeNode, low: int, high: int) -> int:
        if root is None:
            return 0
        # éå†ä¸€é BST è®¡ç®—åŒºé—´å…ƒç´ å’Œ
        self.traverse(root, low, high)
        return self.sum

    def traverse(self, root: TreeNode, low: int, high: int):
        if root is None:
            return
        if root.val < low:
            # ç›®æ ‡åŒºé—´åœ¨å³å­æ ‘
            self.traverse(root.right, low, high)
        elif root.val > high:
            # ç›®æ ‡åŒºé—´åœ¨å·¦å­æ ‘
            self.traverse(root.left, low, high)
        else:
            # root.val è½åœ¨ç›®æ ‡åŒºé—´ï¼Œç´¯åŠ  sum
            self.sum += root.val
            # ç»§ç»­éå†å·¦å³å­æ ‘
            self.traverse(root.right, low, high)
            self.traverse(root.left, low, high)

class Solution2:
    # åˆ†è§£é—®é¢˜çš„æ€è·¯
    # å®šä¹‰ï¼šè¾“å…¥ä¸€ä¸ª BSTï¼Œè®¡ç®—å€¼è½åœ¨ [low, high] ä¹‹é—´çš„å…ƒç´ ä¹‹å’Œ
    def rangeSumBST(self, root: TreeNode, low: int, high: int) -> int:
        if root is None:
            return 0
        if root.val < low:
            # ç›®æ ‡åŒºé—´åœ¨å³å­æ ‘
            return self.rangeSumBST(root.right, low, high)
        elif root.val > high:
            # ç›®æ ‡åŒºé—´åœ¨å·¦å­æ ‘
            return self.rangeSumBST(root.left, low, high)
        else:
            # ä»¥ root ä¸ºæ ¹çš„è¿™æ£µ BST è½åœ¨ [low, high] ä¹‹é—´çš„å…ƒç´ ä¹‹å’Œï¼Œ
            # ç­‰äº root.val åŠ ä¸Šå·¦å³å­æ ‘è½åœ¨åŒºé—´çš„å…ƒç´ ä¹‹å’Œ
            return root.val + self.rangeSumBST(root.left, low, high) + self.rangeSumBST(root.right, low, high)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_range-sum-of-bst" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_range-sum-of-bst" src="https://labuladong.online/algo-visualize/leetcode/range-sum-of-bst/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1379. æ‰¾å‡ºå…‹éš†äºŒå‰æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#slug_find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1379. æ‰¾å‡ºå…‹éš†äºŒå‰æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼ŒåŸå§‹æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">original</code><span>&nbsp;</span>å’Œå…‹éš†æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cloned</code>ï¼Œä»¥åŠä¸€ä¸ªä½äºåŸå§‹æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">original</code>&nbsp;ä¸­çš„ç›®æ ‡èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å…¶ä¸­ï¼Œå…‹éš†æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cloned</code>&nbsp;æ˜¯åŸå§‹æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">original</code>&nbsp;çš„ä¸€ä¸ª<strong style="font-weight: 600;"><span>&nbsp;</span>å‰¯æœ¬<span>&nbsp;</span></strong>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·æ‰¾å‡ºåœ¨æ ‘&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cloned</code>&nbsp;ä¸­ï¼Œä¸&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;<strong style="font-weight: 600;">ç›¸åŒ&nbsp;</strong>çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›å¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆåœ¨ C/C++ ç­‰æœ‰æŒ‡é’ˆçš„è¯­è¨€ä¸­è¿”å› èŠ‚ç‚¹æŒ‡é’ˆï¼Œå…¶ä»–è¯­è¨€è¿”å›èŠ‚ç‚¹æœ¬èº«ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æ³¨æ„ï¼š</strong>ä½ <span>&nbsp;</span><strong style="font-weight: 600;">ä¸èƒ½</strong><span>&nbsp;</span>å¯¹ä¸¤æ£µäºŒå‰æ ‘ï¼Œä»¥åŠ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;èŠ‚ç‚¹è¿›è¡Œæ›´æ”¹ã€‚<strong style="font-weight: 600;">åªèƒ½</strong><span>&nbsp;</span>è¿”å›å¯¹å…‹éš†æ ‘&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">cloned</code>&nbsp;ä¸­å·²æœ‰çš„èŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"></ul><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/02/21/e1.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> tree = [7,4,3,null,null,6,19], target = 3
<strong style="font-weight: 600;">è¾“å‡º:</strong> 3
<strong style="font-weight: 600;">è§£é‡Š:</strong> ä¸Šå›¾ç”»å‡ºäº†æ ‘ original å’Œ clonedã€‚target èŠ‚ç‚¹åœ¨æ ‘ original ä¸­ï¼Œç”¨ç»¿è‰²æ ‡è®°ã€‚ç­”æ¡ˆæ˜¯æ ‘ cloned ä¸­çš„é»„é¢œè‰²çš„èŠ‚ç‚¹ï¼ˆå…¶ä»–ç¤ºä¾‹ç±»ä¼¼ï¼‰ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/02/21/e2.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> tree = [7], target =  7
<strong style="font-weight: 600;">è¾“å‡º:</strong> 7
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/02/21/e3.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> tree = [8,null,6,null,5,null,4,null,3,null,2,null,1], target = 4
<strong style="font-weight: 600;">è¾“å‡º:</strong> 4
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡èŒƒå›´ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>&nbsp;ã€‚</li><li>åŒä¸€æ£µæ ‘ä¸­ï¼Œæ²¡æœ‰å€¼ç›¸åŒçš„èŠ‚ç‚¹ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;èŠ‚ç‚¹æ˜¯æ ‘&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">original</code>&nbsp;ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¸ä¼šæ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">null</code>&nbsp;ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;"><strong style="font-weight: 600;">è¿›é˜¶ï¼š</strong>å¦‚æœæ ‘ä¸­å…è®¸å‡ºç°å€¼ç›¸åŒçš„èŠ‚ç‚¹ï¼Œå°†å¦‚ä½•è§£ç­”ï¼Ÿ</p></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1379. æ‰¾å‡ºå…‹éš†äºŒå‰æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#åŸºæœ¬æ€è·¯-6)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜å¯ä»¥åŒæ—¶ç”¨åˆ°ä¸¤ç§æ€ç»´ã€‚

è¯´ç™½äº†ï¼Œè¿™é“é¢˜å°±æ˜¯è®©ä½ ä»ä¸€æ£µäºŒå‰æ ‘ä¸­æœç´¢ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œè€ƒè™‘åˆ°é¢˜ç›®çš„ follow up é—®ä½ èŠ‚ç‚¹çš„å€¼å­˜åœ¨é‡å¤çš„æƒ…å†µï¼Œæ‰€ä»¥ç”¨å¯¹æ¯”èŠ‚ç‚¹å¼•ç”¨çš„æ–¹å¼è¿›è¡Œæ¯”è¾ƒã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åŒæ—¶è¿ç”¨ä¸¤ç§æ€ç»´è§£é¢˜](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#è§£æ³•ä»£ç -6)

```python
# éå†çš„æ€è·¯
class Solution:
    # å®šä¹‰ï¼šæ‰¾åˆ° original ä¸­ target èŠ‚ç‚¹åœ¨ cloned æ ‘ä¸­å¯¹åº”çš„èŠ‚ç‚¹
    def getTargetCopy(self, original: TreeNode, cloned: TreeNode, target: TreeNode) -> TreeNode:
        self.target = target
        self.res = None
        self.traverse(original, cloned)
        return self.res

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, original: TreeNode, cloned: TreeNode):
        if original is None or self.res is not None:
            return
        if original == self.target:
            self.res = cloned
            return
        # äºŒå‰æ ‘éå†æ¡†æ¶
        self.traverse(original.left, cloned.left)
        self.traverse(original.right, cloned.right)


# åˆ†è§£é—®é¢˜çš„æ€è·¯
class Solution2:
    # å®šä¹‰ï¼šæ‰¾åˆ° original ä¸­ target èŠ‚ç‚¹åœ¨ cloned æ ‘ä¸­å¯¹åº”çš„èŠ‚ç‚¹
    def getTargetCopy(self, original: TreeNode, cloned: TreeNode, target: TreeNode) -> TreeNode:
        if original is None:
            return None
        # æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹
        if target == original:
            return cloned
        # å»å·¦å­æ ‘æ‰¾
        left = self.getTargetCopy(original.left, cloned.left, target)
        if left is not None:
            return left
        # å·¦å­æ ‘æ‰¾ä¸åˆ°çš„è¯å»å³å­æ ‘æ‰¾
        return self.getTargetCopy(original.right, cloned.right, target)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-combine-two-view/#å¯è§†åŒ–-6)

<details data-v-ee1a9bd0="" id="div_find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree" src="https://labuladong.online/algo-visualize/leetcode/find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

# ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ I

æœ‰äº›é¢˜ç›®ï¼Œä½ æŒ‰ç…§æ‹è„‘è¢‹çš„æ–¹å¼å»åšï¼Œå¯èƒ½å‘ç°éœ€è¦åœ¨é€’å½’ä»£ç ä¸­è°ƒç”¨å…¶ä»–é€’å½’å‡½æ•°è®¡ç®—å­—æ•°çš„ä¿¡æ¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‡ºç°è¿™ç§æƒ…å†µæ—¶ä½ å¯ä»¥è€ƒè™‘ç”¨ååºéå†çš„æ€ç»´æ–¹å¼æ¥ä¼˜åŒ–ç®—æ³•ï¼Œåˆ©ç”¨ååºéå†ä¼ é€’å­æ ‘çš„ä¿¡æ¯ï¼Œé¿å…è¿‡é«˜çš„æ—¶é—´å¤æ‚åº¦ã€‚

åƒæ±‚å’Œã€æ±‚é«˜åº¦è¿™ç§åŸºæœ¬çš„äºŒå‰æ ‘å‡½æ•°å¾ˆå®¹æ˜“å†™ï¼Œæœ‰æ—¶å€™åªè¦åœ¨å®ƒä»¬çš„ååºä½ç½®æ·»åŠ ä¸€ç‚¹ä»£ç ï¼Œå°±èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆã€‚

---

## [110. å¹³è¡¡äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#slug_balanced-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">110. å¹³è¡¡äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/balanced-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/balanced-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯<span>&nbsp;</span><span data-keyword="height-balanced">å¹³è¡¡äºŒå‰æ ‘</span><span>&nbsp;</span>&nbsp;</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/06/balance_1.jpg" style="max-width: 100%; width: 342px; height: 221px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/06/balance_2.jpg" style="max-width: 100%; width: 452px; height: 301px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,2,3,3,null,null,4,4]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = []
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 5000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 10<sup>4</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/balanced-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 110. å¹³è¡¡äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#åŸºæœ¬æ€è·¯)

è¿™é‡Œè¦ç”¨åˆ°å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡çš„ååºä½ç½®çš„å¦™ç”¨ã€‚

ä¸€èˆ¬çš„æ‹è„‘è¢‹æ€è·¯æ˜¯ï¼Œéå†äºŒå‰æ ‘ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹è®¡ç®—å·¦å³çš„æœ€å¤§é«˜åº¦ã€‚

ä½†æ˜¯è®¡ç®—ä¸€æ£µäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ä¹Ÿéœ€è¦é€’å½’éå†è¿™æ£µæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¦‚æœå¯¹æ¯ä¸ªèŠ‚ç‚¹éƒ½ç®—ä¸€éæœ€å¤§æ·±åº¦ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯æ¯”è¾ƒé«˜çš„ã€‚

æ‰€ä»¥æœ€å¥½çš„è§£æ³•æ˜¯åè¿‡æ¥æ€è€ƒï¼Œåªè®¡ç®—ä¸€æ¬¡æœ€å¤§æ·±åº¦ï¼Œè®¡ç®—çš„è¿‡ç¨‹ä¸­åœ¨ååºéå†ä½ç½®é¡ºä¾¿åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦å¹³è¡¡ï¼š

å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œå…ˆç®—å‡ºæ¥å·¦å³å­æ ‘çš„æœ€å¤§é«˜åº¦ï¼Œç„¶ååœ¨ååºéå†çš„ä½ç½®æ ¹æ®å·¦å³å­æ ‘çš„æœ€å¤§é«˜åº¦åˆ¤æ–­å¹³è¡¡æ€§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#è§£æ³•ä»£ç )

```python
class Solution:
    def __init__(self):
        # è®°å½•äºŒå‰æ ‘æ˜¯å¦å¹³è¡¡
        self.balanced = True

    def isBalanced(self, root: TreeNode) -> bool:
        self.maxDepth(root)
        return self.balanced

    # è¾“å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦
    def maxDepth(self, root: TreeNode) -> int:
        if root is None:
            return 0
        # if not self.balanced:
        # éšä¾¿è¿”å›ä¸€ä¸ªå€¼å³å¯ï¼Œæ—¨åœ¨ç»“æŸé€’å½’
        #     return -666

        leftMaxDepth = self.maxDepth(root.left)
        rightMaxDepth = self.maxDepth(root.right)

        # ååºéå†ä½ç½®
        # å¦‚æœå·¦å³æœ€å¤§æ·±åº¦å¤§äº 1ï¼Œå°±ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘
        if abs(rightMaxDepth - leftMaxDepth) > 1:
            self.balanced = False

        return 1 + max(leftMaxDepth, rightMaxDepth)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_balanced-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_balanced-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/balanced-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [250. ç»Ÿè®¡åŒå€¼å­æ ‘ ğŸŸ ](https://leetcode.cn/problems/count-univalue-subtrees)
- [å‰‘æŒ‡ Offer 55 - II. å¹³è¡¡äºŒå‰æ ‘ ğŸŸ¢](https://leetcode.cn/problems/ping-heng-er-cha-shu-lcof)

## [508. å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­æ ‘å…ƒç´ å’Œ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#slug_most-frequent-subtree-sum)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">508. å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­æ ‘å…ƒç´ å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/most-frequent-subtree-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/most-frequent-subtree-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹ç»“ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ï¼Œè¯·è¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­æ ‘å…ƒç´ å’Œã€‚å¦‚æœæœ‰å¤šä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ç›¸åŒï¼Œè¿”å›æ‰€æœ‰å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­æ ‘å…ƒç´ å’Œï¼ˆä¸é™é¡ºåºï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¸€ä¸ªç»“ç‚¹çš„&nbsp;<strong style="font-weight: 600;">ã€Œå­æ ‘å…ƒç´ å’Œã€</strong>&nbsp;å®šä¹‰ä¸ºä»¥è¯¥ç»“ç‚¹ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å…ƒç´ ä¹‹å’Œï¼ˆåŒ…æ‹¬ç»“ç‚¹æœ¬èº«ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/04/24/freq1-tree.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [5,2,-3]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [2,-3,4]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹&nbsp;2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/04/24/freq2-tree.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [5,2,-5]
<b>è¾“å‡º:</b> [2]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>&nbsp;èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup>&nbsp;&lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/most-frequent-subtree-sum/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 508. å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­æ ‘å…ƒç´ å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ï¼ŒåŒæ—¶è¦åˆ©ç”¨ååºä½ç½®æ¥è®¡ç®—ç­”æ¡ˆã€‚

`sum` å‡½æ•°æ ¹æ®å­æ ‘çš„å…ƒç´ å’Œæ¨å¯¼å‡ºåŸæ ‘çš„æ‰€æœ‰å…ƒç´ å’Œï¼Œåªä¸è¿‡åœ¨ååºéå†ä½ç½®æ·»åŠ ä¸€äº›ç»Ÿè®¡å·¥ä½œï¼Œä¾¿äºæ‰¾å‡ºå‡ºç°é¢‘ç‡æœ€é«˜çš„å­æ ‘å’Œã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#è§£æ³•ä»£ç -1)

```python
class Solution:
    # sum -> count
    def __init__(self):
        self.sum_to_count = {}

    def findFrequentTreeSum(self, root):
        # traverse the binary tree and record all subtree sums and their frequencies
        self.sum(root)
        # find the highest frequency
        max_count = max(self.sum_to_count.values(), default=0)
        # find the subtree sums that have the highest frequency
        res = [key for key, count in self.sum_to_count.items() if count == max_count]
        # convert to a python list
        return res

    # definition: given a node, return the sum of all nodes in the subtree rooted at that node
    def sum(self, root):
        if not root:
            return 0
        left_sum = self.sum(root.left)
        right_sum = self.sum(root.right)
        res = root.val + left_sum + right_sum
        # postorder traversal position, record the frequency of the subtree sum
        self.sum_to_count[res] = self.sum_to_count.get(res, 0) + 1
        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_most-frequent-subtree-sum" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_most-frequent-subtree-sum" src="https://labuladong.online/algo-visualize/leetcode/most-frequent-subtree-sum/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [563. äºŒå‰æ ‘çš„å¡åº¦](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#slug_binary-tree-tilt)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">563. äºŒå‰æ ‘çš„å¡åº¦</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-tilt/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-tilt/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè®¡ç®—å¹¶è¿”å›<span>&nbsp;</span><strong style="font-weight: 600;">æ•´ä¸ªæ ‘<span>&nbsp;</span></strong>çš„å¡åº¦ ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¸€ä¸ªæ ‘çš„<strong style="font-weight: 600;"><span>&nbsp;</span>èŠ‚ç‚¹çš„å¡åº¦<span>&nbsp;</span></strong>å®šä¹‰å³ä¸ºï¼Œè¯¥èŠ‚ç‚¹å·¦å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œå’Œå³å­æ ‘èŠ‚ç‚¹ä¹‹å’Œçš„<span>&nbsp;</span><strong style="font-weight: 600;">å·®çš„ç»å¯¹å€¼<span>&nbsp;</span></strong>ã€‚å¦‚æœæ²¡æœ‰å·¦å­æ ‘çš„è¯ï¼Œå·¦å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œä¸º 0 ï¼›æ²¡æœ‰å³å­æ ‘çš„è¯ä¹Ÿæ˜¯ä¸€æ ·ã€‚ç©ºç»“ç‚¹çš„å¡åº¦æ˜¯ 0 ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æ•´ä¸ªæ ‘</strong><span>&nbsp;</span>çš„å¡åº¦å°±æ˜¯å…¶æ‰€æœ‰èŠ‚ç‚¹çš„å¡åº¦ä¹‹å’Œã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/20/tilt1.jpg" style="max-width: 100%; width: 712px; height: 182px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
èŠ‚ç‚¹ 2 çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰
èŠ‚ç‚¹ 3 çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰
èŠ‚ç‚¹ 1 çš„å¡åº¦ï¼š|2-3| = 1ï¼ˆå·¦å­æ ‘å°±æ˜¯å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯ 2 ï¼›å³å­æ ‘å°±æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯ 3 ï¼‰
å¡åº¦æ€»å’Œï¼š0 + 0 + 1 = 1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/20/tilt2.jpg" style="max-width: 100%; width: 800px; height: 203px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [4,2,9,3,5,null,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>15
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
èŠ‚ç‚¹ 3 çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰
èŠ‚ç‚¹ 5 çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰
èŠ‚ç‚¹ 7 çš„å¡åº¦ï¼š|0-0| = 0ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰
èŠ‚ç‚¹ 2 çš„å¡åº¦ï¼š|3-5| = 2ï¼ˆå·¦å­æ ‘å°±æ˜¯å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯ 3 ï¼›å³å­æ ‘å°±æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯ 5 ï¼‰
èŠ‚ç‚¹ 9 çš„å¡åº¦ï¼š|0-7| = 7ï¼ˆæ²¡æœ‰å·¦å­æ ‘ï¼Œæ‰€ä»¥å’Œæ˜¯ 0 ï¼›å³å­æ ‘æ­£å¥½æ˜¯å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å’Œæ˜¯ 7 ï¼‰
èŠ‚ç‚¹ 4 çš„å¡åº¦ï¼š|(3+5+2)-(9+7)| = |10-16| = 6ï¼ˆå·¦å­æ ‘å€¼ä¸º 3ã€5 å’Œ 2 ï¼Œå’Œæ˜¯ 10 ï¼›å³å­æ ‘å€¼ä¸º 9 å’Œ 7 ï¼Œå’Œæ˜¯ 16 ï¼‰
å¡åº¦æ€»å’Œï¼š0 + 0 + 0 + 2 + 7 + 6 = 15
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/20/tilt3.jpg" style="max-width: 100%; width: 800px; height: 293px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [21,7,14,1,1,2,2,3,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>9
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®çš„èŒƒå›´åœ¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 10<sup>4</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-tilt/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 563. äºŒå‰æ ‘çš„å¡åº¦</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#åŸºæœ¬æ€è·¯-2)

è¿™é‡Œè¦ç”¨åˆ°å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡çš„ååºä½ç½®çš„å¦™ç”¨ã€‚

`sum` å‡½æ•°è®°å½•äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œï¼Œåœ¨ååºä½ç½®é¡ºä¾¿è®¡ç®—äºŒå‰æ ‘çš„ã€Œå¡åº¦ã€å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#è§£æ³•ä»£ç -2)

```python
class Solution:
    def __init__(self):
        self.res = 0

    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›è¿™æ£µäºŒå‰æ ‘æ‰€æœ‰å…ƒç´ çš„å’Œ
    def sum(self, root: TreeNode) -> int:
        if root is None:
            return 0

        left_sum = self.sum(root.left)
        right_sum = self.sum(root.right)
        # ååºä½ç½®
        self.res += abs(left_sum - right_sum)
        return left_sum + right_sum + root.val

    def findTilt(self, root: TreeNode) -> int:
        self.sum(root)
        return self.res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_binary-tree-tilt" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-tilt" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-tilt/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [814. äºŒå‰æ ‘å‰ªæ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#slug_binary-tree-pruning)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">814. äºŒå‰æ ‘å‰ªæ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-pruning/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-pruning/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ï¼Œæ­¤å¤–æ ‘çš„æ¯ä¸ªç»“ç‚¹çš„å€¼è¦ä¹ˆæ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>ï¼Œè¦ä¹ˆæ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›ç§»é™¤äº†æ‰€æœ‰ä¸åŒ…å«<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>çš„å­æ ‘çš„åŸäºŒå‰æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">node</code><span>&nbsp;</span>çš„å­æ ‘ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">node</code><span>&nbsp;</span>æœ¬èº«åŠ ä¸Šæ‰€æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">node</code><span>&nbsp;</span>çš„åä»£ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/04/06/1028_2.png" style="max-width: 100%; width: 500px; height: 140px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,0,0,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,0,null,1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
åªæœ‰çº¢è‰²èŠ‚ç‚¹æ»¡è¶³æ¡ä»¶â€œæ‰€æœ‰ä¸åŒ…å« 1 çš„å­æ ‘â€ã€‚ å³å›¾ä¸ºè¿”å›çš„ç­”æ¡ˆã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/04/06/1028_1.png" style="max-width: 100%; width: 500px; height: 115px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,0,1,0,0,0,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,1,null,1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/04/05/1028.png" style="max-width: 100%; width: 500px; height: 134px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,1,0,1,1,0,1,0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,1,0,1,1,null,1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 200]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code><span>&nbsp;</span>ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>æˆ–<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-pruning/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 814. äºŒå‰æ ‘å‰ªæ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#åŸºæœ¬æ€è·¯-3)

å»ºè®®å…ˆåšä¸€ä¸‹ [543. äºŒå‰æ ‘çš„ç›´å¾„](https://leetcode.cn/problems/diameter-of-binary-tree) å’Œ [687. æœ€é•¿åŒå€¼è·¯å¾„](https://leetcode.cn/problems/longest-univalue-path)ï¼Œç†è§£ååºéå†ä½ç½®çš„ç‰¹æ®Šæ€§ã€‚

è¿™é“é¢˜çš„éš¾ç‚¹åœ¨äºè¦ä¸€ç›´å‰ªæï¼Œç›´åˆ°æ²¡æœ‰å€¼ä¸º 0 çš„å¶å­èŠ‚ç‚¹ä¸ºæ­¢ï¼Œåªæœ‰ä»ååºéå†ä½ç½®è‡ªåº•å‘ä¸Šå¤„ç†æ‰èƒ½è·å¾—æœ€é«˜çš„æ•ˆç‡ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#è§£æ³•ä»£ç -3)

```python
class Solution:
    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›çš„äºŒå‰æ ‘å¶å­èŠ‚ç‚¹éƒ½æ˜¯ 1
    def pruneTree(self, root: TreeNode) -> TreeNode:
        if root is None:
            return None
        # äºŒå‰æ ‘é€’å½’æ¡†æ¶
        root.left = self.pruneTree(root.left)
        root.right = self.pruneTree(root.right)

        # ååºéå†ä½ç½®ï¼Œåˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯å€¼ä¸º 0 çš„å¶å­èŠ‚ç‚¹
        if root.val == 0 and root.left is None and root.right is None:
            # è¿”å›å€¼ä¼šè¢«çˆ¶èŠ‚ç‚¹æ¥æ”¶ï¼Œç›¸å½“äºæŠŠè‡ªå·±åˆ æ‰äº†
            return None
        # å¦‚æœä¸æ˜¯ï¼Œæ­£å¸¸è¿”å›
        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_binary-tree-pruning" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-pruning" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-pruning/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1325. åˆ é™¤ç»™å®šå€¼çš„å¶å­èŠ‚ç‚¹ ğŸŸ ](https://leetcode.cn/problems/delete-leaves-with-a-given-value)
- [å‰‘æŒ‡ Offer II 047. äºŒå‰æ ‘å‰ªæ ğŸŸ ](https://leetcode.cn/problems/pOCWxh)

## [1325. åˆ é™¤ç»™å®šå€¼çš„å¶å­èŠ‚ç‚¹](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#slug_delete-leaves-with-a-given-value)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1325. åˆ é™¤ç»™å®šå€¼çš„å¶å­èŠ‚ç‚¹</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/delete-leaves-with-a-given-value/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/delete-leaves-with-a-given-value/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µä»¥&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ä¸ºæ ¹çš„äºŒå‰æ ‘å’Œä¸€ä¸ªæ•´æ•°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;ï¼Œè¯·ä½ åˆ é™¤æ‰€æœ‰å€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code><span>&nbsp;</span>çš„&nbsp;<strong style="font-weight: 600;">å¶å­èŠ‚ç‚¹</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ³¨æ„ï¼Œä¸€æ—¦åˆ é™¤å€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;çš„å¶å­èŠ‚ç‚¹ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹å°±å¯èƒ½å˜æˆå¶å­èŠ‚ç‚¹ï¼›å¦‚æœæ–°å¶å­èŠ‚ç‚¹çš„å€¼æ°å¥½ä¹Ÿæ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code><span>&nbsp;</span>ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹ä¹Ÿåº”è¯¥è¢«åˆ é™¤ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°ä¸èƒ½ç»§ç»­åˆ é™¤ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/01/16/sample_1_1684.png" style="max-width: 100%; width: 500px; height: 112px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,2,null,2,4], target = 2
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,3,null,4]
<strong style="font-weight: 600;">è§£é‡Šï¼š
</strong>ä¸Šé¢å·¦è¾¹çš„å›¾ä¸­ï¼Œç»¿è‰²èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹ï¼Œä¸”å®ƒä»¬çš„å€¼ä¸ target ç›¸åŒï¼ˆåŒä¸º 2 ï¼‰ï¼Œå®ƒä»¬ä¼šè¢«åˆ é™¤ï¼Œå¾—åˆ°ä¸­é—´çš„å›¾ã€‚
æœ‰ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹å˜æˆäº†å¶å­èŠ‚ç‚¹ä¸”å®ƒçš„å€¼ä¸ target ç›¸åŒï¼Œæ‰€ä»¥å°†å†æ¬¡è¿›è¡Œåˆ é™¤ï¼Œä»è€Œå¾—åˆ°æœ€å³è¾¹çš„å›¾ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/01/16/sample_2_1684.png" style="max-width: 100%; width: 400px; height: 154px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,3,3,3,2], target = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,3,null,null,2]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/01/16/sample_3_1684.png" style="max-width: 100%; width: 450px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,null,2,null,2], target = 2
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ¯ä¸€æ­¥éƒ½åˆ é™¤ä¸€ä¸ªç»¿è‰²çš„å¶å­èŠ‚ç‚¹ï¼ˆå€¼ä¸º 2ï¼‰ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°é‡çš„èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 3000]</code>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val, target &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/delete-leaves-with-a-given-value/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1325. åˆ é™¤ç»™å®šå€¼çš„å¶å­èŠ‚ç‚¹</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#åŸºæœ¬æ€è·¯-4)

åˆ é™¤æŒ‡å®šå€¼çš„å¶å­èŠ‚ç‚¹ï¼Œå…¶å®å°±æ˜¯éå†æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦éœ€è¦åˆ é™¤ï¼›åˆ é™¤å¶å­èŠ‚ç‚¹ä¹Ÿå¾ˆç®€å•ï¼Œreturn null è®©çˆ¶èŠ‚ç‚¹æ¥æ”¶å³å¯ã€‚

**éš¾ç‚¹åœ¨äºä»–è¿™ä¸ªåˆ é™¤æ“ä½œæ˜¯å¾ªç¯çš„ï¼Œä¸€ç›´åˆ åˆ°å¶å­ç»“ç‚¹ä¸å­˜åœ¨ `target` ä¸ºæ­¢**ã€‚è¿™é‡Œè¦ç”¨åˆ°å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡çš„ååºä½ç½®çš„å¦™ç”¨äº†ï¼š

ä¸€ä¸ªèŠ‚ç‚¹è¦åœ¨ååºä½ç½®æ¥æ”¶å·¦å³å­æ ‘çš„è¿”å›å€¼ï¼Œæ‰èƒ½çŸ¥é“è‡ªå·±çš„å¶å­èŠ‚ç‚¹æ˜¯å¦éƒ½è¢«åˆ æ‰äº†ï¼Œä»¥æ­¤åˆ¤æ–­è‡ªå·±æ˜¯ä¸æ˜¯å˜æˆäº†å¶å­èŠ‚ç‚¹ã€‚

è¿™ä¸ªè€ƒç‚¹åœ¨ [814. äºŒå‰æ ‘å‰ªæ](https://leetcode.cn/problems/binary-tree-pruning) ä¸­ä¹Ÿæœ‰ä½“ç°ï¼Œæ²¡åšè¿‡çš„è¯»è€…å»ºè®®å»åšä¸€ä¸‹ï¼Œè§£æ³•çš„å…³é”®ç‚¹åœ¨äºåˆ©ç”¨ååºéå†ç‰¹ç‚¹ï¼Œåœ¨ååºéå†ä½ç½®æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç›´åˆ°è‡ªå·±æ˜¯å¦éœ€è¦è¢«åˆ é™¤ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#è§£æ³•ä»£ç -4)

```python
class Solution:
    def removeLeafNodes(self, root: TreeNode, target: int) -> TreeNode:
        if root is None:
            return None
        # äºŒå‰æ ‘é€’å½’æ¡†æ¶
        # å¦‚æœå·¦å³å­èŠ‚ç‚¹éœ€è¦è¢«åˆ é™¤ï¼Œå…ˆé€’å½’åˆ é™¤å®ƒä»¬
        root.left = self.removeLeafNodes(root.left, target)
        root.right = self.removeLeafNodes(root.right, target)
        # ååºéå†ä½ç½®ï¼Œæ­¤æ—¶èŠ‚ç‚¹ root ç›´åˆ°è‡ªå·±æ˜¯å¦éœ€è¦è¢«åˆ é™¤
        if root.val == target and root.left is None and root.right is None:
            return None
        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-i/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_delete-leaves-with-a-given-value" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_delete-leaves-with-a-given-value" src="https://labuladong.online/algo-visualize/leetcode/delete-leaves-with-a-given-value/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [687. æœ€é•¿åŒå€¼è·¯å¾„](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_longest-univalue-path)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">687. æœ€é•¿åŒå€¼è·¯å¾„</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/longest-univalue-path/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/longest-univalue-path/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ï¼Œè¿”å›&nbsp;<em>æœ€é•¿çš„è·¯å¾„çš„é•¿åº¦</em><span>&nbsp;</span>ï¼Œè¿™ä¸ªè·¯å¾„ä¸­çš„&nbsp;<em>æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰ç›¸åŒå€¼</em>&nbsp;ã€‚ è¿™æ¡è·¯å¾„å¯ä»¥ç»è¿‡ä¹Ÿå¯ä»¥ä¸ç»è¿‡æ ¹èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„é•¿åº¦</strong>&nbsp;ç”±å®ƒä»¬ä¹‹é—´çš„è¾¹æ•°è¡¨ç¤ºã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/13/ex1.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,4,5,1,1,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/13/ex2.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,4,5,4,4,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘çš„èŠ‚ç‚¹æ•°çš„èŒƒå›´æ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 10<sup>4</sup>]</code>&nbsp;</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li><li>æ ‘çš„æ·±åº¦å°†ä¸è¶…è¿‡<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1000</code>&nbsp;</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/longest-univalue-path/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 687. æœ€é•¿åŒå€¼è·¯å¾„</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ï¼Œè€Œä¸”è¿™ç±»é¢˜ç›®éœ€è¦åˆ©ç”¨äºŒå‰æ ‘çš„ååºéå†ã€‚

åšè¿™é¢˜ä¹‹å‰ï¼Œæˆ‘å»ºè®®ä½ å…ˆåš [543. äºŒå‰æ ‘çš„ç›´å¾„](https://leetcode.cn/problems/diameter-of-binary-tree) é¢˜å¹¶è¿›è¡Œå¯¹æ¯”ï¼ŒæŠŠé‚£é“é¢˜çš„æœ€å¤§æ·±åº¦å‡½æ•° `maxDepth` çš„å®šä¹‰å¸¦å…¥åˆ°è¿™é“é¢˜ä¸­ï¼Œ`maxLen` ç›¸å½“äºæ±‚å€¼ä¸º `parentVal` çš„èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦ã€‚é…åˆä»£ç æ³¨é‡Šå°±ç«‹é©¬æ˜ç™½äº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç )

```python
class Solution:
    def __init__(self):
        self.res = 0

    def longestUnivaluePath(self, root):
        if root is None:
            return 0
        # åœ¨ååºéå†çš„ä½ç½®æ›´æ–° res
        self.maxLen(root, root.val)
        return self.res

    # å®šä¹‰ï¼šè®¡ç®—ä»¥ root ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘ä¸­ï¼Œä» root å¼€å§‹å€¼ä¸º parentVal çš„æœ€é•¿æ ‘æé•¿åº¦
    def maxLen(self, root, parentVal):
        if root is None:
            return 0
        # åˆ©ç”¨å‡½æ•°å®šä¹‰ï¼Œè®¡ç®—å·¦å³å­æ ‘å€¼ä¸º root.val çš„æœ€é•¿æ ‘æé•¿åº¦
        leftLen = self.maxLen(root.left, root.val)
        rightLen = self.maxLen(root.right, root.val)

        # ååºéå†ä½ç½®é¡ºä¾¿æ›´æ–°å…¨å±€å˜é‡
        # åŒå€¼è·¯å¾„å°±æ˜¯å·¦å³åŒå€¼æ ‘æé•¿åº¦ä¹‹å’Œ
        self.res = max(self.res, leftLen + rightLen)
        # å¦‚æœ root æœ¬èº«å’Œä¸Šçº§å€¼ä¸åŒï¼Œé‚£ä¹ˆæ•´æ£µå­æ ‘éƒ½ä¸å¯èƒ½æœ‰åŒå€¼æ ‘æ
        if root.val != parentVal:
            return 0
        # å®ç°å‡½æ•°çš„å®šä¹‰ï¼š
        # ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä» root å¼€å§‹å€¼ä¸º parentVal çš„æœ€é•¿æ ‘æé•¿åº¦
        # ç­‰äºå·¦å³å­æ ‘çš„æœ€é•¿æ ‘æé•¿åº¦çš„æœ€å¤§å€¼åŠ ä¸Š root èŠ‚ç‚¹æœ¬èº«
        return 1 + max(leftLen, rightLen)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_longest-univalue-path" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_longest-univalue-path" src="https://labuladong.online/algo-visualize/leetcode/longest-univalue-path/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [814. äºŒå‰æ ‘å‰ªæ ğŸŸ ](https://leetcode.cn/problems/binary-tree-pruning)
- [å‰‘æŒ‡ Offer II 047. äºŒå‰æ ‘å‰ªæ ğŸŸ ](https://leetcode.cn/problems/pOCWxh)

## [865. å…·æœ‰æ‰€æœ‰æœ€æ·±èŠ‚ç‚¹çš„æœ€å°å­æ ‘](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_smallest-subtree-with-all-the-deepest-nodes)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">865. å…·æœ‰æ‰€æœ‰æœ€æ·±èŠ‚ç‚¹çš„æœ€å°å­æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/smallest-subtree-with-all-the-deepest-nodes/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/smallest-subtree-with-all-the-deepest-nodes/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªæ ¹ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;çš„äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">è¯¥èŠ‚ç‚¹åˆ°æ ¹çš„æœ€çŸ­è·ç¦»</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›åŒ…å«åŸå§‹æ ‘ä¸­æ‰€æœ‰<span>&nbsp;</span><strong style="font-weight: 600;">æœ€æ·±èŠ‚ç‚¹</strong><span>&nbsp;</span>çš„<span>&nbsp;</span><em>æœ€å°å­æ ‘</em><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœä¸€ä¸ªèŠ‚ç‚¹åœ¨<span>&nbsp;</span><strong style="font-weight: 600;">æ•´ä¸ªæ ‘<span>&nbsp;</span></strong>çš„ä»»æ„èŠ‚ç‚¹ä¹‹é—´å…·æœ‰æœ€å¤§çš„æ·±åº¦ï¼Œåˆ™è¯¥èŠ‚ç‚¹æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">æœ€æ·±çš„</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¸€ä¸ªèŠ‚ç‚¹çš„<span>&nbsp;</span><strong style="font-weight: 600;">å­æ ‘</strong><span>&nbsp;</span>æ˜¯è¯¥èŠ‚ç‚¹åŠ ä¸Šå®ƒçš„æ‰€æœ‰åä»£çš„é›†åˆã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/07/01/sketch1.png" style="max-width: 100%; width: 300px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,5,1,6,2,0,8,null,null,7,4]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2,7,4]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
æˆ‘ä»¬è¿”å›å€¼ä¸º 2 çš„èŠ‚ç‚¹ï¼Œåœ¨å›¾ä¸­ç”¨é»„è‰²æ ‡è®°ã€‚
åœ¨å›¾ä¸­ç”¨è“è‰²æ ‡è®°çš„æ˜¯æ ‘çš„æœ€æ·±çš„èŠ‚ç‚¹ã€‚
æ³¨æ„ï¼ŒèŠ‚ç‚¹ 5ã€3 å’Œ 2 åŒ…å«æ ‘ä¸­æœ€æ·±çš„èŠ‚ç‚¹ï¼Œä½†èŠ‚ç‚¹ 2 çš„å­æ ‘æœ€å°ï¼Œå› æ­¤æˆ‘ä»¬è¿”å›å®ƒã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ ¹èŠ‚ç‚¹æ˜¯æ ‘ä¸­æœ€æ·±çš„èŠ‚ç‚¹ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [0,1,3,null,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ ‘ä¸­æœ€æ·±çš„èŠ‚ç‚¹ä¸º 2 ï¼Œæœ‰æ•ˆå­æ ‘ä¸ºèŠ‚ç‚¹ 2ã€1 å’Œ 0 çš„å­æ ‘ï¼Œä½†èŠ‚ç‚¹ 2 çš„å­æ ‘æœ€å°ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 500]</code>&nbsp;èŒƒå›´å†…ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 500</code></li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">ç‹¬ä¸€æ— äºŒ</strong><span>&nbsp;</span>çš„ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;"><strong style="font-weight: 600;">æ³¨æ„ï¼š</strong>æœ¬é¢˜ä¸åŠ›æ‰£ 1123 é‡å¤ï¼š<a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-deepest-leaves/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">https://leetcode-cn.com/problems/lowest-common-ancestor-of-deepest-leaves</a></p></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/smallest-subtree-with-all-the-deepest-nodes/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 865. å…·æœ‰æ‰€æœ‰æœ€æ·±èŠ‚ç‚¹çš„æœ€å°å­æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ï¼Œè€Œä¸”æ¶‰åŠå¤„ç†å­æ ‘ï¼Œéœ€è¦ç”¨ååºéå†ã€‚

è¯´åˆ°åº•ï¼Œè¿™é“é¢˜å°±æ˜¯è®©ä½ æ±‚é‚£äº›ã€Œæœ€æ·±ã€çš„å¶å­èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œå¯ä»¥çœ‹ä¸‹åæ–‡ [äºŒå‰æ ‘æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://labuladong.online/algo/practice-in-action/lowest-common-ancestor-summary/)ã€‚

ä½ æƒ³æƒ³ï¼Œä¸€ä¸ªèŠ‚ç‚¹éœ€è¦çŸ¥é“å“ªäº›ä¿¡æ¯ï¼Œæ‰èƒ½ç¡®å®šè‡ªå·±æ˜¯æœ€æ·±å¶å­èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Ÿ

å®ƒéœ€è¦çŸ¥é“è‡ªå·±çš„å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ï¼šå¦‚æœå·¦å³å­æ ‘ä¸€æ ·æ·±ï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆï¼›å¦‚æœå·¦å³å­æ ‘ä¸ä¸€æ ·æ·±ï¼Œé‚£ä¹ˆæœ€æ·±å¶å­èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆè‚¯å®šåœ¨å·¦å³å­æ ‘ä¸Šã€‚

æ‰€ä»¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ª `Result` ç±»ï¼Œå­˜æ”¾å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦åŠå¶å­èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ï¼Œå…¶ä½™é€»è¾‘ç±»ä¼¼ [104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.cn/problems/maximum-depth-of-binary-tree)ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç -1)

```python
class Solution:
    class Result:
        def __init__(self, node, depth):
            # è®°å½•æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ node
            self.node = node
            # è®°å½•ä»¥ node ä¸ºæ ¹çš„äºŒå‰æ ‘æœ€å¤§æ·±åº¦
            self.depth = depth

    def subtreeWithAllDeepest(self, root: TreeNode) -> TreeNode:
        res = self.maxDepth(root)
        return res.node

    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›è¯¥äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ä»¥åŠæœ€æ·±å¶å­èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹
    def maxDepth(self, root: TreeNode) -> 'Solution.Result':
        if root is None:
            return self.Result(None, 0)
        left = self.maxDepth(root.left)
        right = self.maxDepth(root.right)
        if left.depth == right.depth:
            # å½“å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ç›¸åŒæ—¶ï¼Œè¿™ä¸ªæ ¹èŠ‚ç‚¹æ˜¯æ–°çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
            # ä»¥å½“å‰ root èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘æ·±åº¦æ˜¯å­æ ‘æ·±åº¦ + 1
            return self.Result(root, left.depth + 1)
        # å·¦å³å­æ ‘çš„æ·±åº¦ä¸åŒï¼Œåˆ™æœ€è¿‘å…¬å…±ç¥–å…ˆåœ¨ depth è¾ƒå¤§çš„ä¸€è¾¹
        res = left if left.depth > right.depth else right
        # æ­£ç¡®ç»´æŠ¤äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦
        res.depth += 1

        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_smallest-subtree-with-all-the-deepest-nodes" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_smallest-subtree-with-all-the-deepest-nodes" src="https://labuladong.online/algo-visualize/leetcode/smallest-subtree-with-all-the-deepest-nodes/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1123. æœ€æ·±å¶èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ ğŸŸ ](https://leetcode.cn/problems/lowest-common-ancestor-of-deepest-leaves)

## [1026. èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆä¹‹é—´çš„æœ€å¤§å·®å€¼](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_maximum-difference-between-node-and-ancestor)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1026. èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆä¹‹é—´çš„æœ€å¤§å·®å€¼</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/maximum-difference-between-node-and-ancestor/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/maximum-difference-between-node-and-ancestor/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼Œæ‰¾å‡ºå­˜åœ¨äº<span>&nbsp;</span><strong style="font-weight: 600;">ä¸åŒ</strong><span>&nbsp;</span>èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">A</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">B</code><span>&nbsp;</span>ä¹‹é—´çš„æœ€å¤§å€¼<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">V</code>ï¼Œå…¶ä¸­<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">V = |A.val - B.val|</code>ï¼Œä¸”<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">A</code><span>&nbsp;</span>æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">B</code><span>&nbsp;</span>çš„ç¥–å…ˆã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ï¼ˆå¦‚æœ A çš„ä»»ä½•å­èŠ‚ç‚¹ä¹‹ä¸€ä¸º Bï¼Œæˆ–è€… A çš„ä»»ä½•å­èŠ‚ç‚¹æ˜¯ B çš„ç¥–å…ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸º A æ˜¯ B çš„ç¥–å…ˆï¼‰</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/11/09/tmp-tree.jpg" style="max-width: 100%; width: 400px; height: 390px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [8,3,10,1,6,null,14,null,null,4,7,13]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>7
<strong style="font-weight: 600;">è§£é‡Šï¼š </strong>
æˆ‘ä»¬æœ‰å¤§é‡çš„èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆçš„å·®å€¼ï¼Œå…¶ä¸­ä¸€äº›å¦‚ä¸‹ï¼š
|8 - 3| = 5
|3 - 7| = 4
|8 - 1| = 7
|10 - 13| = 3
åœ¨æ‰€æœ‰å¯èƒ½çš„å·®å€¼ä¸­ï¼Œæœ€å¤§å€¼ 7 ç”± |8 - 1| = 7 å¾—å‡ºã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/11/09/tmp-tree-1.jpg" style="max-width: 100%; width: 250px; height: 349px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,2,null,0,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°åœ¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code><span>&nbsp;</span>åˆ°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">5000</code><span>&nbsp;</span>ä¹‹é—´ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-difference-between-node-and-ancestor/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1026. èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆä¹‹é—´çš„æœ€å¤§å·®å€¼</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯-2)

è¿™é¢˜è¦ç”¨åˆ° [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) ä¸­å¼ºè°ƒçš„äºŒå‰æ ‘ååºä½ç½®çš„ç‰¹æ®Šæ€§ã€‚

ç«™åœ¨æŸä¸ªèŠ‚ç‚¹ï¼Œä½ å¦‚ä½•åˆ¤æ–­ä»¥è¿™ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­çš„æœ€å¤§å·®å€¼ï¼Ÿæ¢å¥è¯è¯´ï¼Œä½ éœ€è¦çŸ¥é“å“ªäº›ä¿¡æ¯ï¼Œæ‰èƒ½ç®—å‡ºæ¥è¿™ä¸ªæœ€å¤§å·®å€¼ï¼Ÿ

æ€è€ƒè¿™ä¸ªé—®é¢˜å¾ˆæœ‰å¿…è¦ï¼Œä½ å¿…é¡»å…ˆçŸ¥é“æ€ä¹ˆç®—ï¼Œæ‰èƒ½å†™é€’å½’å‡½æ•°å»å®ç°ä½ çš„æ€è·¯ã€‚

è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹éœ€è¦çŸ¥é“å·¦å³å­æ ‘çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œç„¶åå°±èƒ½ç®—å‡ºã€Œä»¥è‡ªå·±ä¸ºç¥–å…ˆã€çš„æœ€å¤§å·®å€¼ã€‚

æ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“ä»¥è‡ªå·±ä¸ºç¥–å…ˆçš„æœ€å¤§å·®å€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿™äº›å·®å€¼ä¸­æœ€å¤§çš„é‚£ä¸ªå°±æ˜¯æ•´æ£µæ ‘çš„æœ€å¤§å·®å€¼ï¼Œè¿™ä¸ªå–æœ€å¤§å€¼çš„è¿‡ç¨‹éœ€è¦åœ¨ååºéå†çš„ä½ç½®è¿›è¡Œï¼Œç›´æ¥çœ‹è§£æ³•ä»£ç ç†è§£å§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç -2)

```python
class Solution:
    def maxAncestorDiff(self, root: TreeNode) -> int:
        self.getMinMax(root)
        return self.res

    res = 0

    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›è¯¥äºŒå‰æ ‘ä¸­èŠ‚ç‚¹çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œ
    # ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æœ€å°å€¼ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯æœ€å¤§å€¼
    def getMinMax(self, root: TreeNode) -> List[int]:
        if root is None:
            return [float('inf'), float('-inf')]
        leftMinMax = self.getMinMax(root.left)
        rightMinMax = self.getMinMax(root.right)
        # ä»¥ root ä¸ºæ ¹çš„è¿™æ£µæ ‘çš„æœ€å¤§å€¼å’Œæœ€å°å€¼å¯ä»¥é€šè¿‡å·¦å³å­æ ‘çš„æœ€å¤§æœ€å°å€¼æ¨å¯¼å‡ºæ¥
        rootMin = min(root.val, leftMinMax[0], rightMinMax[0])
        rootMax = max(root.val, leftMinMax[1], rightMinMax[1])
        # åœ¨ååºä½ç½®é¡ºä¾¿åˆ¤æ–­æ‰€æœ‰å·®å€¼çš„æœ€å¤§å€¼
        self.res = max(self.res, rootMax - root.val, root.val - rootMin)

        return [rootMin, rootMax]
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_maximum-difference-between-node-and-ancestor" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_maximum-difference-between-node-and-ancestor" src="https://labuladong.online/algo-visualize/leetcode/maximum-difference-between-node-and-ancestor/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1339. åˆ†è£‚äºŒå‰æ ‘çš„æœ€å¤§ä¹˜ç§¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_maximum-product-of-splitted-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1339. åˆ†è£‚äºŒå‰æ ‘çš„æœ€å¤§ä¹˜ç§¯</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/maximum-product-of-splitted-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/maximum-product-of-splitted-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘ï¼Œå®ƒçš„æ ¹ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ã€‚è¯·ä½ åˆ é™¤ 1 æ¡è¾¹ï¼Œä½¿äºŒå‰æ ‘åˆ†è£‚æˆä¸¤æ£µå­æ ‘ï¼Œä¸”å®ƒä»¬å­æ ‘å’Œçš„ä¹˜ç§¯å°½å¯èƒ½å¤§ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç”±äºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ï¼Œè¯·ä½ å°†ç»“æœå¯¹ 10^9 + 7 å–æ¨¡åå†è¿”å›ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/02/02/sample_1_1699.png" style="max-width: 100%; height: 200px; width: 495px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,6]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>110
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>åˆ é™¤çº¢è‰²çš„è¾¹ï¼Œå¾—åˆ° 2 æ£µå­æ ‘ï¼Œå’Œåˆ†åˆ«ä¸º 11 å’Œ 10 ã€‚å®ƒä»¬çš„ä¹˜ç§¯æ˜¯ 110 ï¼ˆ11*10ï¼‰
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/02/02/sample_2_1699.png" style="max-width: 100%; height: 200px; width: 495px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,2,3,4,null,null,5,6]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>90
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç§»é™¤çº¢è‰²çš„è¾¹ï¼Œå¾—åˆ° 2 æ£µå­æ ‘ï¼Œå’Œåˆ†åˆ«æ˜¯ 15 å’Œ 6 ã€‚å®ƒä»¬çš„ä¹˜ç§¯ä¸º 90 ï¼ˆ15*6ï¼‰
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,3,9,10,7,8,6,5,4,11,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1025
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 4ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ¯æ£µæ ‘æœ€å¤šæœ‰&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">50000</code>&nbsp;ä¸ªèŠ‚ç‚¹ï¼Œä¸”è‡³å°‘æœ‰&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code>&nbsp;ä¸ªèŠ‚ç‚¹ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10000]</code>&nbsp;ä¹‹é—´ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-product-of-splitted-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1339. åˆ†è£‚äºŒå‰æ ‘çš„æœ€å¤§ä¹˜ç§¯</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯-3)

è¿™é‡Œè¦ç”¨åˆ°å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡çš„ååºä½ç½®çš„å¦™ç”¨ã€‚

é¢˜ç›®è¯´çš„æ¯”è¾ƒç¹çï¼Œè¿™é“é¢˜è¯´çš„ç®€å•äº›å°±æ˜¯ï¼š

åœ¨äºŒå‰æ ‘ä¸­åˆ‡å‡ºä¸€ä¸ªå°äºŒå‰æ ‘ï¼ˆå­æ ‘ï¼‰ï¼Œè®¡ç®—è¿™ä¸ªå­æ ‘èŠ‚ç‚¹ä¹‹å’Œä¸å‰©ä¸‹çš„èŠ‚ç‚¹ä¹‹å’Œçš„ä¹˜ç§¯ã€‚

æƒ³æ±‚æœ€å¤§ä¹˜ç§¯ï¼Œé‚£å°±ç©·ä¸¾ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½çš„åˆ‡æ³•éƒ½ç©·ä¸¾ä¸€éï¼Œè®¡ç®—ä¹˜ç§¯ã€‚

ä»»ä½•å­æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œéƒ½å¯ä»¥åœ¨ååºä½ç½®è·å¾—ï¼Œè€Œå‰©ä¸‹çš„å…¶ä»–èŠ‚ç‚¹ä¹‹å’Œå°±æ˜¯æ•´æ£µäºŒå‰æ ‘çš„èŠ‚ç‚¹ä¹‹å’Œå‡å»å­æ ‘èŠ‚ç‚¹ä¹‹å’Œã€‚

æ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ª `getSum` å‡½æ•°ï¼Œå…ˆæ‰§è¡Œä¸€éè®¡ç®—æ•´æ£µæ ‘çš„èŠ‚ç‚¹ä¹‹å’Œï¼Œç„¶åå†è°ƒç”¨ä¸€æ¬¡åˆ©ç”¨å®ƒçš„ååºä½ç½®è®¡ç®—ä¹˜ç§¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç -3)

```python
class Solution:
    def maxProduct(self, root: TreeNode) -> int:
        # å…ˆåˆ©ç”¨æ±‚å’Œå‡½æ•°å¾—åˆ°æ•´æ£µæ ‘çš„èŠ‚ç‚¹ä¹‹å’Œ
        self.treeSum = self.getSum(root)
        # å†æ¬¡è°ƒç”¨ï¼Œåˆ©ç”¨ååºä½ç½®è®¡ç®—å­æ ‘ä¹‹ç§¯
        self.getSum(root)
        return int(self.res % (1e9 + 7))

    def __init__(self):
        self.res = 0
        self.treeSum = 0

    def getSum(self, root: TreeNode) -> int:
        if root is None:
            return 0
        leftSum = self.getSum(root.left)
        rightSum = self.getSum(root.right)
        rootSum = leftSum + rightSum + root.val
        # ååºä½ç½®è®¡ç®—ä¹˜ç§¯
        self.res = max(self.res, rootSum * (self.treeSum - rootSum))
        return rootSum
```

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [2049. ç»Ÿè®¡æœ€é«˜åˆ†çš„èŠ‚ç‚¹æ•°ç›® ğŸŸ ](https://leetcode.cn/problems/count-nodes-with-the-highest-score)

## [1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_longest-zigzag-path-in-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/longest-zigzag-path-in-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/longest-zigzag-path-in-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µä»¥&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;ä¸ºæ ¹çš„äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘ä¸­çš„äº¤é”™è·¯å¾„å®šä¹‰å¦‚ä¸‹ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>é€‰æ‹©äºŒå‰æ ‘ä¸­<span>&nbsp;</span><strong style="font-weight: 600;">ä»»æ„</strong>&nbsp;èŠ‚ç‚¹å’Œä¸€ä¸ªæ–¹å‘ï¼ˆå·¦æˆ–è€…å³ï¼‰ã€‚</li><li>å¦‚æœå‰è¿›æ–¹å‘ä¸ºå³ï¼Œé‚£ä¹ˆç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹çš„çš„å³å­èŠ‚ç‚¹ï¼Œå¦åˆ™ç§»åŠ¨åˆ°å®ƒçš„å·¦å­èŠ‚ç‚¹ã€‚</li><li>æ”¹å˜å‰è¿›æ–¹å‘ï¼šå·¦å˜å³æˆ–è€…å³å˜å·¦ã€‚</li><li>é‡å¤ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ï¼Œç›´åˆ°ä½ åœ¨æ ‘ä¸­æ— æ³•ç»§ç»­ç§»åŠ¨ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">äº¤é”™è·¯å¾„çš„é•¿åº¦å®šä¹‰ä¸ºï¼š<strong style="font-weight: 600;">è®¿é—®è¿‡çš„èŠ‚ç‚¹æ•°ç›® - 1</strong>ï¼ˆå•ä¸ªèŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦ä¸º 0 ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ è¿”å›ç»™å®šæ ‘ä¸­æœ€é•¿<span>&nbsp;</span><strong style="font-weight: 600;">äº¤é”™è·¯å¾„</strong>&nbsp;çš„é•¿åº¦ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/03/07/sample_1_1702.png" style="max-width: 100%; height: 283px; width: 151px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,1,1,1,null,null,1,1,null,1,null,null,null,1,null,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>è“è‰²èŠ‚ç‚¹ä¸ºæ ‘ä¸­æœ€é•¿äº¤é”™è·¯å¾„ï¼ˆå³ -&gt; å·¦ -&gt; å³ï¼‰ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/03/07/sample_2_1702.png" style="max-width: 100%; height: 253px; width: 120px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,1,1,null,1,null,null,1,1,null,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>4
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>è“è‰²èŠ‚ç‚¹ä¸ºæ ‘ä¸­æœ€é•¿äº¤é”™è·¯å¾„ï¼ˆå·¦ -&gt; å³ -&gt; å·¦ -&gt; å³ï¼‰ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>0
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ¯æ£µæ ‘æœ€å¤šæœ‰&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">50000</code>&nbsp;ä¸ªèŠ‚ç‚¹ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 100]</code><span>&nbsp;</span>ä¹‹é—´ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/longest-zigzag-path-in-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯-4)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ï¼Œè€Œä¸”è¦ç”¨åˆ°ååºä½ç½®çš„å¦™ç”¨ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ä¸€ä¸‹åè¯çš„å«ä¹‰ï¼Œä¾¿äºè®²è§£ï¼š

å¦‚æœä¸€ä¸ªä»ä¸Šåˆ°ä¸‹çš„äº¤é”™è·¯å¾„çš„å¼€å¤´æ˜¯ä»å³åˆ°å·¦çš„ï¼Œç§°ä¹‹ä¸ºã€Œå·¦äº¤é”™è·¯å¾„ã€ï¼Œåä¹‹æˆä¸ºã€Œå³äº¤é”™è·¯å¾„ã€ã€‚

è¿™æ ·çš„è¯ï¼Œä¸€ä¸ªèŠ‚ç‚¹ `x` èƒ½å¤Ÿäº§ç”Ÿçš„äº¤é”™è·¯å¾„å°±èƒ½åˆ†è§£åˆ°å·¦å³å­æ ‘ï¼š

1ã€`x` çš„å·¦å­æ ‘çš„ã€Œå³äº¤é”™è·¯å¾„ã€+ èŠ‚ç‚¹ `x` = `x` çš„ã€Œå·¦äº¤é”™è·¯å¾„ã€

2ã€`x` çš„å³å­æ ‘çš„ã€Œå·¦äº¤é”™è·¯å¾„ã€+ èŠ‚ç‚¹ `x` = `x` çš„ã€Œå³äº¤é”™è·¯å¾„ã€

æ¯”è¾ƒ `x` çš„å·¦å³äº¤é”™è·¯å¾„ï¼Œå³å¯ç®—å‡ºä»¥ `x` å¼€å¤´çš„æœ€é•¿äº¤é”™è·¯å¾„ã€‚

å¯¹äºŒå‰æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹è®¡ç®—äº¤é”™è·¯å¾„é•¿åº¦ï¼Œå³å¯å¾—åˆ°æœ€é•¿çš„äº¤é”™è·¯å¾„é•¿åº¦ã€‚

æ‰€ä»¥æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª `getPathLen` å‡½æ•°è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³äº¤é”™è·¯å¾„é•¿åº¦ï¼Œç„¶ååœ¨ååºä½ç½®ä¸Šæ›´æ–°å…¨å±€æœ€å¤§å€¼ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç -4)

```python
class Solution:
    def longestZigZag(self, root: TreeNode) -> int:
        self.res = 0
        self.getPathLen(root)
        return self.res

    # è¾“å…¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ rootï¼Œè¿”å›ä¸¤ä¸ªå€¼
    # ç¬¬ä¸€ä¸ªæ˜¯ä» root å¼€å§‹å‘å·¦èµ°çš„æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦ï¼Œ
    # ç¬¬ä¸€ä¸ªæ˜¯ä» root å¼€å§‹å‘å³èµ°çš„æœ€é•¿äº¤é”™è·¯å¾„é•¿åº¦
    def getPathLen(self, root: TreeNode) -> tuple:
        if root is None:
            return (-1, -1)
        left = self.getPathLen(root.left)
        right = self.getPathLen(root.right)
        # ååºä½ç½®ï¼Œæ ¹æ®å·¦å³å­æ ‘çš„äº¤é”™è·¯å¾„é•¿åº¦æ¨ç®—æ ¹èŠ‚ç‚¹çš„äº¤é”™è·¯å¾„é•¿åº¦
        rootPathLen1 = left[1] + 1
        rootPathLen2 = right[0] + 1
        # æ›´æ–°å…¨å±€æœ€å¤§å€¼
        self.res = max(self.res, max(rootPathLen1, rootPathLen2))

        return (rootPathLen1, rootPathLen2)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_longest-zigzag-path-in-a-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_longest-zigzag-path-in-a-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/longest-zigzag-path-in-a-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_construct-string-from-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/construct-string-from-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/construct-string-from-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¯·ä½ é‡‡ç”¨å‰åºéå†çš„æ–¹å¼ï¼Œå°†äºŒå‰æ ‘è½¬åŒ–ä¸ºä¸€ä¸ªç”±æ‹¬å·å’Œæ•´æ•°ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ„é€ å‡ºçš„å­—ç¬¦ä¸²ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç©ºèŠ‚ç‚¹ä½¿ç”¨ä¸€å¯¹ç©ºæ‹¬å·å¯¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">"()"</code><span>&nbsp;</span>è¡¨ç¤ºï¼Œè½¬åŒ–åéœ€è¦çœç•¥æ‰€æœ‰ä¸å½±å“å­—ç¬¦ä¸²ä¸åŸå§‹äºŒå‰æ ‘ä¹‹é—´çš„ä¸€å¯¹ä¸€æ˜ å°„å…³ç³»çš„ç©ºæ‹¬å·å¯¹ã€‚</p><div class="original__bRMd"><div><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/05/03/cons1-tree.jpg" style="max-width: 100%; width: 292px; height: 301px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>"1(2(4))(3)"
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>åˆæ­¥è½¬åŒ–åå¾—åˆ° "1(2(4)())(3()())" ï¼Œä½†çœç•¥æ‰€æœ‰ä¸å¿…è¦çš„ç©ºæ‹¬å·å¯¹åï¼Œå­—ç¬¦ä¸²åº”è¯¥æ˜¯"1(2(4))(3)" ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/05/03/cons2-tree.jpg" style="max-width: 100%; width: 207px; height: 293px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,null,4]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>"1(2()(4))(3)"
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å’Œç¬¬ä¸€ä¸ªç¤ºä¾‹ç±»ä¼¼ï¼Œä½†æ˜¯æ— æ³•çœç•¥ç¬¬ä¸€ä¸ªç©ºæ‹¬å·å¯¹ï¼Œå¦åˆ™ä¼šç ´åè¾“å…¥ä¸è¾“å‡ºä¸€ä¸€æ˜ å°„çš„å…³ç³»ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li></ul></div></div></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/construct-string-from-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯-5)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

æˆ‘ä»¬å…ˆæ˜ç¡® `tree2str` å‡½æ•°çš„å®šä¹‰ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªå®šä¹‰ç”Ÿæˆå·¦å³å­æ ‘çš„å­—ç¬¦ä¸²ï¼Œç„¶åç»“åˆ `root` ç»„è£…å‡ºæœ€åç»“æœã€‚

æ³¨æ„ï¼Œé¢˜ç›®è¯´æŒ‰ç…§å‰åºéå†çš„æ–¹å¼ç»„è£…å­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬å¿…é¡»åœ¨ååºéå†ä½ç½®å»ç»„è£…ï¼Œå› ä¸ºåªæœ‰é‚£é‡Œä½ æ‰èƒ½æ‹¿åˆ°å·¦å³å­æ ‘çš„å­—ç¬¦ä¸²ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç -5)

```python
class Solution:
    # å®šä¹‰ï¼šè¾“å…¥ä»¥ root çš„äºŒå‰æ ‘ï¼Œè¿”å›æè¿°è¯¥äºŒå‰æ ‘çš„å­—ç¬¦ä¸²
    def tree2str(self, root: TreeNode) -> str:
        # base case
        if root is None:
            return ""
        if root.left is None and root.right is None:
            return str(root.val)
        # é€’å½’ç”Ÿæˆå·¦å³å­æ ‘çš„å­—ç¬¦ä¸²
        left_str = self.tree2str(root.left)
        right_str = self.tree2str(root.right)

        # ååºä»£ç ä½ç½®
        # æ ¹æ®å·¦å³å­æ ‘å­—ç¬¦ä¸²ç»„è£…å‡ºå‰åºéå†çš„é¡ºåº
        # æŒ‰é¢˜ç›®è¦æ±‚å¤„ç† root åªæœ‰ä¸€è¾¹æœ‰å­æ ‘çš„æƒ…å†µ
        if root.left is not None and root.right is None:
            # çœç•¥ç©ºçš„å³å­æ ‘
            return f"{root.val}({left_str})"
        if root.left is None and root.right is not None:
            # ç©ºçš„å·¦å­æ ‘ä¸èƒ½çœç•¥
            return f"{root.val}()({right_str})"
        # æŒ‰é¢˜ç›®è¦æ±‚å¤„ç† root å·¦å³å­æ ‘éƒ½ä¸ç©ºçš„æƒ…å†µ
        return f"{root.val}({left_str})({right_str})"
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_construct-string-from-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_construct-string-from-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/construct-string-from-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1443. æ”¶é›†æ ‘ä¸Šæ‰€æœ‰è‹¹æœçš„æœ€å°‘æ—¶é—´](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#slug_minimum-time-to-collect-all-apples-in-a-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1443. æ”¶é›†æ ‘ä¸Šæ‰€æœ‰è‹¹æœçš„æœ€å°‘æ—¶é—´</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/minimum-time-to-collect-all-apples-in-a-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/minimum-time-to-collect-all-apples-in-a-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µæœ‰&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code>&nbsp;ä¸ªèŠ‚ç‚¹çš„æ— å‘æ ‘ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code>&nbsp;åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n-1</code>&nbsp;ï¼Œå®ƒä»¬ä¸­æœ‰ä¸€äº›èŠ‚ç‚¹æœ‰è‹¹æœã€‚é€šè¿‡æ ‘ä¸Šçš„ä¸€æ¡è¾¹ï¼Œéœ€è¦èŠ±è´¹ 1 ç§’é’Ÿã€‚ä½ ä»&nbsp;<strong style="font-weight: 600;">èŠ‚ç‚¹ 0&nbsp;</strong>å‡ºå‘ï¼Œè¯·ä½ è¿”å›æœ€å°‘éœ€è¦å¤šå°‘ç§’ï¼Œå¯ä»¥æ”¶é›†åˆ°æ‰€æœ‰è‹¹æœï¼Œå¹¶å›åˆ°èŠ‚ç‚¹ 0 ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ— å‘æ ‘çš„è¾¹ç”±&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">edges</code>&nbsp;ç»™å‡ºï¼Œå…¶ä¸­&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">edges[i] = [from<sub>i</sub>, to<sub>i</sub>]</code>&nbsp;ï¼Œè¡¨ç¤ºæœ‰ä¸€æ¡è¾¹è¿æ¥&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">from</code>&nbsp;å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">to<sub>i</sub></code><span>&nbsp;</span>ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸ƒå°”æ•°ç»„&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">hasApple</code><span>&nbsp;</span>ï¼Œå…¶ä¸­&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">hasApple[i] = true</code>&nbsp;ä»£è¡¨èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">i</code>&nbsp;æœ‰ä¸€ä¸ªè‹¹æœï¼Œå¦åˆ™ï¼ŒèŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">i</code>&nbsp;æ²¡æœ‰è‹¹æœã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/05/10/min_time_collect_apple_1.png" style="max-width: 100%; height: 212px; width: 300px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 7, edges = [[0,1],[0,2],[1,4],[1,5],[2,3],[2,6]], hasApple = [false,false,true,false,true,true,false]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>8 
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ä¸Šå›¾å±•ç¤ºäº†ç»™å®šçš„æ ‘ï¼Œå…¶ä¸­çº¢è‰²èŠ‚ç‚¹è¡¨ç¤ºæœ‰è‹¹æœã€‚ä¸€ä¸ªèƒ½æ”¶é›†åˆ°æ‰€æœ‰è‹¹æœçš„æœ€ä¼˜æ–¹æ¡ˆç”±ç»¿è‰²ç®­å¤´è¡¨ç¤ºã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/05/10/min_time_collect_apple_2.png" style="max-width: 100%; height: 212px; width: 300px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 7, edges = [[0,1],[0,2],[1,4],[1,5],[2,3],[2,6]], hasApple = [false,false,true,false,false,true,false]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>6
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ä¸Šå›¾å±•ç¤ºäº†ç»™å®šçš„æ ‘ï¼Œå…¶ä¸­çº¢è‰²èŠ‚ç‚¹è¡¨ç¤ºæœ‰è‹¹æœã€‚ä¸€ä¸ªèƒ½æ”¶é›†åˆ°æ‰€æœ‰è‹¹æœçš„æœ€ä¼˜æ–¹æ¡ˆç”±ç»¿è‰²ç®­å¤´è¡¨ç¤ºã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>n = 7, edges = [[0,1],[0,2],[1,4],[1,5],[2,3],[2,6]], hasApple = [false,false,false,false,false,false,false]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>0
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 10^5</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">edges.length == n - 1</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">edges[i].length == 2</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= a<sub>i</sub>&nbsp;&lt; b<sub>i</sub>&nbsp;&lt;= n - 1</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">hasApple.length == n</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/minimum-time-to-collect-all-apples-in-a-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1443. æ”¶é›†æ ‘ä¸Šæ‰€æœ‰è‹¹æœçš„æœ€å°‘æ—¶é—´</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#åŸºæœ¬æ€è·¯-6)

è¿™é‡Œè¦ç”¨åˆ°å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡çš„ååºä½ç½®çš„å¦™ç”¨ã€‚

é¢˜ç›®è¾“å…¥çš„æ˜¯è‹¥å¹²æ¡è¾¹çš„å½¢å¼ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç”¨ [å›¾è®ºç®—æ³•åŸºç¡€](https://labuladong.online/algo/data-structure-basic/graph-basic/) ä¸­è®²åˆ°çš„è¡¨ç¤ºæ— å‘å›¾çš„é‚»æ¥è¡¨æ¥å­˜å‚¨è¿™æ£µå¤šå‰æ ‘ã€‚

æ„é€ å‡ºäº†å¤šå‰æ ‘ï¼Œè¿™é“é¢˜æ˜¾ç„¶è¦ç”¨åˆ†è§£é—®é¢˜çš„æ€ç»´æ¨¡å¼ï¼Œå¹¶åˆ©ç”¨ååºä½ç½®çš„å¦™ç”¨ã€‚

ä¸ºä»€ä¹ˆï¼Ÿå‡è®¾ä½ ç«™åœ¨è¿™æ£µæ ‘ä¸­çš„æŸä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½ è„šåº•ä¸‹æœ‰å¤šæ£µå­æ ‘ï¼Œä½ è¦å»è¿™äº›å­æ ‘é‡Œé¢æ‰¾è‹¹æœå¯¹ä¸å¯¹ï¼Ÿ

ä½ å¦‚æœçŸ¥é“äº†åœ¨ä¸€æ£µå­æ ‘ä¸­æ‰¾è‹¹æœçš„æœ€å°æ­¥æ•°ï¼Œå‡è®¾ä¸º `x`ï¼Œé‚£ä¹ˆç®—ä¸Šä½ è¿›å‡ºè¿™æ£µå­æ ‘çš„ 2 æ­¥ï¼Œ`x + 2` å°±æ˜¯ä»ä½ è¿›å…¥è¿™æ£µå­æ ‘æ‰¾è‹¹æœçš„æœ€å°æ­¥æ•°ã€‚

å½“ç„¶ï¼Œä½ è„šåº•ä¸‹å¯èƒ½æœ‰å¤šæ£µå­æ ‘éƒ½æœ‰è‹¹æœï¼Œæ‰€ä»¥å°±ä¼šæœ‰ `x1 + 2, x2 + 2...` è¿™äº›ç»“æœåŠ èµ·æ¥ï¼Œä¸å°±æ˜¯åœ¨ä»¥ä½ è¿™ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„æ•´æ£µæ ‘æ‰¾è‹¹æœçš„æœ€å°æ­¥æ•°äº†ä¹ˆï¼Ÿè¿™åˆ†è§£é—®é¢˜çš„æ€è·¯ä¸å°±å‡ºæ¥äº†ä¹ˆï¼Ÿ

æŠŠä¸Šè¿°æ€è·¯ç¿»è¯‘å‡ºæ¥å³å¯ï¼Œæ³¨æ„é€’å½’å‡½æ•° `collect` çš„å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ²¡æœ‰è‹¹æœçš„æƒ…å†µç»™ä¸ªç‰¹æ®Šå€¼ï¼Œå…·ä½“çœ‹ä»£ç å§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#è§£æ³•ä»£ç -6)

```python
class Solution:
    # é‚»æ¥è¡¨å½¢å¼ï¼Œå­˜å‚¨ç€ä¸€æ£µå¤šå‰æ ‘
    def __init__(self):
        self.graph = {}
        self.visited = set()
    
    def minTime(self, n: int, edges: List[List[int]], hasApple: List[bool]) -> int:
        # æ„é€ å¤šå‰æ ‘ç»“æ„
        for i in range(n):
            self.graph[i] = []
        for a, b in edges:
            self.graph[a].append(b)
            self.graph[b].append(a)

        # æ ¹æ® collect å‡½æ•°çš„å®šä¹‰ï¼Œè¿”å›é¢˜ç›®æƒ³è¦çš„ç»“æœ
        self.hasApple = hasApple  # Adding this line to fix the NameError
        res = self.collect(0)
        return res if res != -1 else 0

    # å®šä¹‰ï¼šéå†ä»¥ root ä¸ºæ ¹çš„è¿™æ£µå¤šå‰æ ‘ï¼Œè¿”å›æ”¶é›†å…¶ä¸­çš„æ‰€æœ‰è‹¹æœæ‰€éœ€çš„æœ€å°‘æ­¥æ•°ï¼ˆæ—¶é—´ï¼‰
    # å¦‚æœè¿”å›çš„æ˜¯ -1ï¼Œè¯´æ˜ä»¥ root ä¸ºæ ¹çš„è¿™æ£µå¤šå‰æ ‘ä¸­æ²¡æœ‰è‹¹æœ
    def collect(self, root: int) -> int:
        if root in self.visited:
            return -1
        self.visited.add(root)

        # å»å­æ ‘çœ‹çœ‹æ˜¯å¦æ‰¾åˆ°äº†è‹¹æœ
        sum_time = 0  # Renamed sum to sum_time to avoid conflict with built-in sum function
        for child in self.graph[root]:
            subTime = self.collect(child)
            if subTime != -1:
                # è¿™æ£µå­æ ‘ä¸­æœ‰è‹¹æœï¼Œä» root è¿›å…¥å’Œç¦»å¼€è¿™æ£µå­æ ‘ï¼Œéœ€è¦é¢å¤–çš„ä¸¤æ­¥
                sum_time += subTime + 2
        # åœ¨ååºä½ç½®å¯¹å½“å‰èŠ‚ç‚¹çš„æƒ…å†µå’Œå­æ ‘è¿”å›çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼š
        if sum_time > 0 or self.hasApple[root]:
            # å­æ ‘ä¸­å‘ç°è‹¹æœï¼Œæˆ–è€…å½“å‰èŠ‚ç‚¹æ˜¯è‹¹æœï¼Œç›´æ¥è¿”å›ï¼Œsum_time å·²ç»ç®—ä¸Šäº†æœ¬èŠ‚ç‚¹å‡ºå…¥å­æ ‘çš„æ­¥æ•°
            return sum_time
        # ä»¥ root ä¸ºæ ¹çš„è¿™æ£µå¤šå‰æ ‘ä¸­ä¸å­˜åœ¨è‹¹æœï¼ŒæŒ‰ç…§å®šä¹‰è¿”å› -1
        return -1
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-ii/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_minimum-time-to-collect-all-apples-in-a-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_minimum-time-to-collect-all-apples-in-a-tree" src="https://labuladong.online/algo-visualize/leetcode/minimum-time-to-collect-all-apples-in-a-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

å†™åœ¨ååºä½ç½®çš„ä»£ç æ˜¯æœ€æ½‡æ´’çš„ï¼Œä¸Šé€šçˆ¶èŠ‚ç‚¹ï¼ˆå¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°è·å–çˆ¶èŠ‚ç‚¹ä¿¡æ¯ï¼‰ï¼Œä¸‹é€šå­æ ‘ï¼ˆå¯ä»¥é€šè¿‡é€’å½’è¿”å›å€¼æ”¶é›†å­æ ‘ä¿¡æ¯ï¼‰ï¼Œæœ‰å°‘éƒ¨åˆ†éš¾åº¦æ¯”è¾ƒå¤§çš„é¢˜ç›®ä¼šåŒæ—¶ç”¨åˆ°è¿™ä¸¤ä¸ªç‰¹æ€§ã€‚

## [968. ç›‘æ§äºŒå‰æ ‘](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#slug_binary-tree-cameras)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">968. ç›‘æ§äºŒå‰æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-cameras/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-cameras/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸ”´</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæˆ‘ä»¬åœ¨æ ‘çš„èŠ‚ç‚¹ä¸Šå®‰è£…æ‘„åƒå¤´ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">èŠ‚ç‚¹ä¸Šçš„æ¯ä¸ªæ‘„å½±å¤´éƒ½å¯ä»¥ç›‘è§†<strong style="font-weight: 600;">å…¶çˆ¶å¯¹è±¡ã€è‡ªèº«åŠå…¶ç›´æ¥å­å¯¹è±¡ã€‚</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;">è®¡ç®—ç›‘æ§æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æ‰€éœ€çš„æœ€å°æ‘„åƒå¤´æ•°é‡ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2018/12/29/bst_cameras_01.png" style="max-width: 100%; height: 163px; width: 138px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>[0,0,null,0,0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å¦‚å›¾æ‰€ç¤ºï¼Œä¸€å°æ‘„åƒå¤´è¶³ä»¥ç›‘æ§æ‰€æœ‰èŠ‚ç‚¹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2018/12/29/bst_cameras_02.png" style="max-width: 100%; height: 312px; width: 139px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>[0,0,null,0,null,0,null,null,0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>éœ€è¦è‡³å°‘ä¸¤ä¸ªæ‘„åƒå¤´æ¥ç›‘è§†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ ä¸Šå›¾æ˜¾ç¤ºäº†æ‘„åƒå¤´æ”¾ç½®çš„æœ‰æ•ˆä½ç½®ä¹‹ä¸€ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><br><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ol style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ç»™å®šæ ‘çš„èŠ‚ç‚¹æ•°çš„èŒƒå›´æ˜¯&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code>ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ 0ã€‚</li></ol></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-cameras/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 968. ç›‘æ§äºŒå‰æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡ååºä½ç½®çš„ç‰¹æ®Šä¹‹å¤„ï¼Œååºä½ç½®å¯ä»¥æ¥æ”¶åˆ°å­æ ‘çš„ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°æ¥æ”¶åˆ°çˆ¶èŠ‚ç‚¹ä¼ é€’çš„ä¿¡æ¯ï¼Œè¿™é“é¢˜å°±å¯ä»¥æ¯”è¾ƒå®Œç¾åœ°ä½“ç°è¿™ä¸€ç‰¹ç‚¹ã€‚

é¦–å…ˆæˆ‘ä»¬åˆ—ä¸¾ä¸€ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½å­˜åœ¨çš„å‡ ç§çŠ¶æ€ï¼š

è¯¥èŠ‚ç‚¹ä¸åœ¨ç›‘æ§åŒºåŸŸå†…ï¼Œç§°ä¸º uncover çŠ¶æ€ï¼›è¯¥èŠ‚ç‚¹åœ¨é™„è¿‘èŠ‚ç‚¹çš„ç›‘æ§èŒƒå›´å†…ï¼Œç§°ä¸º cover çŠ¶æ€ï¼›è¯¥èŠ‚ç‚¹è‡ªå·±è£…äº†æ‘„åƒå¤´ï¼Œç§°ä¸º set çŠ¶æ€ã€‚

å¦‚ä½•ä¿è¯å®‰è£…çš„æ‘„åƒå¤´æ•°é‡å°½å¯èƒ½å°‘å‘¢ï¼Ÿæ˜¾ç„¶å°±æ˜¯è¦å°½å¯èƒ½åˆ†æ•£ï¼Œè®©æ¯ä¸ªæ‘„åƒå¤´ç‰©å°½å…¶ç”¨ã€‚

å…·ä½“æ¥è¯´å°±æ˜¯è‡ªåº•å‘ä¸Šå®‰è£…æ‘„åƒå¤´ï¼Œåœ¨å¶å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸Šå®‰è£…æ‘„åƒå¤´ï¼Œç„¶åæ¯éš”ä¸¤å±‚å†å®‰è£…ï¼ˆå› ä¸ºæ¯ä¸ªæ‘„åƒå¤´éƒ½å¯ä»¥ç®¡ä¸‰å±‚ï¼‰ã€‚

é‚£ä¹ˆä¸€ä¸ªèŠ‚ç‚¹åœ¨ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è¢«å®‰è£…æ‘„åƒå¤´å‘¢ï¼Ÿæ˜¾ç„¶æ˜¯å½“è¿™ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¤„äº uncover çš„çŠ¶æ€çš„æ—¶å€™å¿…é¡»å®‰è£…æ‘„åƒå¤´ï¼Œä»¥ä¾¿è¦†ç›–å­èŠ‚ç‚¹ã€‚

ç»¼ä¸Šï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ååºä½ç½®è‡ªåº•å‘ä¸Šéå†äºŒå‰æ ‘ï¼ŒåŒæ—¶è¦åˆ©ç”¨å­èŠ‚ç‚¹çš„çŠ¶æ€ä»¥åŠçˆ¶èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦éœ€è¦å®‰è£…æ‘„åƒå¤´ã€‚

è§£æ³•ä¸­ `setCamera` å‡½æ•°å°±è´Ÿè´£æŒ‰ç…§æœ€ä¼˜æ–¹å¼ç»™äºŒå‰æ ‘å®‰è£…æ‘„åƒå¤´ï¼ŒåŒæ—¶è¿”å›èŠ‚ç‚¹çš„çŠ¶æ€ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#è§£æ³•ä»£ç )

```python
class Solution:
    def minCameraCover(self, root: TreeNode) -> int:
        self.res = 0
        self.setCamera(root, False)
        return self.res

    # å®šä¹‰ï¼šè¾“å…¥ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ï¼Œä»¥æœ€ä¼˜ç­–ç•¥åœ¨è¿™æ£µäºŒå‰æ ‘ä¸Šæ”¾ç½®æ‘„åƒå¤´ï¼Œ
    # ç„¶åè¿”å› root èŠ‚ç‚¹çš„æƒ…å†µï¼š
    # è¿”å› -1 ä»£è¡¨ root ä¸ºç©ºï¼Œè¿”å› 0 ä»£è¡¨ root æœªè¢« coverï¼Œ
    # è¿”å› 1 ä»£è¡¨ root å·²ç»è¢« coverï¼Œè¿”å› 2 ä»£è¡¨ root ä¸Šæ”¾ç½®äº†æ‘„åƒå¤´ã€‚
    def setCamera(self, root: TreeNode, hasParent: bool) -> int:
        if root is None:
            return -1
        # è·å–å·¦å³å­èŠ‚ç‚¹çš„æƒ…å†µ
        left = self.setCamera(root.left, True)
        right = self.setCamera(root.right, True)

        # æ ¹æ®å·¦å³å­èŠ‚ç‚¹çš„æƒ…å†µå’Œçˆ¶èŠ‚ç‚¹çš„æƒ…å†µåˆ¤æ–­å½“å‰èŠ‚ç‚¹åº”è¯¥åšçš„äº‹æƒ…
        if left == -1 and right == -1:
            # å½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹
            if hasParent:
                # æœ‰çˆ¶èŠ‚ç‚¹çš„è¯ï¼Œè®©çˆ¶èŠ‚ç‚¹æ¥ cover è‡ªå·±
                return 0
            # æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„è¯ï¼Œè‡ªå·± set ä¸€ä¸ªæ‘„åƒå¤´
            self.res += 1
            return 2

        if left == 0 or right == 0:
            # å·¦å³å­æ ‘å­˜åœ¨æ²¡æœ‰è¢« cover çš„
            # å¿…é¡»åœ¨å½“å‰èŠ‚ç‚¹ set ä¸€ä¸ªæ‘„åƒå¤´
            self.res += 1
            return 2

        if left == 2 or right == 2:
            # å·¦å³å­æ ‘åªè¦æœ‰ä¸€ä¸ª set äº†æ‘„åƒå¤´
            # å½“å‰èŠ‚ç‚¹å°±å·²ç»æ˜¯ cover çŠ¶æ€äº†
            return 1

        # å‰©ä¸‹ left == 1 && right == 1 çš„æƒ…å†µ
        # å³å½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹éƒ½è¢« cover
        if hasParent:
            # å¦‚æœæœ‰çˆ¶èŠ‚ç‚¹çš„è¯ï¼Œå¯ä»¥ç­‰çˆ¶èŠ‚ç‚¹ cover è‡ªå·±
            return 0
        else:
            # æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œåªèƒ½è‡ªå·± set ä¸€ä¸ªæ‘„åƒå¤´
            self.res += 1
            return 2
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_binary-tree-cameras" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-cameras" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-cameras/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [979. åœ¨äºŒå‰æ ‘ä¸­åˆ†é…ç¡¬å¸](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#slug_distribute-coins-in-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">979. åœ¨äºŒå‰æ ‘ä¸­åˆ†é…ç¡¬å¸</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/distribute-coins-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/distribute-coins-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªæœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>ä¸ªç»“ç‚¹çš„äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œå…¶ä¸­æ ‘ä¸­æ¯ä¸ªç»“ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">node</code><span>&nbsp;</span>éƒ½å¯¹åº”æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">node.val</code><span>&nbsp;</span>æšç¡¬å¸ã€‚æ•´æ£µæ ‘ä¸Šä¸€å…±æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code><span>&nbsp;</span>æšç¡¬å¸ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">åœ¨ä¸€æ¬¡ç§»åŠ¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸¤ä¸ªç›¸é‚»çš„ç»“ç‚¹ï¼Œç„¶åå°†ä¸€æšç¡¬å¸ä»å…¶ä¸­ä¸€ä¸ªç»“ç‚¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç»“ç‚¹ã€‚ç§»åŠ¨å¯ä»¥æ˜¯ä»çˆ¶ç»“ç‚¹åˆ°å­ç»“ç‚¹ï¼Œæˆ–è€…ä»å­ç»“ç‚¹ç§»åŠ¨åˆ°çˆ¶ç»“ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¿”å›ä½¿æ¯ä¸ªç»“ç‚¹ä¸Š<span>&nbsp;</span><strong style="font-weight: 600;">åªæœ‰</strong><span>&nbsp;</span>ä¸€æšç¡¬å¸æ‰€éœ€çš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å°‘</strong><span>&nbsp;</span>ç§»åŠ¨æ¬¡æ•°ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/01/18/tree1.png" style="max-width: 100%; width: 250px; height: 236px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,0,0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ä¸€æšç¡¬å¸ä»æ ¹ç»“ç‚¹ç§»åŠ¨åˆ°å·¦å­ç»“ç‚¹ï¼Œä¸€æšç¡¬å¸ä»æ ¹ç»“ç‚¹ç§»åŠ¨åˆ°å³å­ç»“ç‚¹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/01/18/tree2.png" style="max-width: 100%; width: 250px; height: 236px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [0,3,0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>3
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å°†ä¸¤æšç¡¬å¸ä»æ ¹ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ç§»åŠ¨åˆ°æ ¹ç»“ç‚¹ï¼ˆä¸¤æ¬¡ç§»åŠ¨ï¼‰ã€‚ç„¶åï¼Œå°†ä¸€æšç¡¬å¸ä»æ ¹ç»“ç‚¹ç§»åŠ¨åˆ°å³å­ç»“ç‚¹ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= n &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= n</code></li><li>æ‰€æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code><span>&nbsp;</span>çš„å€¼ä¹‹å’Œæ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/distribute-coins-in-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 979. åœ¨äºŒå‰æ ‘ä¸­åˆ†é…ç¡¬å¸</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#åŸºæœ¬æ€è·¯-1)

åšè¿™é“é¢˜ä¹‹å‰ï¼Œä½ åº”è¯¥å…ˆåšä¸€ä¸‹ [543. äºŒå‰æ ‘çš„ç›´å¾„](https://leetcode.cn/problems/diameter-of-binary-tree)ï¼Œå¹¶ä¸”è®¤çœŸç†è§£ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) ä¸­è¯´åˆ°çš„ååºéå†çš„ç”¨æ³•ã€‚

ç¡¬å¸çš„ç§»åŠ¨è§„åˆ™çœ‹ä¼¼å¾ˆå¤æ‚ï¼Œå› ä¸ºä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½éœ€è¦ç§»å‡ºç¡¬å¸ï¼Œä¹Ÿå¯èƒ½ç§»å…¥ç¡¬å¸ï¼Œè¿˜è¦æ±‚ç§»åŠ¨æ¬¡æ•°æœ€å°‘ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰æ— ä»ä¸‹æ‰‹ï¼Ÿ

å¯¹äºè¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è§‚å¯Ÿè§„å¾‹ä»”ç»†æ€è€ƒï¼Œçœ‹çœ‹èƒ½å¦å¯¹é¢˜ç›®è¿›è¡Œç®€åŒ–ï¼Œç„¶åå†æ±‚è§£ã€‚

é¦–å…ˆé¢˜ç›®è¯´äº†æ•´æ£µæ ‘ä¸Šä¸€å…±æœ‰ `n` æšç¡¬å¸ï¼Œæ„æ€æ˜¯é€šè¿‡ç§»åŠ¨ï¼Œä¸€å®šæ˜¯å¯ä»¥åšåˆ°æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€æšç¡¬å¸ï¼Œä¸å­˜åœ¨æ— è§£çš„æƒ…å†µã€‚

ç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ `node.val` ä¸ªç¡¬å¸ï¼Œ`node.val >= 0`ï¼Œå…è®¸æˆ‘ä»¬åœ¨ç›¸é‚»èŠ‚ç‚¹éšæ„ç§»åŠ¨ç¡¬å¸ï¼Œè®¡ç®—å°†æ‰€æœ‰èŠ‚ç‚¹é…å¹³ï¼ˆåªæœ‰ 1 ä¸ªç¡¬å¸ï¼‰çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°ã€‚

**æˆ‘ä»¬å¯ä»¥ç®€å•å˜æ¢ä¸€ä¸‹ï¼šå…è®¸æ¯ä¸ªèŠ‚ç‚¹çš„ç¡¬å¸ä¸ªæ•°ä¸ºè´Ÿæ•°ï¼Œä¸”åªå…è®¸å­èŠ‚ç‚¹å‘çˆ¶èŠ‚ç‚¹ç§»åŠ¨ç¡¬å¸**ã€‚

æ¯”æ–¹è¯´çˆ¶èŠ‚ç‚¹æƒ³å‘å­èŠ‚ç‚¹ç§»åŠ¨ 1 ä¸ªç¡¬å¸ï¼Œç­‰ä»·äºå­èŠ‚ç‚¹å‘çˆ¶èŠ‚ç‚¹ç§»åŠ¨ -1 ä¸ªç¡¬å¸ï¼›å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ç¡¬å¸ä¸ªæ•°ä¸º -3ï¼Œé‚£ä¹ˆä»–å°±éœ€è¦å‘çˆ¶èŠ‚ç‚¹ç§»åŠ¨ -4 ä¸ªç¡¬å¸ï¼Œæ‰èƒ½è®©è‡ªå·±çš„ç¡¬å¸ä¸ªæ•°å˜æˆ 1ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸ç”¨è€ƒè™‘ç§»å…¥å’Œç§»å‡ºçš„åŒºåˆ«äº†ï¼Œæƒ³è¦æŠŠä¸€ä¸ªèŠ‚ç‚¹çš„ç¡¬å¸ä¸ªæ•°å˜æˆ 1ï¼Œå°±è¦å‘çˆ¶èŠ‚ç‚¹ç§»åŠ¨ `node.val - 1` ä¸ªèŠ‚ç‚¹ã€‚

ç°åœ¨å°±å¯ä»¥å¼€å§‹äºŒå‰æ ‘çš„é€šç”¨è§£é¢˜æ€è·¯ï¼š**å‡æƒ³ä½ ç°åœ¨ç«™åœ¨æ ¹èŠ‚ç‚¹ä¸Šï¼Œä½ å¦‚ä½•çŸ¥é“æŠŠæ•´æ£µæ ‘é…å¹³æ‰€éœ€çš„æœ€å°ç§»åŠ¨æ¬¡æ•°**ï¼Ÿ

å·¦å­æ ‘æ¥è·Ÿä½ æ±‡æŠ¥ï¼Œæƒ³ç»™ä½ ç§»åŠ¨ `left` ä¸ªèŠ‚ç‚¹ï¼›å³å­æ ‘æ¥æ‰¾ä½ æ±‡æŠ¥ï¼Œæƒ³ç»™ä½ ç§»åŠ¨ `right` ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä½ æ‰€åœ¨èŠ‚ç‚¹å‘çˆ¶èŠ‚ç‚¹ç§»åŠ¨çš„ç¡¬å¸ä¸ªæ•°å°±æ˜¯ï¼š

```
left + right + (node.val - 1)
```

è¿™ä¸ªè¿‡ç¨‹ä¸­ç§»åŠ¨æ¬¡æ•°æ˜¯ï¼š

```
// è®©å½“å‰è¿™æ£µæ ‘å¹³è¡¡æ‰€éœ€çš„ç§»åŠ¨æ¬¡æ•°
Math.abs(left) + Math.abs(right) + (node.val - 1);
```

ç°åœ¨ä½ å»çœ‹ä»£ç å°±èƒ½ç†è§£äº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def distributeCoins(self, root: TreeNode) -> int:
        self.res = 0
        self.getRest(root)
        return self.res

    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›è¿™æ£µäºŒå‰æ ‘ä¸­å¤šå‡ºçš„ç¡¬å¸ä¸ªæ•°ï¼Œè¿”å›è´Ÿæ•°ä»£è¡¨ç¼ºå°‘ç¡¬å¸
    def getRest(self, root: TreeNode) -> int:
        if root is None:
            return 0
        # è®¡ç®—å·¦å³å­æ ‘å¤šå‡ºçš„ç¡¬å¸ä¸ªæ•°
        left = self.getRest(root.left)
        right = self.getRest(root.right)

        # ååºä½ç½®ï¼Œè®¡ç®—å½“å‰è¿™æ£µæ ‘é…å¹³æ‰€éœ€çš„ç§»åŠ¨æ¬¡æ•°
        self.res += abs(left) + abs(right) + (root.val - 1)

        # å®ç°å‡½æ•°çš„å®šä¹‰
        return left + right + (root.val - 1)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_distribute-coins-in-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_distribute-coins-in-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/distribute-coins-in-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1080. æ ¹åˆ°å¶è·¯å¾„ä¸Šçš„ä¸è¶³èŠ‚ç‚¹](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#slug_insufficient-nodes-in-root-to-leaf-paths)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1080. æ ¹åˆ°å¶è·¯å¾„ä¸Šçš„ä¸è¶³èŠ‚ç‚¹</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/insufficient-nodes-in-root-to-leaf-paths/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/insufficient-nodes-in-root-to-leaf-paths/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>å’Œä¸€ä¸ªæ•´æ•°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">limit</code><span>&nbsp;</span>ï¼Œè¯·ä½ åŒæ—¶åˆ é™¤æ ‘ä¸­æ‰€æœ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä¸è¶³èŠ‚ç‚¹<span>&nbsp;</span></strong>ï¼Œå¹¶è¿”å›æœ€ç»ˆäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å‡å¦‚é€šè¿‡èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">node</code><span>&nbsp;</span>çš„æ¯ç§å¯èƒ½çš„ â€œæ ¹-å¶â€ è·¯å¾„ä¸Šå€¼çš„æ€»å’Œå…¨éƒ½å°äºç»™å®šçš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">limit</code>ï¼Œåˆ™è¯¥èŠ‚ç‚¹è¢«ç§°ä¹‹ä¸º<strong style="font-weight: 600;"><span>&nbsp;</span>ä¸è¶³èŠ‚ç‚¹<span>&nbsp;</span></strong>ï¼Œéœ€è¦è¢«åˆ é™¤ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">å¶å­èŠ‚ç‚¹</strong>ï¼Œå°±æ˜¯æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/06/05/insufficient-11.png" style="max-width: 100%; width: 500px; height: 207px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,-99,-99,7,8,9,-99,-99,12,13,-99,14], limit = 1
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,2,3,4,null,null,7,8,9,null,14]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/06/05/insufficient-3.png" style="max-width: 100%; width: 400px; height: 274px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,4,8,11,null,17,4,7,1,null,null,5,3], limit = 22
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[5,4,8,11,null,17,4,7,null,null,null,5]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/06/11/screen-shot-2019-06-11-at-83301-pm.png" style="max-width: 100%; width: 250px; height: 199px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,-3,-5,null,4,null], limit = -1
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,-3,4]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 5000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 10<sup>5</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>9</sup><span>&nbsp;</span>&lt;= limit &lt;= 10<sup>9</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/insufficient-nodes-in-root-to-leaf-paths/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1080. æ ¹åˆ°å¶è·¯å¾„ä¸Šçš„ä¸è¶³èŠ‚ç‚¹</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#åŸºæœ¬æ€è·¯-2)

å¯ä»¥è¯´è¿™é“é¢˜éå¸¸ç²¾å¦™ï¼Œå®Œç¾è¿ç”¨å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) ä¸­è¯´åˆ°çš„å‰åºä½ç½®å’Œååºä½ç½®çš„ç‰¹ç‚¹ï¼š

å‰åºä½ç½®å¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°è·å–çˆ¶èŠ‚ç‚¹ä¼ é€’æ¥çš„æ•°æ®ï¼Œååºä½ç½®å¯ä»¥é¢å¤–è·å–å­æ ‘ä¼ é€’å›æ¥çš„æ•°æ®ã€‚

é¦–å…ˆï¼Œå¯¹äºä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä»¥è‡ªå·±ä¸ºæ ¹çš„è¿™æ£µäºŒå‰æ ‘çš„è·¯å¾„ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„æ˜¯å¦å°äº `limit` çš„çº¦æŸæ˜¯å¾ˆæ˜¾ç„¶çš„ï¼Œå¦‚æœå°äº `limit`ï¼Œè¯´æ˜å®ƒéœ€è¦è¢«åˆ é™¤ã€‚

ç„¶åï¼Œå¯¹äºä¸€ä¸ªéå¶å­èŠ‚ç‚¹ `x`ï¼Œå®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªã€Œä¸è¶³èŠ‚ç‚¹ã€ï¼Œæˆ–è€…è¯´æ˜¯å¦å­˜åœ¨ä¸€æ¡ä¸æ»¡è¶³ `limit` çº¦æŸçš„è·¯å¾„ç©¿è¿‡è¿™ä¸ªèŠ‚ç‚¹ï¼Œå…¶å®å¯ä»¥æ ¹æ®å­æ ‘æ¨å¯¼å‡ºæ¥ã€‚

å¦‚æœ `x` çš„å·¦å³å­èŠ‚ç‚¹éƒ½è¢«åˆ é™¤ï¼Œé‚£ä¹ˆå°±è¯´æ˜ `x` çš„å·¦å³å­æ ‘ä¸Šçš„è·¯å¾„éƒ½ä¸æ»¡è¶³ `limit` çš„çº¦æŸï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰ç©¿è¿‡ `x` çš„è·¯å¾„éƒ½ä¸æ»¡è¶³çº¦æŸï¼Œå³ `x` ä¹Ÿåº”è¯¥è¢«åˆ é™¤ã€‚

æ ¹æ®ä¸Šè¿°æ€è·¯å®ç°ä»£ç ï¼Œå³å¯è§£å†³è¿™é“é¢˜ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#è§£æ³•ä»£ç -2)

```python
# å®šä¹‰ï¼šè¾“å…¥ä¸€ä¸ªèŠ‚ç‚¹ rootï¼Œå’Œçº¦æŸ limitï¼Œ
# åˆ é™¤ä»¥ root ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸­çš„ã€Œä¸è¶³èŠ‚ç‚¹ã€ï¼Œè¿”å›åˆ é™¤å®Œæˆåçš„äºŒå‰æ ‘æ ¹èŠ‚ç‚¹
class Solution:
    def sufficientSubset(self, root: TreeNode, limit: int) -> TreeNode:
        if root is None:
            return None
        # å‰åºä½ç½®ï¼Œæ¥æ”¶çˆ¶èŠ‚ç‚¹ä¼ é€’çš„ limit çº¦æŸå†³å®šå¶å­ç»“ç‚¹æ˜¯å¦éœ€è¦è¢«åˆ é™¤
        if root.left is None and root.right is None:
            if root.val < limit:
                # å¯¹äºå¶å­èŠ‚ç‚¹ï¼Œå¦‚æœä½äº limit è¯´æ˜éœ€è¦è¢«åˆ é™¤
                return None
            return root
        # å…ˆå¯¹å·¦å³å­æ ‘è¿›è¡Œåˆ é™¤ï¼Œæ¥æ”¶è¿”å›å€¼
        left = self.sufficientSubset(root.left, limit - root.val)
        right = self.sufficientSubset(root.right, limit - root.val)
        # ååºä½ç½®ï¼Œæ ¹æ®å­æ ‘çš„åˆ é™¤æƒ…å†µå†³å®šè‡ªå·±æ˜¯å¦éœ€è¦è¢«åˆ é™¤
        if left is None and right is None:
            # å¦‚æœå·¦å³å­æ ‘ä¸æ»¡è¶³ limit - root.val çš„çº¦æŸï¼Œé‚£ä¹ˆå°±å­˜åœ¨ç»è¿‡ root
            # èŠ‚ç‚¹çš„è·¯å¾„ä¸æ»¡è¶³çº¦æŸï¼Œä¹Ÿå°±è¯´æ˜ root èŠ‚ç‚¹æ˜¯ã€Œä¸è¶³èŠ‚ç‚¹ã€ï¼Œéœ€è¦è¢«åˆ æ‰
            return None
        root.left = left
        root.right = right
        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_insufficient-nodes-in-root-to-leaf-paths" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_insufficient-nodes-in-root-to-leaf-paths" src="https://labuladong.online/algo-visualize/leetcode/insufficient-nodes-in-root-to-leaf-paths/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [2049. ç»Ÿè®¡æœ€é«˜åˆ†çš„èŠ‚ç‚¹æ•°ç›®](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#slug_count-nodes-with-the-highest-score)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">2049. ç»Ÿè®¡æœ€é«˜åˆ†çš„èŠ‚ç‚¹æ•°ç›®</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/count-nodes-with-the-highest-score/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/count-nodes-with-the-highest-score/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µæ ¹èŠ‚ç‚¹ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>çš„&nbsp;<strong style="font-weight: 600;">äºŒå‰æ ‘</strong>&nbsp;ï¼Œå®ƒæ€»å…±æœ‰<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n</code>&nbsp;ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code>&nbsp;åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n - 1</code>&nbsp;ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä»&nbsp;<strong style="font-weight: 600;">0</strong>&nbsp;å¼€å§‹çš„æ•´æ•°æ•°ç»„&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">parents</code>&nbsp;è¡¨ç¤ºè¿™æ£µæ ‘ï¼Œå…¶ä¸­&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">parents[i]</code>&nbsp;æ˜¯èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">i</code>&nbsp;çš„çˆ¶èŠ‚ç‚¹ã€‚ç”±äºèŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code>&nbsp;æ˜¯æ ¹ï¼Œæ‰€ä»¥&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">parents[0] == -1</code>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¸€ä¸ªå­æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">å¤§å°</strong>&nbsp;ä¸ºè¿™ä¸ªå­æ ‘å†…èŠ‚ç‚¹çš„æ•°ç›®ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„&nbsp;<strong style="font-weight: 600;">åˆ†æ•°</strong>&nbsp;ã€‚æ±‚å‡ºæŸä¸ªèŠ‚ç‚¹åˆ†æ•°çš„æ–¹æ³•æ˜¯ï¼Œå°†è¿™ä¸ªèŠ‚ç‚¹å’Œä¸å®ƒç›¸è¿çš„è¾¹å…¨éƒ¨<span>&nbsp;</span><strong style="font-weight: 600;">åˆ é™¤</strong>&nbsp;ï¼Œå‰©ä½™éƒ¨åˆ†æ˜¯è‹¥å¹²ä¸ª<span>&nbsp;</span><strong style="font-weight: 600;">éç©º</strong>&nbsp;å­æ ‘ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„<span>&nbsp;</span><strong style="font-weight: 600;">åˆ†æ•°</strong>&nbsp;ä¸ºæ‰€æœ‰è¿™äº›å­æ ‘<span>&nbsp;</span><strong style="font-weight: 600;">å¤§å°çš„ä¹˜ç§¯</strong>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·ä½ è¿”å›æœ‰<span>&nbsp;</span><strong style="font-weight: 600;">æœ€é«˜å¾—åˆ†</strong>&nbsp;èŠ‚ç‚¹çš„<span>&nbsp;</span><strong style="font-weight: 600;">æ•°ç›®</strong>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹&nbsp;1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="example-1" src="https://labuladong.online/algo/images/lc/uploads/2021/10/03/example-1.png" style="max-width: 100%; width: 604px; height: 266px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><b>è¾“å…¥ï¼š</b>parents = [-1,2,0,2,0]
<b>è¾“å‡ºï¼š</b>3
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
- èŠ‚ç‚¹ 0 çš„åˆ†æ•°ä¸ºï¼š3 * 1 = 3
- èŠ‚ç‚¹ 1 çš„åˆ†æ•°ä¸ºï¼š4 = 4
- èŠ‚ç‚¹ 2 çš„åˆ†æ•°ä¸ºï¼š1 * 1 * 2 = 2
- èŠ‚ç‚¹ 3 çš„åˆ†æ•°ä¸ºï¼š4 = 4
- èŠ‚ç‚¹ 4 çš„åˆ†æ•°ä¸ºï¼š4 = 4
æœ€é«˜å¾—åˆ†ä¸º 4 ï¼Œæœ‰ä¸‰ä¸ªèŠ‚ç‚¹å¾—åˆ†ä¸º 4 ï¼ˆåˆ†åˆ«æ˜¯èŠ‚ç‚¹ 1ï¼Œ3 å’Œ 4 ï¼‰ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="example-2" src="https://labuladong.online/algo/images/lc/uploads/2021/10/03/example-2.png" style="max-width: 100%; width: 95px; height: 143px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><b>è¾“å…¥ï¼š</b>parents = [-1,2,0]
<b>è¾“å‡ºï¼š</b>2
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
- èŠ‚ç‚¹ 0 çš„åˆ†æ•°ä¸ºï¼š2 = 2
- èŠ‚ç‚¹ 1 çš„åˆ†æ•°ä¸ºï¼š2 = 2
- èŠ‚ç‚¹ 2 çš„åˆ†æ•°ä¸ºï¼š1 * 1 = 1
æœ€é«˜åˆ†æ•°ä¸º 2 ï¼Œæœ‰ä¸¤ä¸ªèŠ‚ç‚¹åˆ†æ•°ä¸º 2 ï¼ˆåˆ†åˆ«ä¸ºèŠ‚ç‚¹ 0 å’Œ 1 ï¼‰ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">n == parents.length</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2 &lt;= n &lt;= 10<sup>5</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">parents[0] == -1</code></li><li>å¯¹äº&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">i != 0</code>&nbsp;ï¼Œæœ‰&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= parents[i] &lt;= n - 1</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">parents</code>&nbsp;è¡¨ç¤ºä¸€æ£µäºŒå‰æ ‘ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/count-nodes-with-the-highest-score/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 2049. ç»Ÿè®¡æœ€é«˜åˆ†çš„èŠ‚ç‚¹æ•°ç›®</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ï¼Œè€Œä¸”è¦ç”¨åˆ°ååºä½ç½®çš„å¦™ç”¨ã€‚

åœ¨åšè¿™é“é¢˜ä¹‹å‰ï¼Œå»ºè®®ä½ å…ˆå»çœ‹ä¸‹æˆ‘ç»™ [1339. åˆ†è£‚äºŒå‰æ ‘çš„æœ€å¤§ä¹˜ç§¯](https://leetcode.cn/problems/maximum-product-of-splitted-binary-tree) å†™çš„æ€è·¯å’Œè§£æ³•ä»£ç ï¼Œç„¶åç«‹é©¬å°±çŸ¥é“è¿™é“é¢˜çš„æ€è·¯äº†ã€‚

ç®€å•è¯´ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„ **åˆ†æ•° = å·¦å­æ ‘èŠ‚ç‚¹ä¸ªæ•° x å³å­æ ‘èŠ‚ç‚¹ä¸ªæ•° x é™¤è‡ªå·±å¤–å…¶ä»–èŠ‚ç‚¹ä¸ªæ•°**ã€‚

åªè¦å†™ä¸ª `countNode` å‡½æ•°ï¼Œåœ¨ååºä½ç½®å¯ä»¥å¾—åˆ°å·¦å³å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•° `leftCount` å’Œ `rightCount`ï¼Œç„¶åé™¤è‡ªå·±å¤–å…¶ä»–èŠ‚ç‚¹ä¸ªæ•° `otherCount` å°±ç­‰äºæ€»çš„èŠ‚ç‚¹ä¸ªæ•° `n` å‡æ‰å·¦å³å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°å†å‡æ‰å½“å‰èŠ‚ç‚¹ï¼Œæœ€åæ±‚ä¸ªä¹˜ç§¯å°±èƒ½ç®—å‡ºå½“å‰èŠ‚ç‚¹çš„ã€Œåˆ†æ•°ã€äº†ã€‚

å½“ç„¶ï¼Œè¿™é“é¢˜è¿˜æœ‰ä¸ªéš¾ç‚¹å°±æ˜¯ï¼šé¢˜ç›®ç»™çš„ `parents` æ•°ç»„ä¸æ˜¯æˆ‘ä»¬ç»å¸¸è§åˆ°çš„äºŒå‰æ ‘å½¢å¼ã€‚

ä½†é—®é¢˜ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ `parents` æ•°ç»„è½¬åŒ–æˆç±»ä¼¼ [å›¾è®ºåŸºç¡€](https://labuladong.online/algo/data-structure-basic/graph-basic/) ä¸­è®²åˆ°çš„é‚»æ¥è¡¨ç»“æ„ï¼Œç„¶åå°±å¯ä»¥åƒæ“ä½œå¸¸è§„äºŒå‰æ ‘ä¸€æ ·å†™ç®—æ³•äº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘åˆ©ç”¨ååºä½ç½®è§£é¢˜ III](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#è§£æ³•ä»£ç -3)

```python
class Solution:
    # ç”¨é‚»æ¥è¡¨è¡¨ç¤ºçš„ä¸€æ£µäºŒå‰æ ‘
    def __init__(self):
        self.tree = None
        self.scoreToCount = {}

    def countHighestScoreNodes(self, parents):
        self.tree = self.buildTree(parents)
        self.countNode(0)
        # è®¡ç®—æœ€å¤§åˆ†æ•°å‡ºç°çš„æ¬¡æ•°
        maxScore = 0
        for score in self.scoreToCount.keys():
            maxScore = max(maxScore, score)
        return self.scoreToCount[maxScore]

    # è®¡ç®—äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°
    def countNode(self, root):
        if root == -1:
            return 0
        # äºŒå‰æ ‘ä¸­èŠ‚ç‚¹æ€»æ•°
        n = len(self.tree)
        leftCount = self.countNode(self.tree[root][0])
        rightCount = self.countNode(self.tree[root][1])

        # ååºä½ç½®ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ã€Œåˆ†æ•°ã€
        otherCount = n - leftCount - rightCount - 1
        # æ³¨æ„ï¼Œè¿™é‡Œè¦æŠŠ int è½¬åŒ–æˆ longï¼Œå¦åˆ™ä¼šäº§ç”Ÿæº¢å‡ºï¼ï¼ï¼
        score = max(leftCount, 1) * max(rightCount, 1) * max(otherCount, 1)
        # ç»™åˆ†æ•° score è®¡æ•°
        if score in self.scoreToCount:
            self.scoreToCount[score] += 1
        else:
            self.scoreToCount[score] = 1

        return leftCount + rightCount + 1

    # å°† parents æ•°ç»„è½¬åŒ–æˆå¸¸è§„äºŒå‰æ ‘ï¼ˆé‚»æ¥è¡¨å½¢å¼ï¼‰
    def buildTree(self, parents):
        n = len(parents)
        # è¡¨èŠ‚ç‚¹ x çš„å·¦å­èŠ‚ç‚¹ä¸º tree[x][0]ï¼ŒèŠ‚ç‚¹ x çš„å³å­èŠ‚ç‚¹ä¸º tree[x][1]
        # è‹¥ tree[x][0] æˆ– tree[x][1] ç­‰äº -1 åˆ™ä»£è¡¨ç©ºæŒ‡é’ˆ
        tree = [[-1, -1] for _ in range(n)]
        # æ ¹æ® parents æ•°ç»„æ„å»ºäºŒå‰æ ‘ï¼ˆè·³è¿‡ parents[0] æ ¹èŠ‚ç‚¹ï¼‰
        for i in range(1, n):
            parent_i = parents[i]
            if tree[parent_i][0] == -1:
                tree[parent_i][0] = i
            else:
                tree[parent_i][1] = i
        return tree
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-post-order-iii/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_count-nodes-with-the-highest-score" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_count-nodes-with-the-highest-score" src="https://labuladong.online/algo-visualize/leetcode/count-nodes-with-the-highest-score/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>



# ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I

äºŒå‰æ ‘å¤§éƒ¨åˆ†é¢˜ç›®éƒ½å¯ä»¥ç”¨é€’å½’çš„ç®—æ³•è§£å†³ï¼Œä½†å°‘éƒ¨åˆ†é¢˜ç›®ç”¨é€’å½’æ¯”è¾ƒéº»çƒ¦çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨å±‚åºéå†çš„æ–¹å¼è§£å†³ã€‚

---

## [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_binary-tree-level-order-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">102. äºŒå‰æ ‘çš„å±‚åºéå†</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-level-order-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„<span>&nbsp;</span><strong style="font-weight: 600;">å±‚åºéå†</strong><span>&nbsp;</span>ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/tree1.jpg" style="max-width: 100%; width: 277px; height: 302px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[3],[9,20],[15,7]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = []
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 2000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 102. äºŒå‰æ ‘çš„å±‚åºéå†</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯)

è¿™é¢˜æ²¡å•¥å¯è¯´çš„ï¼Œ[äºŒå‰æ ‘çš„é€’å½’/å±‚åºéå†](https://labuladong.online/algo/data-structure-basic/binary-tree-traverse-basic/) éå†ä¸­ä»‹ç»äº†ä¸‰ç§å±‚åºï¼ˆBFSï¼‰éå†çš„å†™æ³•ï¼Œä»»å†™ä¸€ç§éƒ½å¯ä»¥ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç )

```python
from collections import deque

class Solution:
    def levelOrder(self, root: TreeNode) -> List[List[int]]:
        res = []
        if root is None:
            return res

        q = deque()
        q.append(root)
        # while å¾ªç¯æ§åˆ¶ä»ä¸Šå‘ä¸‹ä¸€å±‚å±‚éå†
        while q:
            sz = len(q)
            # è®°å½•è¿™ä¸€å±‚çš„èŠ‚ç‚¹å€¼
            level = []
            # for å¾ªç¯æ§åˆ¶æ¯ä¸€å±‚ä»å·¦å‘å³éå†
            for i in range(sz):
                cur = q.popleft()
                level.append(cur.val)
                if cur.left is not None:
                    q.append(cur.left)
                if cur.right is not None:
                    q.append(cur.right)
            res.append(level)
        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_binary-tree-level-order-traversal" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-level-order-traversal" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-level-order-traversal/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå† ğŸŸ ](https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal)
- [107. äºŒå‰æ ‘çš„å±‚åºéå† II ğŸŸ ](https://leetcode.cn/problems/binary-tree-level-order-traversal-ii)
- [1161. æœ€å¤§å±‚å†…å…ƒç´ å’Œ ğŸŸ ](https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree)
- [1302. å±‚æ•°æœ€æ·±å¶å­èŠ‚ç‚¹çš„å’Œ ğŸŸ ](https://leetcode.cn/problems/deepest-leaves-sum)
- [1609. å¥‡å¶æ ‘ ğŸŸ ](https://leetcode.cn/problems/even-odd-tree)
- [429. N å‰æ ‘çš„å±‚åºéå† ğŸŸ ](https://leetcode.cn/problems/n-ary-tree-level-order-traversal)
- [637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ ğŸŸ¢](https://leetcode.cn/problems/average-of-levels-in-binary-tree)
- [919. å®Œå…¨äºŒå‰æ ‘æ’å…¥å™¨ ğŸŸ ](https://leetcode.cn/problems/complete-binary-tree-inserter)
- [958. äºŒå‰æ ‘çš„å®Œå…¨æ€§æ£€éªŒ ğŸŸ ](https://leetcode.cn/problems/check-completeness-of-a-binary-tree)
- [å‰‘æŒ‡ Offer 32 - I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ ğŸŸ ](https://leetcode.cn/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof)
- [å‰‘æŒ‡ Offer 32 - II. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ II ğŸŸ¢](https://leetcode.cn/problems/cong-shang-dao-xia-da-yin-er-cha-shu-ii-lcof)
- [å‰‘æŒ‡ Offer 32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III ğŸŸ ](https://leetcode.cn/problems/cong-shang-dao-xia-da-yin-er-cha-shu-iii-lcof)

## [107. äºŒå‰æ ‘çš„å±‚åºéå† II](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_binary-tree-level-order-traversal-ii)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">107. äºŒå‰æ ‘çš„å±‚åºéå† II</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-level-order-traversal-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼<span>&nbsp;</span><strong style="font-weight: 600;">è‡ªåº•å‘ä¸Šçš„å±‚åºéå†</strong><span>&nbsp;</span>ã€‚ ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/tree1.jpg" style="max-width: 100%; width: 277px; height: 302px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[15,7],[9,20],[3]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = []
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 2000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-1000 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-level-order-traversal-ii/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 107. äºŒå‰æ ‘çš„å±‚åºéå† II</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-1)

è¿™é¢˜å’Œ [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal) å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œè‡ªé¡¶å‘ä¸‹çš„å±‚åºéå†åè¿‡æ¥å°±è¡Œäº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -1)

```python
from collections import deque
from typing import List, Optional

class Solution:
    def levelOrderBottom(self, root: Optional[TreeNode]) -> List[List[int]]:
        res = deque()
        if root is None:
            return list(res)

        q = deque([root])
        # while å¾ªç¯æ§åˆ¶ä»ä¸Šå‘ä¸‹ä¸€å±‚å±‚éå†
        while q:
            sz = len(q)
            # è®°å½•è¿™ä¸€å±‚çš„èŠ‚ç‚¹å€¼
            level = []
            # for å¾ªç¯æ§åˆ¶æ¯ä¸€å±‚ä»å·¦å‘å³éå†
            for _ in range(sz):
                cur = q.popleft()
                level.append(cur.val)
                if cur.left:
                    q.append(cur.left)
                if cur.right:
                    q.append(cur.right)
            # æŠŠæ¯ä¸€å±‚æ·»åŠ åˆ°å¤´éƒ¨ï¼Œå°±æ˜¯è‡ªåº•å‘ä¸Šçš„å±‚åºéå†ã€‚
            res.appendleft(level)
        return list(res)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_binary-tree-level-order-traversal-ii" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-level-order-traversal-ii" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-level-order-traversal-ii/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå†](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_binary-tree-zigzag-level-order-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå†</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-tree-zigzag-level-order-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„<span>&nbsp;</span><strong style="font-weight: 600;">é”¯é½¿å½¢å±‚åºéå†</strong><span>&nbsp;</span>ã€‚ï¼ˆå³å…ˆä»å·¦å¾€å³ï¼Œå†ä»å³å¾€å·¦è¿›è¡Œä¸‹ä¸€å±‚éå†ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ›¿è¿›è¡Œï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/19/tree1.jpg" style="max-width: 100%; width: 277px; height: 302px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[3],[20,9],[15,7]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[[1]]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = []
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 2000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå†</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-2)

è¿™é¢˜å’Œ [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal) å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œåªè¦ç”¨ä¸€ä¸ªå¸ƒå°”å˜é‡ `flag` æ§åˆ¶éå†æ–¹å‘å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -2)

```python
from collections import deque

class Solution:
    def zigzagLevelOrder(self, root: TreeNode) -> List[List[int]]:
        res = []
        if root is None:
            return res

        q = deque([root])
        # ä¸º true æ—¶å‘å³ï¼Œfalse æ—¶å‘å·¦
        flag = True

        # while å¾ªç¯æ§åˆ¶ä»ä¸Šå‘ä¸‹ä¸€å±‚å±‚éå†
        while q:
            sz = len(q)
            # è®°å½•è¿™ä¸€å±‚çš„èŠ‚ç‚¹å€¼
            level = deque()
            # for å¾ªç¯æ§åˆ¶æ¯ä¸€å±‚ä»å·¦å‘å³éå†
            for i in range(sz):
                cur = q.popleft()
                # å®ç° z å­—å½¢éå†
                if flag:
                    level.append(cur.val)
                else:
                    level.appendleft(cur.val)
                if cur.left:
                    q.append(cur.left)
                if cur.right:
                    q.append(cur.right)
            # åˆ‡æ¢æ–¹å‘
            flag = not flag
            res.append(list(level))
        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_binary-tree-zigzag-level-order-traversal" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_binary-tree-zigzag-level-order-traversal" src="https://labuladong.online/algo-visualize/leetcode/binary-tree-zigzag-level-order-traversal/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1609. å¥‡å¶æ ‘ ğŸŸ ](https://leetcode.cn/problems/even-odd-tree)
- [å‰‘æŒ‡ Offer 32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III ğŸŸ ](https://leetcode.cn/problems/cong-shang-dao-xia-da-yin-er-cha-shu-iii-lcof)

## [117. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_populating-next-right-pointers-in-each-node-ii)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">117. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/populating-next-right-pointers-in-each-node-ii/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼š</p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;">struct Node {
  int val;
  Node *left;
  Node *right;
  Node *next;
}</pre><p style="line-height: 1.6; overflow-wrap: break-word;">å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">NULL</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰&nbsp;next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">NULL</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2019/02/15/117_sample.png" style="max-width: 100%; width: 500px; height: 171px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥</strong>ï¼šroot = [1,2,3,4,5,null,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,#,2,3,#,4,5,7,#]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç»™å®šäºŒå‰æ ‘å¦‚å›¾ A æ‰€ç¤ºï¼Œä½ çš„å‡½æ•°åº”è¯¥å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œä»¥æŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œå¦‚å›¾ B æ‰€ç¤ºã€‚åºåˆ—åŒ–è¾“å‡ºæŒ‰å±‚åºéå†é¡ºåºï¼ˆç”± next æŒ‡é’ˆè¿æ¥ï¼‰ï¼Œ'#' è¡¨ç¤ºæ¯å±‚çš„æœ«å°¾ã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong class="example" style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = []
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 6000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">è¿›é˜¶ï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä½ åªèƒ½ä½¿ç”¨å¸¸é‡çº§é¢å¤–ç©ºé—´ã€‚</li><li>ä½¿ç”¨é€’å½’è§£é¢˜ä¹Ÿç¬¦åˆè¦æ±‚ï¼Œæœ¬é¢˜ä¸­é€’å½’ç¨‹åºçš„éšå¼æ ˆç©ºé—´ä¸è®¡å…¥é¢å¤–ç©ºé—´å¤æ‚åº¦ã€‚</li></ul><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 117. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æˆ‘çš„ç®—æ³•å­¦ä¹ ç»éªŒ](https://labuladong.online/algo/essential-technique/algorithm-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ã€‚

ä½†è¿™é¢˜å’Œ [116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ](https://leetcode.cn/problems/populating-next-right-pointers-in-each-node) è¿˜ä¸ä¸€æ ·ï¼Œè¾“å…¥çš„ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œæ‰€ä»¥ä¸å¥½ç›´æ¥ç”¨é€’å½’ã€‚

è¿™é¢˜ç”¨ [BFS ç®—æ³•](https://labuladong.online/algo/essential-technique/bfs-framework/) è¿›è¡Œå±‚åºéå†æ¯”è¾ƒç›´è§‚ï¼Œåœ¨ for å¾ªç¯ï¼Œæ— éå°±æ˜¯æƒ³åŠæ³•éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œç„¶åæŠŠè¿™ä¸ªèŠ‚ç‚¹å’Œç›¸é‚»èŠ‚ç‚¹è¿èµ·æ¥ç½¢äº†ã€‚

å½“ç„¶ï¼Œè¿˜æœ‰æ•ˆç‡æ›´é«˜çš„æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥æ“ä½œæŒ‡é’ˆï¼Œä¸è¿‡ç•¥æœ‰äº›éš¾æ‡‚ï¼Œæš‚æ—¶ä¸å†™ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)
- [ã€ç»ƒä¹ ã€‘BFS ç»å…¸ä¹ é¢˜ I](https://labuladong.online/algo/problem-set/bfs/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -3)

```python
class Node:
    def __init__(self, val=0, left=None, right=None, next=None):
        self.val = val
        self.left = left
        self.right = right
        self.next = next

class Solution:
    def connect(self, root: 'Node') -> 'Node':
        if root is None:
            return None
        # äºŒå‰æ ‘å±‚åºéå†æ¡†æ¶
        from collections import deque
        q = deque([root])
        while q:
            sz = len(q)
            # éå†ä¸€å±‚
            pre = None
            for i in range(sz):
                cur = q.popleft()
                # é“¾æ¥å½“å‰å±‚æ‰€æœ‰èŠ‚ç‚¹çš„ next æŒ‡é’ˆ
                if pre is not None:
                    pre.next = cur
                pre = cur
                # å°†ä¸‹ä¸€å±‚èŠ‚ç‚¹è£…å…¥é˜Ÿåˆ—
                if cur.left is not None:
                    q.append(cur.left)
                if cur.right is not None:
                    q.append(cur.right)
        return root
```

## [662. äºŒå‰æ ‘æœ€å¤§å®½åº¦](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_maximum-width-of-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">662. äºŒå‰æ ‘æœ€å¤§å®½åº¦</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/maximum-width-of-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/maximum-width-of-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¿”å›æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å¤§å®½åº¦</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å¤§å®½åº¦</strong><span>&nbsp;</span>æ˜¯æ‰€æœ‰å±‚ä¸­æœ€å¤§çš„<span>&nbsp;</span><strong style="font-weight: 600;">å®½åº¦</strong><span>&nbsp;</span>ã€‚</p><div class="original__bRMd"><div><p style="line-height: 1.6; overflow-wrap: break-word;">æ¯ä¸€å±‚çš„<span>&nbsp;</span><strong style="font-weight: 600;">å®½åº¦</strong><span>&nbsp;</span>è¢«å®šä¹‰ä¸ºè¯¥å±‚æœ€å·¦å’Œæœ€å³çš„éç©ºèŠ‚ç‚¹ï¼ˆå³ï¼Œä¸¤ä¸ªç«¯ç‚¹ï¼‰ä¹‹é—´çš„é•¿åº¦ã€‚å°†è¿™ä¸ªäºŒå‰æ ‘è§†ä½œä¸æ»¡äºŒå‰æ ‘ç»“æ„ç›¸åŒï¼Œä¸¤ç«¯ç‚¹é—´ä¼šå‡ºç°ä¸€äº›å»¶ä¼¸åˆ°è¿™ä¸€å±‚çš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">null</code><span>&nbsp;</span>èŠ‚ç‚¹ï¼Œè¿™äº›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">null</code><span>&nbsp;</span>èŠ‚ç‚¹ä¹Ÿè®¡å…¥é•¿åº¦ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå°†ä¼šåœ¨&nbsp;<span>&nbsp;</span><strong style="font-weight: 600;">32 ä½</strong><span>&nbsp;</span>å¸¦ç¬¦å·æ•´æ•°èŒƒå›´å†…ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/05/03/width1-tree.jpg" style="max-width: 100%; width: 359px; height: 302px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,3,2,5,3,null,9]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>4
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€å¤§å®½åº¦å‡ºç°åœ¨æ ‘çš„ç¬¬ 3 å±‚ï¼Œå®½åº¦ä¸º 4 (5,3,null,9) ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2022/03/14/maximum-width-of-binary-tree-v3.jpg" style="max-width: 100%; width: 442px; height: 422px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,3,2,5,null,null,9,6,null,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>7
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€å¤§å®½åº¦å‡ºç°åœ¨æ ‘çš„ç¬¬ 4 å±‚ï¼Œå®½åº¦ä¸º 7 (6,null,null,null,null,null,7) ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/05/03/width3-tree.jpg" style="max-width: 100%; width: 289px; height: 299px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,3,2,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€å¤§å®½åº¦å‡ºç°åœ¨æ ‘çš„ç¬¬ 2 å±‚ï¼Œå®½åº¦ä¸º 2 (3,2) ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 3000]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-100 &lt;= Node.val &lt;= 100</code></li></ul></div></div></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-width-of-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 662. äºŒå‰æ ‘æœ€å¤§å®½åº¦</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-4)

**è¿™é“é¢˜çš„è§£é¢˜å…³é”®æ˜¯è¦ç»™äºŒå‰æ ‘èŠ‚ç‚¹æŒ‰è¡Œè¿›è¡Œç¼–å·**ï¼Œç„¶åä½ å°±å¯ä»¥é€šè¿‡æ¯ä¸€è¡Œçš„æœ€å·¦ä¾§èŠ‚ç‚¹å’Œæœ€å³ä¾§èŠ‚ç‚¹çš„ç¼–å·æ¨ç®—å‡ºè¿™ä¸€è¡Œçš„å®½åº¦ï¼Œè¿›è€Œç®—å‡ºæœ€å¤§å®½åº¦ï¼š

![img](662.png)

è€Œä¸”ï¼Œè¿™æ ·ç¼–å·è¿˜å¯ä»¥é€šè¿‡çˆ¶èŠ‚ç‚¹çš„ç¼–å·è®¡ç®—å¾—å‡ºå·¦å³å­èŠ‚ç‚¹çš„ç¼–å·ï¼š

å‡è®¾çˆ¶èŠ‚ç‚¹çš„ç¼–å·æ˜¯ `x`ï¼Œå·¦å­èŠ‚ç‚¹å°±æ˜¯ `2 * x`ï¼Œå³å­èŠ‚ç‚¹å°±æ˜¯ `2 * x + 1`ã€‚

è¿™ä¸ªç‰¹æ€§å¸¸è§äºå®Œå…¨äºŒå‰æ ‘çš„é¢˜ç›®å½“ä¸­ï¼Œä½ å¯ä»¥å»çœ‹çœ‹å‰æ–‡ [å›¾æ–‡è¯¦è§£äºŒå‰å †ï¼Œå®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—](https://labuladong.online/algo/data-structure-basic/binary-heap-basic/) æˆ–è€…å»åšä¸€ä¸‹ [1104. äºŒå‰æ ‘å¯»è·¯](https://leetcode.cn/problems/path-in-zigzag-labelled-binary-tree) è¿™é“é¢˜ã€‚

æ˜ç™½äº†è¿™ä¸ªå…³é”®ç‚¹ï¼Œå°±å¯ä»¥é€šè¿‡ BFS æˆ–è€… DFS å®ç°è§£æ³•äº†ï¼Œæˆ‘æŠŠä¸¤ç§è§£æ³•éƒ½å†™å‡ºæ¥ä¾›ä½ å‚è€ƒã€‚

å…¶ä¸­ DFS çš„é€’å½’è§£æ³•éœ€è¦ä½ é€å½»ç†è§£äºŒå‰æ ‘çš„éå†é¡ºåºï¼Œä½ å¯ä»¥å…ˆåšä¸€ä¸‹ [199. äºŒå‰æ ‘çš„å³è§†å›¾](https://leetcode.cn/problems/binary-tree-right-side-view) è¿™é“é¢˜ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)
- [ã€ç»ƒä¹ ã€‘BFS ç»å…¸ä¹ é¢˜ I](https://labuladong.online/algo/problem-set/bfs/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -4)

```python
# å±‚åºéå†æ€è·¯
class Solution:
    # è®°å½•èŠ‚ç‚¹å’Œå¯¹åº”ç¼–å·
    class Pair:
        def __init__(self, node, id):
            self.node = node
            self.id = id

    def widthOfBinaryTree(self, root):
        if root is None:
            return 0
        # è®°å½•æœ€å¤§çš„å®½åº¦
        maxWidth = 0
        # æ ‡å‡† BFS å±‚åºéå†ç®—æ³•
        q = collections.deque()
        q.append(self.Pair(root, 1))
        # ä»ä¸Šåˆ°ä¸‹éå†æ•´æ£µæ ‘
        while q:
            sz = len(q)
            start = 0
            end = 0
            # ä»å·¦åˆ°å³éå†æ¯ä¸€è¡Œ
            for i in range(sz):
                cur = q.popleft()
                curNode = cur.node
                curId = cur.id
                # è®°å½•å½“å‰è¡Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ç¼–å·
                if i == 0:
                    start = curId
                if i == sz - 1:
                    end = curId
                # å·¦å³å­èŠ‚ç‚¹å…¥é˜Ÿï¼ŒåŒæ—¶è®°å½•å¯¹åº”èŠ‚ç‚¹çš„ç¼–å·
                if curNode.left is not None:
                    q.append(self.Pair(curNode.left, curId * 2))
                if curNode.right is not None:
                    q.append(self.Pair(curNode.right, curId * 2 + 1))
            # ç”¨å½“å‰è¡Œçš„å®½åº¦æ›´æ–°æœ€å¤§å®½åº¦
            maxWidth = max(maxWidth, end - start + 1)

        return maxWidth

# é€’å½’éå†æ€è·¯
class Solution2:
    def widthOfBinaryTree(self, root):
        if root is None:
            return 0
        self.firstId = []
        self.maxWidth = 1
        self.traverse(root, 1, 1)
        return self.maxWidth

    # è®°å½•æœ€å·¦ä¾§èŠ‚ç‚¹çš„ç¼–å·
    firstId = []
    maxWidth = 1

    # äºŒå‰æ ‘éå†å‡½æ•°
    def traverse(self, root, id, depth):
        if root is None:
            return

        if len(self.firstId) == depth - 1:
            # å› ä¸ºä»£ç æ˜¯å…ˆ traverse(root.left) å traverse(root.right)ï¼Œ
            # æ‰€ä»¥ç¬¬ä¸€æ¬¡åˆ°è¾¾è¿™ä¸ªæ·±åº¦ä¸€å®šæ˜¯æœ€å·¦ä¾§çš„èŠ‚ç‚¹ï¼Œè®°å½•å…¶ç¼–å·
            self.firstId.append(id)
        else:
            # è¿™ä¸ªæ·±åº¦çš„å…¶ä»–èŠ‚ç‚¹ï¼Œè´Ÿè´£è®¡ç®—æ›´æ–°å½“å‰æ·±åº¦çš„æœ€å¤§å®½åº¦
            self.maxWidth = max(self.maxWidth, id - self.firstId[depth - 1] + 1)

        self.traverse(root.left, id * 2, depth + 1)
        self.traverse(root.right, id * 2 + 1, depth + 1)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_maximum-width-of-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_maximum-width-of-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/maximum-width-of-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1261. åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´  ğŸŸ ](https://leetcode.cn/problems/find-elements-in-a-contaminated-binary-tree)

## [515. åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_find-largest-value-in-each-tree-row)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">515. åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/find-largest-value-in-each-tree-row/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/find-largest-value-in-each-tree-row/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘ä¸­æ¯ä¸€å±‚çš„æœ€å¤§å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/08/21/largest_e1.jpg" style="max-width: 100%; height: 172px; width: 300px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>root = [1,3,2,5,3,null,9]
<strong style="font-weight: 600;">è¾“å‡º: </strong>[1,3,9]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥: </strong>root = [1,2,3]
<strong style="font-weight: 600;">è¾“å‡º: </strong>[1,3]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0,10<sup>4</sup>]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-2<sup>31</sup>&nbsp;&lt;= Node.val &lt;= 2<sup>31</sup>&nbsp;- 1</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/find-largest-value-in-each-tree-row/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 515. åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-5)

é¦–å…ˆï¼Œè¿™é¢˜è‚¯å®šå¯ä»¥ç”¨ BFS ç®—æ³•è§£å†³ï¼Œfor å¾ªç¯é‡Œé¢åˆ¤æ–­æœ€å¤§å€¼å°±è¡Œäº†ï¼š

![img](1-1754535082182-124.jpeg)

å½“ç„¶ï¼Œè¿™é¢˜ä¹Ÿå¯ä»¥ç”¨ DFS æ¥åšï¼Œå‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

éå†çš„è¿‡ç¨‹ä¸­è®°å½•å¯¹åº”æ·±åº¦çš„æœ€å¤§èŠ‚ç‚¹å€¼å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -5)

```python
from queue import Queue
from typing import List

class Solution:
    def largestValues(self, root: TreeNode) -> List[int]:
        res = []
        if root is None:
            return res

        q = Queue()
        q.put(root)
        # while å¾ªç¯æ§åˆ¶ä»ä¸Šå‘ä¸‹ä¸€å±‚å±‚éå†
        while not q.empty():
            sz = q.qsize()
            # è®°å½•è¿™ä¸€å±‚çš„æœ€å¤§å€¼
            levelMax = float('-inf')
            # for å¾ªç¯æ§åˆ¶æ¯ä¸€å±‚ä»å·¦å‘å³éå†
            for _ in range(sz):
                cur = q.get()
                levelMax = max(levelMax, cur.val)
                if cur.left is not None:
                    q.put(cur.left)
                if cur.right is not None:
                    q.put(cur.right)
            res.append(levelMax)
        return res

class Solution_DFS:
    # ä¸€å®šè¦ç”¨ array å­˜å‚¨ï¼Œå› ä¸ºè¦ç”¨ç´¢å¼•éšæœºè®¿é—®
    res = []

    def largestValues(self, root: TreeNode) -> List[int]:
        if root is None:
            return self.res
        self.traverse(root, 0)
        return self.res

    # éå†äºŒå‰æ ‘
    def traverse(self, root: TreeNode, depth: int) -> None:
        if root is None:
            return
        if len(self.res) <= depth:
            self.res.append(root.val)
        else:
            # è®°å½•å½“å‰è¡Œçš„æœ€å¤§å€¼
            self.res[depth] = max(self.res[depth], root.val)
        self.traverse(root.left, depth + 1)
        self.traverse(root.right, depth + 1)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_find-largest-value-in-each-tree-row" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_find-largest-value-in-each-tree-row" src="https://labuladong.online/algo-visualize/leetcode/find-largest-value-in-each-tree-row/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 044. äºŒå‰æ ‘æ¯å±‚çš„æœ€å¤§å€¼ ğŸŸ ](https://leetcode.cn/problems/hPov7L)

## [637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_average-of-levels-in-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/average-of-levels-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/average-of-levels-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;, ä»¥æ•°ç»„çš„å½¢å¼è¿”å›æ¯ä¸€å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·®&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">10<sup>-5</sup></code><span>&nbsp;</span>ä»¥å†…çš„ç­”æ¡ˆå¯ä»¥è¢«æ¥å—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/03/09/avg1-tree.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,null,null,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[3.00000,14.50000,11.00000]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>ç¬¬ 0 å±‚çš„å¹³å‡å€¼ä¸º 3,ç¬¬ 1 å±‚çš„å¹³å‡å€¼ä¸º 14.5,ç¬¬ 2 å±‚çš„å¹³å‡å€¼ä¸º 11 ã€‚
å› æ­¤è¿”å› [3, 14.5, 11] ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/03/09/avg2-tree.jpg" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,9,20,15,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[3.00000,14.50000,11.00000]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°é‡åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code><span>&nbsp;</span>èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-2<sup>31</sup>&nbsp;&lt;= Node.val &lt;= 2<sup>31</sup>&nbsp;- 1</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/average-of-levels-in-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-6)

æ ‡å‡†çš„äºŒå‰æ ‘å±‚åºéå†ï¼ŒæŠŠ [102. å±‚åºéå†äºŒå‰æ ‘](https://leetcode.cn/problems/binary-tree-level-order-traversal) çš„ä»£ç ç¨å¾®æ”¹ä¸€æ”¹å°±è¡Œäº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -6)

```python
from collections import deque
from typing import List

class Solution:
    def averageOfLevels(self, root: TreeNode) -> List[float]:
        res = []
        if root is None:
            return res

        q = deque([root])
        while q:
            size = len(q)
            # è®°å½•å½“å‰å±‚æ‰€æœ‰èŠ‚ç‚¹ä¹‹å’Œ
            sum = 0
            for _ in range(size):
                cur = q.popleft()
                if cur.left is not None:
                    q.append(cur.left)
                if cur.right is not None:
                    q.append(cur.right)
                sum += cur.val
            # è®°å½•å½“å‰è¡Œçš„å¹³å‡å€¼
            res.append(sum / size)

        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_average-of-levels-in-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_average-of-levels-in-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/average-of-levels-in-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [958. äºŒå‰æ ‘çš„å®Œå…¨æ€§æ£€éªŒ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_check-completeness-of-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">958. äºŒå‰æ ‘çš„å®Œå…¨æ€§æ£€éªŒ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/check-completeness-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/check-completeness-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¯·ä½ åˆ¤æ–­è¿™æ£µæ ‘æ˜¯å¦æ˜¯ä¸€æ£µ<span>&nbsp;</span><strong style="font-weight: 600;">å®Œå…¨äºŒå‰æ ‘</strong>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">åœ¨ä¸€æ£µ<span>&nbsp;</span><strong style="font-weight: 600;"><a href="https://baike.baidu.com/item/%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91/7773232?fr=aladdin" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">å®Œå…¨äºŒå‰æ ‘</a></strong><span>&nbsp;</span>ä¸­ï¼Œé™¤äº†æœ€åä¸€å±‚å¤–ï¼Œæ‰€æœ‰å±‚éƒ½è¢«å®Œå…¨å¡«æ»¡ï¼Œå¹¶ä¸”æœ€åä¸€å±‚ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å°½å¯èƒ½é å·¦ã€‚æœ€åä¸€å±‚ï¼ˆç¬¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">h</code><span>&nbsp;</span>å±‚ï¼‰ä¸­å¯ä»¥åŒ…å«&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code>&nbsp;åˆ°&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2<sup>h</sup></code><span>&nbsp;</span>ä¸ªèŠ‚ç‚¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2018/12/15/complete-binary-tree-1.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,6]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€åä¸€å±‚å‰çš„æ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„ï¼ˆå³ï¼ŒèŠ‚ç‚¹å€¼ä¸º {1} å’Œ {2,3} çš„ä¸¤å±‚ï¼‰ï¼Œä¸”æœ€åä¸€å±‚ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆ{4,5,6}ï¼‰å°½å¯èƒ½é å·¦ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2018/12/15/complete-binary-tree-2.png" style="max-width: 100%;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,null,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>å€¼ä¸º 7 çš„èŠ‚ç‚¹ä¸æ»¡è¶³æ¡ä»¶ã€ŒèŠ‚ç‚¹å°½å¯èƒ½é å·¦ã€ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 100]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/check-completeness-of-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 958. äºŒå‰æ ‘çš„å®Œå…¨æ€§æ£€éªŒ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-7)

è¿™é¢˜çš„å…³é”®æ˜¯å¯¹å®Œå…¨äºŒå‰æ ‘ç‰¹æ€§çš„ç†è§£ï¼Œ**å¦‚æœæŒ‰ç…§ BFS å±‚åºéå†çš„æ–¹å¼éå†å®Œå…¨äºŒå‰æ ‘ï¼Œé˜Ÿåˆ—æœ€åç•™ä¸‹çš„åº”è¯¥éƒ½æ˜¯ç©ºæŒ‡é’ˆ**ï¼š

![img](958.jpeg)

æ‰€ä»¥å¯ä»¥ç”¨ [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal) ç»™å‡ºçš„å±‚åºéå†æ¡†æ¶è§£å†³è¿™é¢˜ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -7)

```python
from collections import deque

class Solution:
    def isCompleteTree(self, root: TreeNode) -> bool:
        q = deque([root])
        end = False
        while q:
            sz = len(q)
            for i in range(sz):
                cur = q.popleft()
                if cur is None:
                    end = True
                else:
                    if end:
                        return False
                    q.append(cur.left)
                    q.append(cur.right)
        return True
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-6)

<details data-v-ee1a9bd0="" id="div_check-completeness-of-a-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_check-completeness-of-a-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/check-completeness-of-a-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1161. æœ€å¤§å±‚å†…å…ƒç´ å’Œ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_maximum-level-sum-of-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1161. æœ€å¤§å±‚å†…å…ƒç´ å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/maximum-level-sum-of-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ã€‚è®¾æ ¹èŠ‚ç‚¹ä½äºäºŒå‰æ ‘çš„ç¬¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>å±‚ï¼Œè€Œæ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä½äºç¬¬<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code><span>&nbsp;</span>å±‚ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·è¿”å›å±‚å†…å…ƒç´ ä¹‹å’Œ<span>&nbsp;</span><strong style="font-weight: 600;">æœ€å¤§</strong><span>&nbsp;</span>çš„é‚£å‡ å±‚ï¼ˆå¯èƒ½åªæœ‰ä¸€å±‚ï¼‰çš„å±‚å·ï¼Œå¹¶è¿”å›å…¶ä¸­&nbsp;<strong style="font-weight: 600;">æœ€å°</strong><span>&nbsp;</span>çš„é‚£ä¸ªã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/08/17/capture.jpeg" style="max-width: 100%; height: 175px; width: 200px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,7,0,7,-8,null,null]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>
ç¬¬ 1 å±‚å„å…ƒç´ ä¹‹å’Œä¸º 1ï¼Œ
ç¬¬ 2 å±‚å„å…ƒç´ ä¹‹å’Œä¸º 7 + 0 = 7ï¼Œ
ç¬¬ 3 å±‚å„å…ƒç´ ä¹‹å’Œä¸º 7 + -8 = -1ï¼Œ
æ‰€ä»¥æˆ‘ä»¬è¿”å›ç¬¬ 2 å±‚çš„å±‚å·ï¼Œå®ƒçš„å±‚å†…å…ƒç´ ä¹‹å’Œæœ€å¤§ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [989,null,10250,98693,-89388,null,null,null,-32127]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>2
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup>&nbsp;&lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1161. æœ€å¤§å±‚å†…å…ƒç´ å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-8)

æŠŠ [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal) ç»™å‡ºçš„å±‚åºéå†æ¡†æ¶ç¨å¾®å˜é€šå³å¯è§£å†³è¿™é¢˜ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -8)

```python
class Solution:
    def maxLevelSum(self, root: TreeNode) -> int:
        if root is None:
            return 0
        q = deque([root])
        # è®°å½• BFS èµ°åˆ°çš„å±‚æ•°
        depth = 1
        # è®°å½•å…ƒç´ å’Œæœ€å¤§çš„é‚£ä¸€è¡Œå’Œæœ€å¤§å…ƒç´ å’Œ
        res = 0
        maxSum = float('-inf')

        while q:
            sz = len(q)
            levelSum = 0
            # éå†è¿™ä¸€å±‚
            for _ in range(sz):
                cur = q.popleft()
                levelSum += cur.val

                if cur.left is not None:
                    q.append(cur.left)
                if cur.right is not None:
                    q.append(cur.right)
            if levelSum > maxSum:
                # æ›´æ–°æœ€å¤§å…ƒç´ å’Œ
                res = depth
                maxSum = levelSum
            depth += 1
        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-7)

<details data-v-ee1a9bd0="" id="div_maximum-level-sum-of-a-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_maximum-level-sum-of-a-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/maximum-level-sum-of-a-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1302. å±‚æ•°æœ€æ·±å¶å­èŠ‚ç‚¹çš„å’Œ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_deepest-leaves-sum)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1302. å±‚æ•°æœ€æ·±å¶å­èŠ‚ç‚¹çš„å’Œ</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/deepest-leaves-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/deepest-leaves-sum/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¯·ä½ è¿”å›<span>&nbsp;</span><strong style="font-weight: 600;">å±‚æ•°æœ€æ·±çš„å¶å­èŠ‚ç‚¹çš„å’Œ</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/12/28/1483_ex1.png" style="max-width: 100%; height: 265px; width: 273px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,2,3,4,5,null,6,7,null,null,null,null,8]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>15
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [6,7,8,2,7,1,3,9,null,1,4,null,null,null,5]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>19
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code><span>&nbsp;</span>ä¹‹é—´ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 100</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/deepest-leaves-sum/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1302. å±‚æ•°æœ€æ·±å¶å­èŠ‚ç‚¹çš„å’Œ</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-9)

è¿™é¢˜ç”¨ DFS æˆ–è€… BFS éƒ½å¯ä»¥ï¼Œæˆ‘å°±ç”¨ BFS å±‚åºéå†ç®—æ³•å§ï¼Œå±‚åºéå†ç®—æ³•å‚è§ [102. å±‚åºéå†äºŒå‰æ ‘](https://leetcode.cn/problems/binary-tree-level-order-traversal)ï¼Œè¿™é¢˜åªè¦æŠŠæœ€åä¸€å±‚çš„èŠ‚ç‚¹å€¼ç´¯åŠ èµ·æ¥å°±è¡Œäº†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -9)

```python
class Solution:
    def deepestLeavesSum(self, root: TreeNode) -> int:
        if root is None:
            return 0
        from collections import deque
        q = deque([root])

        sum = 0
        while q:
            sum = 0
            sz = len(q)
            for _ in range(sz):
                cur = q.popleft()
                # ç´¯åŠ ä¸€å±‚çš„èŠ‚ç‚¹ä¹‹å’Œ
                sum += cur.val
                if cur.left:
                    q.append(cur.left)
                if cur.right:
                    q.append(cur.right)
        # ç°åœ¨å°±æ˜¯æœ€åä¸€å±‚çš„èŠ‚ç‚¹å€¼å’Œ
        return sum
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-8)

<details data-v-ee1a9bd0="" id="div_deepest-leaves-sum" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_deepest-leaves-sum" src="https://labuladong.online/algo-visualize/leetcode/deepest-leaves-sum/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [1609. å¥‡å¶æ ‘](https://labuladong.online/algo/problem-set/binary-tree-level-i/#slug_even-odd-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1609. å¥‡å¶æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/even-odd-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/even-odd-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœä¸€æ£µäºŒå‰æ ‘æ»¡è¶³ä¸‹è¿°å‡ ä¸ªæ¡ä»¶ï¼Œåˆ™å¯ä»¥ç§°ä¸º<span>&nbsp;</span><strong style="font-weight: 600;">å¥‡å¶æ ‘</strong><span>&nbsp;</span>ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘æ ¹èŠ‚ç‚¹æ‰€åœ¨å±‚ä¸‹æ ‡ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code><span>&nbsp;</span>ï¼Œæ ¹çš„å­èŠ‚ç‚¹æ‰€åœ¨å±‚ä¸‹æ ‡ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>ï¼Œæ ¹çš„å­™èŠ‚ç‚¹æ‰€åœ¨å±‚ä¸‹æ ‡ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code><span>&nbsp;</span>ï¼Œä¾æ­¤ç±»æ¨ã€‚</li><li><strong style="font-weight: 600;">å¶æ•°ä¸‹æ ‡</strong><span>&nbsp;</span>å±‚ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">å¥‡</strong><span>&nbsp;</span>æ•´æ•°ï¼Œä»å·¦åˆ°å³æŒ‰é¡ºåº<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¥æ ¼é€’å¢</strong></li><li><strong style="font-weight: 600;">å¥‡æ•°ä¸‹æ ‡</strong><span>&nbsp;</span>å±‚ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">å¶</strong><span>&nbsp;</span>æ•´æ•°ï¼Œä»å·¦åˆ°å³æŒ‰é¡ºåº<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¥æ ¼é€’å‡</strong></li></ul><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¦‚æœäºŒå‰æ ‘ä¸º<span>&nbsp;</span><strong style="font-weight: 600;">å¥‡å¶æ ‘<span>&nbsp;</span></strong>ï¼Œåˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ï¼Œå¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/10/04/sample_1_1966.png" style="max-width: 100%; height: 229px; width: 362px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,10,4,3,null,7,9,12,8,6,null,null,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼åˆ†åˆ«æ˜¯ï¼š
0 å±‚ï¼š[1]
1 å±‚ï¼š[10,4]
2 å±‚ï¼š[3,7,9]
3 å±‚ï¼š[12,8,6,2]
ç”±äº 0 å±‚å’Œ 2 å±‚ä¸Šçš„èŠ‚ç‚¹å€¼éƒ½æ˜¯å¥‡æ•°ä¸”ä¸¥æ ¼é€’å¢ï¼Œè€Œ 1 å±‚å’Œ 3 å±‚ä¸Šçš„èŠ‚ç‚¹å€¼éƒ½æ˜¯å¶æ•°ä¸”ä¸¥æ ¼é€’å‡ï¼Œå› æ­¤è¿™æ˜¯ä¸€æ£µå¥‡å¶æ ‘ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/10/04/sample_2_1966.png" style="max-width: 100%; height: 167px; width: 363px;"></strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,4,2,3,3,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼åˆ†åˆ«æ˜¯ï¼š
0 å±‚ï¼š[5]
1 å±‚ï¼š[4,2]
2 å±‚ï¼š[3,3,7]
2 å±‚ä¸Šçš„èŠ‚ç‚¹å€¼ä¸æ»¡è¶³ä¸¥æ ¼é€’å¢çš„æ¡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯ä¸€æ£µå¥‡å¶æ ‘ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 3ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2020/10/04/sample_1_333_1966.png" style="max-width: 100%; height: 167px; width: 363px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [5,9,1,3,5,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>1 å±‚ä¸Šçš„èŠ‚ç‚¹å€¼åº”ä¸ºå¶æ•°ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 4ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 5ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [11,8,6,1,3,9,11,30,20,18,16,12,10,4,2,17]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>5</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 10<sup>6</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/even-odd-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1609. å¥‡å¶æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-i/#åŸºæœ¬æ€è·¯-10)

è¿™é“é¢˜ä¸»è¦è€ƒå¯ŸäºŒå‰æ ‘çš„å±‚åºéå†ï¼Œä½ å¯ä»¥å…ˆåšä¸€ä¸‹ [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal) å’Œ [103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå†](https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal) è¿™ä¸¤é“é¢˜ï¼Œç„¶åå†åšè¿™é“é¢˜ã€‚å…·ä½“æ€è·¯å¯çœ‹è§£æ³•ä»£ç çš„æ³¨é‡Šã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ I](https://labuladong.online/algo/problem-set/binary-tree-level-i/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-i/#è§£æ³•ä»£ç -10)

```python
import sys

class Solution:
    def isEvenOddTree(self, root: TreeNode) -> bool:
        if root is None:
            return True

        q = deque()
        q.append(root)
        # è®°å½•å¥‡å¶å±‚æ•°
        even = True
        # while å¾ªç¯æ§åˆ¶ä»ä¸Šå‘ä¸‹ä¸€å±‚å±‚éå†
        while q:
            sz = len(q)
            # è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾¿äºåˆ¤æ–­æ˜¯å¦é€’å¢/é€’å‡
            prev = -sys.maxsize if even else sys.maxsize
            # for å¾ªç¯æ§åˆ¶æ¯ä¸€å±‚ä»å·¦å‘å³éå†
            for i in range(sz):
                cur = q.popleft()
                if even:
                    # å¶æ•°å±‚
                    if prev >= cur.val or cur.val % 2 == 0:
                        return False
                else:
                    # å¥‡æ•°å±‚
                    if prev <= cur.val or cur.val % 2 == 1:
                        return False
                prev = cur.val

                if cur.left is not None:
                    q.append(cur.left)
                if cur.right is not None:
                    q.append(cur.right)
            # å¥‡å¶å±‚æ•°åˆ‡æ¢
            even = not even
        return True
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-i/#å¯è§†åŒ–-9)

<details data-v-ee1a9bd0="" id="div_even-odd-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_even-odd-tree" src="https://labuladong.online/algo-visualize/leetcode/even-odd-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>



## [919. å®Œå…¨äºŒå‰æ ‘æ’å…¥å™¨](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#slug_complete-binary-tree-inserter)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">919. å®Œå…¨äºŒå‰æ ‘æ’å…¥å™¨</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/complete-binary-tree-inserter/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/complete-binary-tree-inserter/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">å®Œå…¨äºŒå‰æ ‘</strong><span>&nbsp;</span>æ˜¯æ¯ä¸€å±‚ï¼ˆé™¤æœ€åä¸€å±‚å¤–ï¼‰éƒ½æ˜¯å®Œå…¨å¡«å……ï¼ˆå³ï¼ŒèŠ‚ç‚¹æ•°è¾¾åˆ°æœ€å¤§ï¼‰çš„ï¼Œå¹¶ä¸”æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å°½å¯èƒ½åœ°é›†ä¸­åœ¨å·¦ä¾§ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œå°†ä¸€ä¸ªæ–°èŠ‚ç‚¹æ’å…¥åˆ°ä¸€ä¸ªå®Œæ•´çš„äºŒå‰æ ‘ä¸­ï¼Œå¹¶åœ¨æ’å…¥åä¿æŒå…¶å®Œæ•´ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å®ç°<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">CBTInserter</code><span>&nbsp;</span>ç±»:</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">CBTInserter(TreeNode root)</code>&nbsp;ä½¿ç”¨å¤´èŠ‚ç‚¹ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;çš„ç»™å®šæ ‘åˆå§‹åŒ–è¯¥æ•°æ®ç»“æ„ï¼›</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">CBTInserter.insert(int v)</code>&nbsp; å‘æ ‘ä¸­æ’å…¥ä¸€ä¸ªå€¼ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val == val</code>çš„æ–°èŠ‚ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">TreeNode</code>ã€‚ä½¿æ ‘ä¿æŒå®Œå…¨äºŒå‰æ ‘çš„çŠ¶æ€ï¼Œ<strong style="font-weight: 600;">å¹¶è¿”å›æ’å…¥èŠ‚ç‚¹</strong>&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">TreeNode</code>&nbsp;<strong style="font-weight: 600;">çš„çˆ¶èŠ‚ç‚¹çš„å€¼</strong>ï¼›</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">CBTInserter.get_root()</code><span>&nbsp;</span>å°†è¿”å›æ ‘çš„å¤´èŠ‚ç‚¹ã€‚</li></ul><ol style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"></ol><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/08/03/lc-treeinsert.jpg" style="max-width: 100%; height: 143px; width: 500px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥</strong>
["CBTInserter", "insert", "insert", "get_root"]
[[[1, 2]], [3], [4], []]
<strong style="font-weight: 600;">è¾“å‡º</strong>
[null, 1, 2, [1, 2, 3, 4]]

<strong style="font-weight: 600;">è§£é‡Š</strong>
CBTInserter cBTInserter = new CBTInserter([1, 2]);
cBTInserter.insert(3);  // è¿”å› 1
cBTInserter.insert(4);  // è¿”å› 2
cBTInserter.get_root(); // è¿”å› [1, 2, 3, 4]</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°é‡èŒƒå›´ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 1000]</code>&nbsp;</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 5000</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>&nbsp;æ˜¯å®Œå…¨äºŒå‰æ ‘</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= val &lt;= 5000</code>&nbsp;</li><li>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æœ€å¤šè°ƒç”¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">insert</code>&nbsp;å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">get_root</code>&nbsp;æ“ä½œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">10<sup>4</sup></code>&nbsp;æ¬¡</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/complete-binary-tree-inserter/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 919. å®Œå…¨äºŒå‰æ ‘æ’å…¥å™¨</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#åŸºæœ¬æ€è·¯)

è¿™é“é¢˜è€ƒå¯ŸäºŒå‰æ ‘çš„å±‚åºéå†ï¼Œä½ éœ€è¦å…ˆåš [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal) å†åšè¿™é“é¢˜ï¼Œç”¨é˜Ÿåˆ—ç»´æŠ¤åº•éƒ¨å¯ä»¥è¿›è¡Œæ’å…¥çš„èŠ‚ç‚¹å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘BFS ç»å…¸ä¹ é¢˜ I](https://labuladong.online/algo/problem-set/bfs/)
- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-level-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#è§£æ³•ä»£ç )

```python
from queue import Queue

class CBTInserter:
    # è¿™ä¸ªé˜Ÿåˆ—åªè®°å½•å®Œå…¨äºŒå‰æ ‘åº•éƒ¨å¯ä»¥è¿›è¡Œæ’å…¥çš„èŠ‚ç‚¹
    def __init__(self, root: TreeNode):
        self.q = Queue()
        self.root = root
        # è¿›è¡Œæ™®é€šçš„ BFSï¼Œç›®çš„æ˜¯æ‰¾åˆ°åº•éƒ¨å¯æ’å…¥çš„èŠ‚ç‚¹
        temp = Queue()
        temp.put(root)
        while not temp.empty():
            cur = temp.get()
            if cur.left is not None:
                temp.put(cur.left)
            if cur.right is not None:
                temp.put(cur.right)
            if cur.right is None or cur.left is None:
                # æ‰¾åˆ°å®Œå…¨äºŒå‰æ ‘åº•éƒ¨å¯ä»¥è¿›è¡Œæ’å…¥çš„èŠ‚ç‚¹
                self.q.put(cur)

    def insert(self, val: int) -> int:
        node = TreeNode(val)
        cur = self.q.queue[0]
        # è¿›è¡Œæ’å…¥
        if cur.left is None:
            cur.left = node
        else:
            cur.right = node
            self.q.get()
        # æ–°èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹ä¹Ÿæ˜¯å¯ä»¥æ’å…¥çš„
        self.q.put(node)
        return cur.val

    def get_root(self) -> TreeNode:
        return self.root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_complete-binary-tree-inserter" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_complete-binary-tree-inserter" src="https://labuladong.online/algo-visualize/leetcode/complete-binary-tree-inserter/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [872. å¶å­ç›¸ä¼¼çš„æ ‘](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#slug_leaf-similar-trees)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">872. å¶å­ç›¸ä¼¼çš„æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/leaf-similar-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/leaf-similar-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">è¯·è€ƒè™‘ä¸€æ£µäºŒå‰æ ‘ä¸Šæ‰€æœ‰çš„å¶å­ï¼Œè¿™äº›å¶å­çš„å€¼æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—å½¢æˆä¸€ä¸ª&nbsp;<strong style="font-weight: 600;">å¶å€¼åºåˆ—<span>&nbsp;</span></strong>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/07/16/tree.png" style="max-width: 100%; height: 336px; width: 400px;"></p><p style="line-height: 1.6; overflow-wrap: break-word;">ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç»™å®šä¸€æ£µå¶å€¼åºåˆ—ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">(6, 7, 4, 9, 8)</code>&nbsp;çš„æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœæœ‰ä¸¤æ£µäºŒå‰æ ‘çš„å¶å€¼åºåˆ—æ˜¯ç›¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºå®ƒä»¬æ˜¯&nbsp;<em>å¶ç›¸ä¼¼&nbsp;</em>çš„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœç»™å®šçš„ä¸¤ä¸ªæ ¹ç»“ç‚¹åˆ†åˆ«ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root1</code><span>&nbsp;</span>å’Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root2</code>&nbsp;çš„æ ‘æ˜¯å¶ç›¸ä¼¼çš„ï¼Œåˆ™è¿”å›&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>ï¼›å¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/09/03/leaf-similar-1.jpg" style="max-width: 100%; height: 237px; width: 600px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [3,5,1,6,2,9,8,null,null,7,4], root2 = [3,5,1,6,7,4,2,null,null,null,null,null,null,9,8]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/09/03/leaf-similar-2.jpg" style="max-width: 100%; height: 110px; width: 300px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [1,2,3], root2 = [1,3,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ç»™å®šçš„ä¸¤æ£µæ ‘ç»“ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 200]</code><span>&nbsp;</span>èŒƒå›´å†…</li><li>ç»™å®šçš„ä¸¤æ£µæ ‘ä¸Šçš„å€¼åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 200]</code><span>&nbsp;</span>èŒƒå›´å†…</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/leaf-similar-trees/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 872. å¶å­ç›¸ä¼¼çš„æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#åŸºæœ¬æ€è·¯-1)

æœ€ç®€å•ç²—æš´çš„æ–¹å¼å°±æ˜¯éå†ä¸¤ä¸ªäºŒå‰æ ‘ï¼ŒæŠŠæ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½å–å‡ºæ¥ï¼Œç„¶åä¸€ä¸ªä¸ªå¯¹æ¯”ã€‚ç¨å¾®æœ‰ç‚¹æŠ€å·§æ€§çš„è§£æ³•å°±æ˜¯æŠŠé€’å½’æ”¹æˆæ ˆè¿­ä»£çš„å½¢å¼ã€‚

ä½ çœ‹è¿™ä¸ª `next` æ–¹æ³•ï¼Œå®ƒå’ŒäºŒå‰æ ‘çš„é€’å½’éå†æ¡†æ¶å¾ˆåƒï¼Œåªä¸è¿‡æŠŠé€’å½’å‡½æ•°æ”¹æˆäº†æ ˆæ“ä½œï¼›å®ƒå’Œå±‚åºéå†çš„æ¡†æ¶ä¹Ÿå¾ˆåƒï¼Œåªä¸è¿‡æŠŠé˜Ÿåˆ—æ¢æˆäº†æ ˆï¼Œæ˜¯ä¸æ˜¯æŒºæœ‰æ„æ€çš„ï¼Ÿè¿™ä¸ªè§£æ³•ç›¸å½“äºå°±æ˜¯ç”¨æ ˆæ¨¡æ‹Ÿäº†é€’å½’ï¼Œå¯¹è¿™æ£µäºŒå‰æ ‘è¿›è¡Œå‰åºéå†ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-level-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def leafSimilar(self, root1: TreeNode, root2: TreeNode) -> bool:
        it1 = LeafIterator(root1)
        it2 = LeafIterator(root2)
        # é€ä¸€å¯¹æ¯”å¶å­èŠ‚ç‚¹
        while it1.hasNext() and it2.hasNext():
            if it1.next().val != it2.next().val:
                return False
        # æœ€ååº”è¯¥éƒ½å®Œæˆéå†
        return not it1.hasNext() and not it2.hasNext()

# ä¸€ä¸ªç”ŸæˆäºŒå‰æ ‘å¶å­èŠ‚ç‚¹çš„è¿­ä»£å™¨
class LeafIterator:
    # æ¨¡æ‹Ÿé€’å½’è¿‡ç¨‹
    def __init__(self, root: TreeNode):
        self.stk = [root]

    def hasNext(self) -> bool:
        return len(self.stk) > 0

    def next(self) -> TreeNode:
        while len(self.stk) > 0:
            cur = self.stk.pop()
            if cur.left is None and cur.right is None:
                # å‘ç°ä¸€ä¸ªå¶å­ç»“ç‚¹
                return cur
            # å…ˆå…¥æ ˆ root.right
            if cur.right is not None:
                self.stk.append(cur.right)
            if cur.left is not None:
                self.stk.append(cur.left)
        return None
```

Tip

å¦‚æœè®©ä½ ä»äºŒå‰æ ‘ä¸­çš„éæ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿå…¶å®å¯ä»¥ç”¨ map è®°å½•å­èŠ‚ç‚¹åˆ°çˆ¶èŠ‚ç‚¹çš„æ˜ å°„ï¼Œä»è€ŒæŠŠäºŒå‰æ ‘è½¬åŒ–æˆä¸€å¹…å›¾ï¼Œç„¶åå†ç¼–å†™ç®—æ³•ã€‚

## [863. äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º K çš„ç»“ç‚¹](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#slug_all-nodes-distance-k-in-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">863. äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º K çš„ç»“ç‚¹</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/all-nodes-distance-k-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/all-nodes-distance-k-in-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼ˆå…·æœ‰æ ¹ç»“ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code>ï¼‰ï¼Œ&nbsp;ä¸€ä¸ªç›®æ ‡ç»“ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;ï¼Œå’Œä¸€ä¸ªæ•´æ•°å€¼<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k</code>&nbsp;ï¼Œè¿”å›åˆ°ç›®æ ‡ç»“ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code><span>&nbsp;</span>è·ç¦»ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k</code><span>&nbsp;</span>çš„æ‰€æœ‰ç»“ç‚¹çš„å€¼çš„æ•°ç»„ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç­”æ¡ˆå¯ä»¥ä»¥<span>&nbsp;</span><strong style="font-weight: 600;">ä»»ä½•é¡ºåº</strong><span>&nbsp;</span>è¿”å›ã€‚</p><ol style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"></ol><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2018/06/28/sketch0.png" style="max-width: 100%; height: 429px; width: 500px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,5,1,6,2,0,8,null,null,7,4], target = 5, k = 2
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[7,4,1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æ‰€æ±‚ç»“ç‚¹ä¸ºä¸ç›®æ ‡ç»“ç‚¹ï¼ˆå€¼ä¸º 5ï¼‰è·ç¦»ä¸º 2 çš„ç»“ç‚¹ï¼Œå€¼åˆ†åˆ«ä¸º 7ï¼Œ4ï¼Œä»¥åŠ 1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [1], target = 1, k = 3
<strong style="font-weight: 600;">è¾“å‡º:</strong> []
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 500]</code>&nbsp;èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 500</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code>&nbsp;ä¸­æ‰€æœ‰å€¼<span>&nbsp;</span><strong style="font-weight: 600;">ä¸åŒ</strong></li><li>ç›®æ ‡ç»“ç‚¹&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">target</code>&nbsp;æ˜¯æ ‘ä¸Šçš„ç»“ç‚¹ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= k &lt;= 1000</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/all-nodes-distance-k-in-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 863. äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸º K çš„ç»“ç‚¹</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#åŸºæœ¬æ€è·¯-2)

è¿™é“é¢˜å¸¸è§„çš„è§£æ³•å°±æ˜¯æŠŠäºŒå‰æ ‘å˜æˆä¸€å¹…ã€Œå›¾ã€ï¼Œç„¶ååœ¨å›¾ä¸­ç”¨ BFS ç®—æ³•æ±‚è·ç¦» `target` èŠ‚ç‚¹ `k` æ­¥çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚

å…³äº BFS ç®—æ³•çš„åŸç†ï¼Œè§ [BFS ç®—æ³•æ ¸å¿ƒæ¡†æ¶å¥—è·¯](https://labuladong.online/algo/essential-technique/bfs-framework/)ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘BFS ç»å…¸ä¹ é¢˜ I](https://labuladong.online/algo/problem-set/bfs/)
- [ã€ç»ƒä¹ ã€‘è¿ç”¨å±‚åºéå†è§£é¢˜ II](https://labuladong.online/algo/problem-set/binary-tree-level-ii/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#è§£æ³•ä»£ç -2)

```python
class Solution:
    # è®°å½•çˆ¶èŠ‚ç‚¹ï¼šnode.val -> parentNode
    # é¢˜ç›®è¯´äº†æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ node.val ä»£è¡¨ TreeNode
    def __init__(self):
        self.parent = {}

    def distanceK(self, root, target, k):
        # éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
        self.traverse(root, None)

        # å¼€å§‹ä» target èŠ‚ç‚¹æ–½æ”¾ BFS ç®—æ³•ï¼Œæ‰¾åˆ°è·ç¦»ä¸º k çš„èŠ‚ç‚¹
        from collections import deque
        q = deque()
        visited = set()
        q.append(target)
        visited.add(target.val)
        # è®°å½•ç¦» target çš„è·ç¦»
        dist = 0
        res = []

        while q:
            sz = len(q)
            for i in range(sz):
                cur = q.popleft()
                if dist == k:
                    # æ‰¾åˆ°è·ç¦»èµ·ç‚¹ target è·ç¦»ä¸º k çš„èŠ‚ç‚¹
                    res.append(cur.val)
                # å‘çˆ¶èŠ‚ç‚¹ã€å·¦å³å­èŠ‚ç‚¹æ‰©æ•£
                parentNode = self.parent.get(cur.val)
                if parentNode and parentNode.val not in visited:
                    visited.add(parentNode.val)
                    q.append(parentNode)
                if cur.left and cur.left.val not in visited:
                    visited.add(cur.left.val)
                    q.append(cur.left)
                if cur.right and cur.right.val not in visited:
                    visited.add(cur.right.val)
                    q.append(cur.right)
            # å‘å¤–æ‰©å±•ä¸€åœˆ
            dist += 1

        return res

    def traverse(self, root, parentNode):
        if root is None:
            return
        self.parent[root.val] = parentNode
        # äºŒå‰æ ‘é€’å½’æ¡†æ¶
        self.traverse(root.left, root)
        self.traverse(root.right, root)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/binary-tree-level-ii/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_all-nodes-distance-k-in-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_all-nodes-distance-k-in-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/all-nodes-distance-k-in-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [742. äºŒå‰æ ‘æœ€è¿‘çš„å¶èŠ‚ç‚¹ ğŸŸ ](https://leetcode.cn/problems/closest-leaf-in-a-binary-tree)



# ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I

## [99. æ¢å¤äºŒå‰æœç´¢æ ‘](https://labuladong.online/algo/problem-set/bst1/#slug_recover-binary-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">99. æ¢å¤äºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/recover-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/recover-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¯¥æ ‘ä¸­çš„<span>&nbsp;</span><strong style="font-weight: 600;">æ°å¥½</strong><span>&nbsp;</span>ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼è¢«é”™è¯¯åœ°äº¤æ¢ã€‚<em>è¯·åœ¨ä¸æ”¹å˜å…¶ç»“æ„çš„æƒ…å†µä¸‹ï¼Œæ¢å¤è¿™æ£µæ ‘&nbsp;</em>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/28/recover1.jpg" style="max-width: 100%; width: 300px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,3,null,null,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[3,1,null,null,2]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>3 ä¸èƒ½æ˜¯ 1 çš„å·¦å­©å­ï¼Œå› ä¸º 3 &gt; 1 ã€‚äº¤æ¢ 1 å’Œ 3 ä½¿äºŒå‰æœç´¢æ ‘æœ‰æ•ˆã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/28/recover2.jpg" style="max-width: 100%; height: 208px; width: 400px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,1,4,null,null,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2,1,4,null,null,3]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>2 ä¸èƒ½åœ¨ 3 çš„å³å­æ ‘ä¸­ï¼Œå› ä¸º 2 &lt; 3 ã€‚äº¤æ¢ 2 å’Œ 3 ä½¿äºŒå‰æœç´¢æ ‘æœ‰æ•ˆã€‚</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸ŠèŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[2, 1000]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-2<sup>31</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 2<sup>31</sup><span>&nbsp;</span>- 1</code></li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;"><strong style="font-weight: 600;">è¿›é˜¶ï¼š</strong>ä½¿ç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">O(n)</code><span>&nbsp;</span>ç©ºé—´å¤æ‚åº¦çš„è§£æ³•å¾ˆå®¹æ˜“å®ç°ã€‚ä½ èƒ½æƒ³å‡ºä¸€ä¸ªåªä½¿ç”¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">O(1)</code><span>&nbsp;</span>ç©ºé—´çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ</p></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/recover-binary-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 99. æ¢å¤äºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼ã€‚

å¾—ç›ŠäºäºŒå‰æœç´¢æ ‘å·¦å°å³å¤§çš„ç‰¹æ€§ï¼Œä¸€ä¸ªé‡è¦æ€§è´¨æ˜¯ï¼šäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ç»“æœæœ‰åºã€‚

é¢˜ç›®è¯´æœ‰ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼åäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸­åºéå†ç»“æœä¸å†æ˜¯æœ‰åºçš„ï¼Œæœ‰ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®åäº†ã€‚

é‚£ä¹ˆæˆ‘ä»¬åœ¨ä¸­åºéå†çš„æ—¶å€™æ‰¾åˆ°ç ´åæœ‰åºæ€§çš„è¿™ä¸¤ä¸ªå…ƒç´ ï¼Œäº¤æ¢å®ƒä»¬å³å¯ã€‚

![img](1.jpg)

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç )

```python
class Solution:

    # åˆ†åˆ«è®°å½•è¿™ä¸¤ä¸ªè¢«äº¤æ¢çš„èŠ‚ç‚¹
    first = None
    second = None
    # åˆ¤æ–­ä¸­åºéå†çš„æœ‰åºæ€§
    prev = TreeNode(float('-inf'))


    def recoverTree(self, root: TreeNode) -> None:
        self.inorderTraverse(root)

        temp = self.first.val
        self.first.val = self.second.val
        self.second.val = temp


    def inorderTraverse(self, root: TreeNode) -> None:
        if root is None:
            return
        self.inorderTraverse(root.left)
        # ä¸­åºä»£ç ä½ç½®ï¼Œæ‰¾å‡ºé‚£ä¸¤ä¸ªèŠ‚ç‚¹
        if root.val < self.prev.val:
            # root ä¸ç¬¦åˆæœ‰åºæ€§
            if self.first is None:
                # ç¬¬ä¸€ä¸ªé”™ä½èŠ‚ç‚¹æ˜¯ prev
                self.first = self.prev
            # ç¬¬äºŒä¸ªé”™ä½èŠ‚ç‚¹æ˜¯ root
            self.second = root
        self.prev = root
        self.inorderTraverse(root.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_recover-binary-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_recover-binary-search-tree" src="https://labuladong.online/algo-visualize/leetcode/recover-binary-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘](https://labuladong.online/algo/problem-set/bst1/#slug_trim-a-binary-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/trim-a-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/trim-a-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼ŒåŒæ—¶ç»™å®šæœ€å°è¾¹ç•Œ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">low</code><span>&nbsp;</span>å’Œæœ€å¤§è¾¹ç•Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">high</code>ã€‚é€šè¿‡ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å€¼åœ¨<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[low, high]</code>ä¸­ã€‚ä¿®å‰ªæ ‘<span>&nbsp;</span><strong style="font-weight: 600;">ä¸åº”è¯¥</strong>&nbsp;æ”¹å˜ä¿ç•™åœ¨æ ‘ä¸­çš„å…ƒç´ çš„ç›¸å¯¹ç»“æ„ (å³ï¼Œå¦‚æœæ²¡æœ‰è¢«ç§»é™¤ï¼ŒåŸæœ‰çš„çˆ¶ä»£å­ä»£å…³ç³»éƒ½åº”å½“ä¿ç•™)ã€‚ å¯ä»¥è¯æ˜ï¼Œå­˜åœ¨&nbsp;<strong style="font-weight: 600;">å”¯ä¸€çš„ç­”æ¡ˆ</strong>&nbsp;ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ‰€ä»¥ç»“æœåº”å½“è¿”å›ä¿®å‰ªå¥½çš„äºŒå‰æœç´¢æ ‘çš„æ–°çš„æ ¹èŠ‚ç‚¹ã€‚æ³¨æ„ï¼Œæ ¹èŠ‚ç‚¹å¯èƒ½ä¼šæ ¹æ®ç»™å®šçš„è¾¹ç•Œå‘ç”Ÿæ”¹å˜ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/09/09/trim1.jpg" style="max-width: 100%; height: 126px; width: 450px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,0,2], low = 1, high = 2
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,null,2]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/09/09/trim2.jpg" style="max-width: 100%; height: 277px; width: 450px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [3,0,4,null,2,null,null,1], low = 1, high = 3
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[3,2,null,1]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 10<sup>4</sup></code></li><li>æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯<span>&nbsp;</span><strong style="font-weight: 600;">å”¯ä¸€</strong><span>&nbsp;</span>çš„</li><li>é¢˜ç›®æ•°æ®ä¿è¯è¾“å…¥æ˜¯ä¸€æ£µæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= low &lt;= high &lt;= 10<sup>4</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/trim-a-binary-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯-1)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

æ˜ç¡®äº†é€’å½’å‡½æ•°çš„å®šä¹‰ä¹‹åè¿›è¡Œæ€è€ƒï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„å€¼æ²¡æœ‰è½åœ¨ `[lo, hi]` ä¸­ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š

1ã€**`root.val < lo`ï¼Œè¿™ç§æƒ…å†µä¸‹ `root` èŠ‚ç‚¹æœ¬èº«å’Œ `root` çš„å·¦å­æ ‘å…¨éƒ½æ˜¯å°äº `lo` çš„ï¼Œéƒ½éœ€è¦è¢«å‰ªæ‰**ã€‚

2ã€**`root.val > hi`ï¼Œè¿™ç§æƒ…å†µä¸‹ `root` èŠ‚ç‚¹æœ¬èº«å’Œ `root` çš„å³å­æ ‘å…¨éƒ½æ˜¯å¤§äº `hi` çš„ï¼Œéƒ½éœ€è¦è¢«å‰ªæ‰**ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç -1)

```python
class Solution:
    # å®šä¹‰ï¼šåˆ é™¤ BST ä¸­å°äº low å’Œå¤§äº high çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿”å›ç»“æœ BST
    def trimBST(self, root: TreeNode, low: int, high: int) -> TreeNode:
        if root is None:
            return None

        if root.val < low:
            # ç›´æ¥è¿”å› root.right
            # ç­‰äºåˆ é™¤ root ä»¥åŠ root çš„å·¦å­æ ‘
            return self.trimBST(root.right, low, high)
        if root.val > high:
            # ç›´æ¥è¿”å› root.left
            # ç­‰äºåˆ é™¤ root ä»¥åŠ root çš„å³å­æ ‘
            return self.trimBST(root.left, low, high)

        # é—­åŒºé—´ [lo, hi] å†…çš„èŠ‚ç‚¹ä»€ä¹ˆéƒ½ä¸åš
        root.left = self.trimBST(root.left, low, high)
        root.right = self.trimBST(root.right, low, high)

        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_trim-a-binary-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_trim-a-binary-search-tree" src="https://labuladong.online/algo-visualize/leetcode/trim-a-binary-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [776. æ‹†åˆ†äºŒå‰æœç´¢æ ‘ ğŸŸ ](https://leetcode.cn/problems/split-bst)

## [671. äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹](https://labuladong.online/algo/problem-set/bst1/#slug_second-minimum-node-in-a-binary-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">671. äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/second-minimum-node-in-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/second-minimum-node-in-a-binary-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªéç©ºç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ­£æ•°ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡åªèƒ½ä¸º&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">2</code>&nbsp;æˆ–&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0</code>ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å€¼ç­‰äºä¸¤ä¸ªå­èŠ‚ç‚¹ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">æ›´æ­£å¼åœ°è¯´ï¼Œå³&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root.val = min(root.left.val, root.right.val)</code><span>&nbsp;</span>æ€»æˆç«‹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å‡ºè¿™æ ·çš„ä¸€ä¸ªäºŒå‰æ ‘ï¼Œä½ éœ€è¦è¾“å‡ºæ‰€æœ‰èŠ‚ç‚¹ä¸­çš„&nbsp;<strong style="font-weight: 600;">ç¬¬äºŒå°çš„å€¼<span>&nbsp;</span></strong>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœç¬¬äºŒå°çš„å€¼ä¸å­˜åœ¨çš„è¯ï¼Œè¾“å‡º -1<span>&nbsp;</span><strong style="font-weight: 600;">ã€‚</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/15/smbt1.jpg" style="max-width: 100%; height: 210px; width: 300px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,2,5,null,null,5,7]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>5
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€å°çš„å€¼æ˜¯ 2 ï¼Œç¬¬äºŒå°çš„å€¼æ˜¯ 5 ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/10/15/smbt2.jpg" style="max-width: 100%; height: 113px; width: 200px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,2,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>-1
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>æœ€å°çš„å€¼æ˜¯ 2, ä½†æ˜¯ä¸å­˜åœ¨ç¬¬äºŒå°çš„å€¼ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 25]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 2<sup>31</sup><span>&nbsp;</span>- 1</code></li><li>å¯¹äºæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root.val == min(root.left.val, root.right.val)</code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/second-minimum-node-in-a-binary-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 671. äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯-2)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

è¿™é¢˜å¾ˆæœ‰æ„æ€ï¼ŒæŒ‰ç…§è¿™æ£µäºŒå‰æ ‘çš„ç‰¹æ€§ï¼Œæ ¹èŠ‚ç‚¹æ— ç–‘æ˜¯æœ€å°çš„é‚£ä¸ªå…ƒç´ ï¼Œä½†é—®é¢˜æ˜¯ç¬¬äºŒå°çš„é‚£ä¸ªå…ƒç´ åœ¨å“ªé‡Œå‘¢ï¼Ÿ

å¦‚æœæ ¹èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„å€¼ä¸åŒï¼Œæ ¹èŠ‚ç‚¹çš„å€¼å°±æ˜¯è¾ƒå°çš„é‚£ä¸ªèŠ‚ç‚¹ï¼ˆå‡è®¾æ˜¯å·¦å­èŠ‚ç‚¹ï¼‰çš„å€¼ï¼Œé‚£ä¹ˆè¾ƒå¤§çš„é‚£ä¸ªèŠ‚ç‚¹ï¼ˆå³å­èŠ‚ç‚¹ï¼‰çš„å€¼æ˜¯ä¸æ˜¯å°±ä¸€å®šæ˜¯ç¬¬äºŒå°çš„é‚£ä¸ªå…ƒç´ ï¼Ÿ

ä¸ä¸€å®šï¼Œç¬¬äºŒå°çš„å€¼ä¹Ÿå¯èƒ½åœ¨å·¦å­æ ‘ä¸­ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ˜¯å·¦å­æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹ï¼š

![img](671_1.png)

ç±»ä¼¼çš„é“ç†ï¼Œå¦‚æœæ ¹èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹ç›¸åŒï¼Œé‚£ä¹ˆéœ€è¦æŠŠå·¦å³å­æ ‘çš„ç¬¬äºŒå°å…ƒç´ è®¡ç®—å‡ºæ¥ï¼Œæ¯”è¾ƒå…¶ä¸­è¾ƒå°çš„å…ƒç´ ï¼Œä½œä¸ºæ•´æ£µæ ‘çš„ç¬¬äºŒå°å…ƒç´ ï¼š

![img](671_2.png)

å¦‚ä½•è®¡ç®—å­æ ‘ä¸­çš„ç¬¬äºŒå°å…ƒç´ ï¼Ÿå‡½æ•° `findSecondMinimumValue` å°±æ˜¯å¹²è¿™ä¸ªçš„ï¼Œé€’å½’è°ƒç”¨å­æ ‘å³å¯ç®—å‡ºæ¥ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç -2)

```python
class Solution:
    # å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›è¿™æ£µäºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹å€¼
    def findSecondMinimumValue(self, root: TreeNode) -> int:
        if root.left is None and root.right is None:
            return -1
        # å·¦å³å­èŠ‚ç‚¹ä¸­ä¸åŒäº root.val çš„é‚£ä¸ªå€¼å¯èƒ½æ˜¯ç¬¬äºŒå°çš„å€¼
        left, right = root.left.val, root.right.val
        # å¦‚æœå·¦å³å­èŠ‚ç‚¹éƒ½ç­‰äº root.valï¼Œåˆ™å»å·¦å³å­æ ‘é€’å½’å¯»æ‰¾ç¬¬äºŒå°çš„å€¼
        if root.val == root.left.val:
            left = self.findSecondMinimumValue(root.left)
        if root.val == root.right.val:
            right = self.findSecondMinimumValue(root.right)
        if left == -1:
            return right
        if right == -1:
            return left
        # å¦‚æœå·¦å³å­æ ‘éƒ½æ‰¾åˆ°ä¸€ä¸ªç¬¬äºŒå°çš„å€¼ï¼Œæ›´å°çš„é‚£ä¸ªæ˜¯æ•´æ£µæ ‘çš„ç¬¬äºŒå°å…ƒç´ 
        return min(left, right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_second-minimum-node-in-a-binary-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_second-minimum-node-in-a-binary-tree" src="https://labuladong.online/algo-visualize/leetcode/second-minimum-node-in-a-binary-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°](https://labuladong.online/algo/problem-set/bst1/#slug_find-mode-in-binary-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/find-mode-in-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/find-mode-in-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰<span>&nbsp;</span><a href="https://baike.baidu.com/item/%E4%BC%97%E6%95%B0/44796" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">ä¼—æ•°</a>ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä»»æ„é¡ºåº</strong><span>&nbsp;</span>è¿”å›ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å‡å®š BST æ»¡è¶³å¦‚ä¸‹å®šä¹‰ï¼š</p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼<span>&nbsp;</span><strong style="font-weight: 600;">å°äºç­‰äº</strong><span>&nbsp;</span>å½“å‰èŠ‚ç‚¹çš„å€¼</li><li>ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼<span>&nbsp;</span><strong style="font-weight: 600;">å¤§äºç­‰äº</strong><span>&nbsp;</span>å½“å‰èŠ‚ç‚¹çš„å€¼</li><li>å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/03/11/mode-tree.jpg" style="max-width: 100%; width: 142px; height: 222px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,2,2]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [0]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[0]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup><span>&nbsp;</span>&lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;"><strong style="font-weight: 600;">è¿›é˜¶ï¼š</strong>ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´å—ï¼Ÿï¼ˆå‡è®¾ç”±é€’å½’äº§ç”Ÿçš„éšå¼è°ƒç”¨æ ˆçš„å¼€é”€ä¸è¢«è®¡ç®—åœ¨å†…ï¼‰</p></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/find-mode-in-binary-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯-3)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

BST çš„ä¸­åºéå†æœ‰åºï¼Œåœ¨ä¸­åºéå†çš„ä½ç½®åšä¸€äº›åˆ¤æ–­é€»è¾‘å’Œæ“ä½œæœ‰åºæ•°ç»„å·®ä¸å¤šï¼Œå¾ˆå®¹æ˜“æ‰¾å‡ºä¼—æ•°ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç -3)

```python
class Solution:
    def __init__(self):
        self.mode = []
        self.prev = None
        # å½“å‰å…ƒç´ çš„é‡å¤æ¬¡æ•°
        self.curCount = 0
        # å…¨å±€çš„æœ€é•¿ç›¸åŒåºåˆ—é•¿åº¦
        self.maxCount = 0

    def findMode(self, root):
        # æ‰§è¡Œä¸­åºéå†
        self.traverse(root)

        return self.mode

    def traverse(self, root):
        if root is None:
            return
        self.traverse(root.left)

        # ä¸­åºéå†ä½ç½®
        if self.prev is None:
            # åˆå§‹åŒ–
            self.curCount = 1
            self.maxCount = 1
            self.mode.append(root.val)
        else:
            if root.val == self.prev.val:
                # root.val é‡å¤çš„æƒ…å†µ
                self.curCount += 1
                if self.curCount == self.maxCount:
                    # root.val æ˜¯ä¼—æ•°
                    self.mode.append(root.val)
                elif self.curCount > self.maxCount:
                    # æ›´æ–°ä¼—æ•°
                    self.mode = []
                    self.maxCount = self.curCount
                    self.mode.append(root.val)
            else:
                # root.val ä¸é‡å¤çš„æƒ…å†µ
                self.curCount = 1
                if self.curCount == self.maxCount:
                    self.mode.append(root.val)

        # åˆ«å¿˜äº†æ›´æ–° prev
        self.prev = root

        self.traverse(root.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–-3)

<details data-v-ee1a9bd0="" id="div_find-mode-in-binary-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_find-mode-in-binary-search-tree" src="https://labuladong.online/algo-visualize/leetcode/find-mode-in-binary-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®](https://labuladong.online/algo/problem-set/bst1/#slug_minimum-absolute-difference-in-bst)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/minimum-absolute-difference-in-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/minimum-absolute-difference-in-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ï¼Œè¿”å›<span>&nbsp;</span><strong style="font-weight: 600;">æ ‘ä¸­ä»»æ„ä¸¤ä¸åŒèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å°å·®å€¼</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å·®å€¼æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå…¶æ•°å€¼ç­‰äºä¸¤å€¼ä¹‹å·®çš„ç»å¯¹å€¼ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/05/bst1.jpg" style="max-width: 100%; width: 292px; height: 301px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [4,2,6,1,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/05/bst2.jpg" style="max-width: 100%; width: 282px; height: 301px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,0,48,null,null,12,49]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>1
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[2, 10<sup>4</sup>]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;"><strong style="font-weight: 600;">æ³¨æ„ï¼š</strong>æœ¬é¢˜ä¸ 783<span>&nbsp;</span><a href="https://leetcode-cn.com/problems/minimum-distance-between-bst-nodes/" class="" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">https://leetcode-cn.com/problems/minimum-distance-between-bst-nodes/</a><span>&nbsp;</span>ç›¸åŒ</p></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/minimum-absolute-difference-in-bst/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯-4)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œéå†ã€çš„æ€ç»´ã€‚

è®°ä½ï¼Œçœ‹åˆ°ä¸€æ£µ BSTï¼Œä½ å°±æŠŠå®ƒç†è§£æ˜¯ä¸€ä¸ªæœ‰åºæ•°ç»„å°±è¡Œäº†ï¼Œåªæ˜¯éå†æ–¹å¼ä¸åŒç½¢äº†ã€‚æ‰€ä»¥è¿™é“é¢˜çš„æ€è·¯å°±å¾ˆç®€å•ï¼Œç”¨ä¸­åºéå†éå†ä¸€é BST çš„æ‰€æœ‰èŠ‚ç‚¹å¾—åˆ°æœ‰åºç»“æœï¼Œç„¶ååœ¨éå†è¿‡ç¨‹ä¸­è®¡ç®—æœ€å°å·®å€¼å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç -4)

```python
class Solution:
    def __init__(self):
        self.prev = None
        self.res = float('inf')

    def getMinimumDifference(self, root: TreeNode) -> int:
        self.traverse(root)
        return self.res

    # éå†å‡½æ•°
    def traverse(self, root: TreeNode):
        if root is None:
            return
        self.traverse(root.left)
        # ä¸­åºéå†ä½ç½®
        if self.prev is not None:
            self.res = min(self.res, root.val - self.prev.val)
        self.prev = root
        self.traverse(root.right)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–-4)

<details data-v-ee1a9bd0="" id="div_minimum-absolute-difference-in-bst" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_minimum-absolute-difference-in-bst" src="https://labuladong.online/algo-visualize/leetcode/minimum-absolute-difference-in-bst/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [783. äºŒå‰æœç´¢æ ‘èŠ‚ç‚¹æœ€å°è·ç¦» ğŸŸ¢](https://leetcode.cn/problems/minimum-distance-between-bst-nodes)

## [653. ä¸¤æ•°ä¹‹å’Œ IV - è¾“å…¥ BST](https://labuladong.online/algo/problem-set/bst1/#slug_two-sum-iv-input-is-a-bst)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">653. ä¸¤æ•°ä¹‹å’Œ IV - è¾“å…¥äºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/two-sum-iv-input-is-a-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/two-sum-iv-input-is-a-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>å’Œä¸€ä¸ªç›®æ ‡ç»“æœ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">k</code>ï¼Œå¦‚æœäºŒå‰æœç´¢æ ‘ä¸­å­˜åœ¨ä¸¤ä¸ªå…ƒç´ ä¸”å®ƒä»¬çš„å’Œç­‰äºç»™å®šçš„ç›®æ ‡ç»“æœï¼Œåˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/09/21/sum_tree_1.jpg" style="max-width: 100%; height: 229px; width: 400px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [5,3,6,2,4,null,7], k = 9
<strong style="font-weight: 600;">è¾“å‡º:</strong> true
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2020/09/21/sum_tree_2.jpg" style="max-width: 100%; height: 229px; width: 400px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [5,3,6,2,4,null,7], k = 28
<strong style="font-weight: 600;">è¾“å‡º:</strong> false
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯&nbsp;&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>.</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup>&nbsp;&lt;= Node.val &lt;= 10<sup>4</sup></code></li><li>é¢˜ç›®æ•°æ®ä¿è¯ï¼Œè¾“å…¥çš„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>æ˜¯ä¸€æ£µ<span>&nbsp;</span><strong style="font-weight: 600;">æœ‰æ•ˆ</strong><span>&nbsp;</span>çš„äºŒå‰æœç´¢æ ‘</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup>&nbsp;&lt;= k &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/two-sum-iv-input-is-a-bst/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 653. ä¸¤æ•°ä¹‹å’Œ IV - è¾“å…¥äºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯-5)

è¿™é“é¢˜çš„æ€è·¯è›®å¤šçš„ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨ BST ä¸­åºéå†æœ‰åºè¿™ä¸ªæ€§è´¨å¤–åŠ  [ä¸€ä¸ªå‡½æ•°ç§’æ€ nSum é—®é¢˜](https://labuladong.online/algo/practice-in-action/nsum/) ä¸­çš„åŒæŒ‡é’ˆæ€è·¯æ¥è§£å†³å§ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç -5)

```python
class Solution:
    def findTarget(self, root: TreeNode, k: int) -> bool:
        # è½¬åŒ–æˆæœ‰åºæ•°ç»„
        arr = self.traverse(root)
        # æœ‰åºæ•°ç»„ä¸­çš„å·¦å³åŒæŒ‡é’ˆ
        i, j = 0, len(arr) - 1
        while i < j:
            sum_val = arr[i] + arr[j]
            if sum_val < k:
                # sum è°ƒå¤§ä¸€ç‚¹
                i += 1
            elif sum_val > k:
                # sum è°ƒå°ä¸€ç‚¹
                j -= 1
            else:
                return True
        return False

    # è¿”å›ä¸­åºéå†ç»“æœ
    def traverse(self, root: TreeNode) -> List[int]:
        res = []
        if root is None:
            return res
        res.extend(self.traverse(root.left))
        res.append(root.val)
        res.extend(self.traverse(root.right))
        return res
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–-5)

<details data-v-ee1a9bd0="" id="div_two-sum-iv-input-is-a-bst" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_two-sum-iv-input-is-a-bst" src="https://labuladong.online/algo-visualize/leetcode/two-sum-iv-input-is-a-bst/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [å‰‘æŒ‡ Offer II 056. äºŒå‰æœç´¢æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹å’Œ ğŸŸ¢](https://leetcode.cn/problems/opLdQZ)

## [1008. å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘](https://labuladong.online/algo/problem-set/bst1/#slug_construct-binary-search-tree-from-preorder-traversal)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1008. å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/construct-binary-search-tree-from-preorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/construct-binary-search-tree-from-preorder-traversal/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ƒè¡¨ç¤ºBST(å³<span>&nbsp;</span><strong style="font-weight: 600;">äºŒå‰æœç´¢æ ‘</strong><span>&nbsp;</span>)çš„<span>&nbsp;</span><strong style="font-weight: 600;">å…ˆ</strong><strong style="font-weight: 600;">åºéå†</strong><span>&nbsp;</span>ï¼Œæ„é€ æ ‘å¹¶è¿”å›å…¶æ ¹ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ä¿è¯</strong><span>&nbsp;</span>å¯¹äºç»™å®šçš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ€»æ˜¯æœ‰å¯èƒ½æ‰¾åˆ°å…·æœ‰ç»™å®šéœ€æ±‚çš„äºŒå‰æœç´¢æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">äºŒå‰æœç´¢æ ‘</strong><span>&nbsp;</span>æ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼Œ&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.left</code>&nbsp;çš„ä»»ä½•åä»£çš„å€¼<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¥æ ¼å°äº</strong><span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code>&nbsp;,&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.right</code>&nbsp;çš„ä»»ä½•åä»£çš„å€¼<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¥æ ¼å¤§äº</strong><span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.val</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">äºŒå‰æ ‘çš„<span>&nbsp;</span><strong style="font-weight: 600;">å‰åºéå†</strong><span>&nbsp;</span>é¦–å…ˆæ˜¾ç¤ºèŠ‚ç‚¹çš„å€¼ï¼Œç„¶åéå†<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.left</code>ï¼Œæœ€åéå†<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">Node.right</code>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2019/03/06/1266.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>preorder = [8,5,1,7,10,12]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[8,5,10,1,7,null,12]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> preorder = [1,3]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [1,null,3]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= preorder.length &lt;= 100</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= preorder[i]&nbsp;&lt;= 10^8</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">preorder</code><span>&nbsp;</span>ä¸­çš„å€¼<span>&nbsp;</span><strong style="font-weight: 600;">äº’ä¸ç›¸åŒ</strong></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/construct-binary-search-tree-from-preorder-traversal/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1008. å‰åºéå†æ„é€ äºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst1/#åŸºæœ¬æ€è·¯-6)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´ã€‚

å‰æ–‡ [äºŒå‰æ ‘çš„èŠ±å¼æ„é€ ](https://labuladong.online/algo/data-structure/binary-tree-part2/) å’Œ [äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–](https://labuladong.online/algo/data-structure/serialize-and-deserialize-binary-tree/) è¯´è¿‡ï¼Œç”ŸæˆäºŒå‰æ ‘çš„é¢˜ç›®ï¼Œæ— éå°±æ˜¯å…ˆç”Ÿæˆæ ¹èŠ‚ç‚¹ï¼Œç„¶åé€’å½’ç”Ÿæˆå·¦å³å­æ ‘ï¼Œæœ€åæŠŠæ ¹èŠ‚ç‚¹å’Œå·¦å³å­æ ‘è¿æ¥èµ·æ¥ã€‚**å…·ä½“åŒºåˆ«åœ¨äºä½ å¦‚ä½•æ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œå¦‚ä½•åˆ’åˆ†å·¦å³å­æ ‘**ã€‚

æ ¹æ®å‰åºéå†çš„ç‰¹ç‚¹æ˜¯ï¼Œæ ¹èŠ‚ç‚¹åœ¨ç¬¬ä¸€ä½ï¼Œåé¢æ¥ç€å·¦å­æ ‘å’Œå³å­æ ‘ï¼›BST çš„ç‰¹ç‚¹ï¼Œå·¦å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å°ï¼Œå³å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å¤§ã€‚

æ‰€ä»¥å¦‚ä½•æ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Ÿå‰åºéå†çš„ç¬¬ä¸€ä¸ªå°±æ˜¯æ ¹èŠ‚ç‚¹ã€‚

å¦‚ä½•æ‰¾åˆ°å·¦å³å­æ ‘ï¼Ÿæ¯”æ ¹èŠ‚ç‚¹å°çš„å°±æ˜¯å·¦å­æ ‘çš„èŠ‚ç‚¹ï¼Œæ¯”æ ¹èŠ‚ç‚¹å¤§çš„å°±æ˜¯å³å­æ ‘çš„èŠ‚ç‚¹ã€‚

æœ€åï¼Œç¡®å®šæ¸…æ¥š `build` å‡½æ•°çš„å®šä¹‰ï¼Œåˆ©ç”¨è¿™ä¸ªå‡½æ•°é€’å½’ç”Ÿæˆ BST å³å¯ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ I](https://labuladong.online/algo/problem-set/bst1/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst1/#è§£æ³•ä»£ç -6)



```python
class Solution:
    def bstFromPreorder(self, preorder):
        return self.build(preorder, 0, len(preorder) - 1)

    # å®šä¹‰ï¼šå°† preorder[start..end] åŒºé—´å†…çš„å…ƒç´ ç”Ÿæˆ BSTï¼Œå¹¶è¿”å›æ ¹èŠ‚ç‚¹
    def build(self, preorder, start, end):
        if start > end:
            return None
        # æ ¹æ®å‰åºéå†çš„ç‰¹ç‚¹ï¼Œæ ¹èŠ‚ç‚¹åœ¨ç¬¬ä¸€ä½ï¼Œåé¢æ¥ç€å·¦å­æ ‘å’Œå³å­æ ‘
        rootVal = preorder[start]
        root = TreeNode(rootVal)

        # æ ¹æ® BST çš„ç‰¹ç‚¹ï¼Œå·¦å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å°ï¼Œå³å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å¤§
        # p å°±æ˜¯å·¦å³å­æ ‘çš„åˆ†ç•Œç‚¹
        p = start + 1
        while p <= end and preorder[p] < rootVal:
            p += 1
        # [start+1, p-1] åŒºé—´å†…æ˜¯å·¦å­æ ‘å…ƒç´ 
        root.left = self.build(preorder, start + 1, p - 1)
        # [p, end] åŒºé—´å†…æ˜¯å³å­æ ‘å…ƒç´ 
        root.right = self.build(preorder, p, end)

        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst1/#å¯è§†åŒ–-6)

<details data-v-ee1a9bd0="" id="div_construct-binary-search-tree-from-preorder-traversal" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_construct-binary-search-tree-from-preorder-traversal" src="https://labuladong.online/algo-visualize/leetcode/construct-binary-search-tree-from-preorder-traversal/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [255. éªŒè¯å‰åºéå†åºåˆ—äºŒå‰æœç´¢æ ‘ ğŸŸ ](https://leetcode.cn/problems/verify-preorder-sequence-in-binary-search-tree)

## [108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘](https://labuladong.online/algo/problem-set/bst2/#slug_convert-sorted-array-to-binary-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/convert-sorted-array-to-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ¢</summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">nums</code><span>&nbsp;</span>ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">å‡åº</strong><span>&nbsp;</span>æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µ<span>&nbsp;</span><span data-keyword="height-balanced">å¹³è¡¡</span><span>&nbsp;</span>äºŒå‰æœç´¢æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/18/btree1.jpg" style="max-width: 100%; width: 302px; height: 222px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>nums = [-10,-3,0,5,9]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[0,-3,9,-10,null,5]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>[0,-10,5,null,-3,null,9] ä¹Ÿå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆï¼š
<img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/18/btree2.jpg" style="max-width: 100%; width: 302px; height: 222px;">
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2021/02/18/btree.jpg" style="max-width: 100%; width: 342px; height: 142px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>nums = [1,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[3,1]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>[1,null,3] å’Œ [3,1] éƒ½æ˜¯é«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= nums.length &lt;= 10<sup>4</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>4</sup><span>&nbsp;</span>&lt;= nums[i] &lt;= 10<sup>4</sup></code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">nums</code><span>&nbsp;</span>æŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">ä¸¥æ ¼é€’å¢</strong><span>&nbsp;</span>é¡ºåºæ’åˆ—</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst2/#åŸºæœ¬æ€è·¯)

å‰æ–‡ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘æ€»ç»“ç¯‡](https://labuladong.online/algo/essential-technique/binary-tree-summary/) è¯´è¿‡äºŒå‰æ ‘çš„é€’å½’åˆ†ä¸ºã€Œéå†ã€å’Œã€Œåˆ†è§£é—®é¢˜ã€ä¸¤ç§æ€ç»´æ¨¡å¼ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼ã€‚

äºŒå‰æ ‘çš„æ„å»ºé—®é¢˜éµå¾ªå›ºå®šçš„å¥—è·¯ï¼Œæ„é€ æ•´æ£µæ ‘å¯ä»¥åˆ†è§£æˆï¼šå…ˆæ„é€ æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ„å»ºå·¦å³å­æ ‘ã€‚

ä¸€ä¸ªæœ‰åºæ•°ç»„å¯¹äº BST æ¥è¯´å°±æ˜¯ä¸­åºéå†ç»“æœï¼Œæ ¹èŠ‚ç‚¹åœ¨æ•°ç»„ä¸­å¿ƒï¼Œæ•°ç»„å·¦ä¾§æ˜¯å·¦å­æ ‘å…ƒç´ ï¼Œå³ä¾§æ˜¯å³å­æ ‘å…ƒç´ ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ II](https://labuladong.online/algo/problem-set/bst2/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst2/#è§£æ³•ä»£ç )

```python
class Solution:
    def sortedArrayToBST(self, nums):
        return self.build(nums, 0, len(nums) - 1)

    # å°†é—­åŒºé—´ [left, right] ä¸­çš„å…ƒç´ è½¬åŒ–æˆ BSTï¼Œè¿”å›æ ¹èŠ‚ç‚¹
    def build(self, nums, left, right):
        if left > right:
            # åŒºé—´ä¸ºç©º
            return None
        # æ„é€ æ ¹èŠ‚ç‚¹
        # BST èŠ‚ç‚¹å·¦å°å³å¤§ï¼Œä¸­é—´çš„å…ƒç´ å°±æ˜¯æ ¹èŠ‚ç‚¹
        mid = (left + right) // 2
        root = TreeNode(nums[mid])
        # é€’å½’æ„å»ºå·¦å­æ ‘
        root.left = self.build(nums, left, mid - 1)
        # é€’å½’æ„é€ å³å­æ ‘
        root.right = self.build(nums, mid + 1, right)

        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst2/#å¯è§†åŒ–)

<details data-v-ee1a9bd0="" id="div_convert-sorted-array-to-binary-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_convert-sorted-array-to-binary-search-tree" src="https://labuladong.online/algo-visualize/leetcode/convert-sorted-array-to-binary-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [109. æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘ ğŸŸ ](https://leetcode.cn/problems/convert-sorted-list-to-binary-search-tree)
- [1382. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡ ğŸŸ ](https://leetcode.cn/problems/balance-a-binary-search-tree)

## [1382. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡](https://labuladong.online/algo/problem-set/bst2/#slug_balance-a-binary-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1382. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/balance-a-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/balance-a-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·ä½ è¿”å›ä¸€æ£µ&nbsp;<strong style="font-weight: 600;">å¹³è¡¡å</strong>&nbsp;çš„äºŒå‰æœç´¢æ ‘ï¼Œæ–°ç”Ÿæˆçš„æ ‘åº”è¯¥ä¸åŸæ¥çš„æ ‘æœ‰ç€ç›¸åŒçš„èŠ‚ç‚¹å€¼ã€‚å¦‚æœæœ‰å¤šç§æ„é€ æ–¹æ³•ï¼Œè¯·ä½ è¿”å›ä»»æ„ä¸€ç§ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1</code><span>&nbsp;</span>ï¼Œæˆ‘ä»¬å°±ç§°è¿™æ£µäºŒå‰æœç´¢æ ‘æ˜¯&nbsp;<strong style="font-weight: 600;">å¹³è¡¡çš„</strong><span>&nbsp;</span>ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/08/10/balance1-tree.jpg" style="max-width: 100%; height: 319px; width: 500px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [1,null,2,null,3,null,4,null,null]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2,1,3,null,null,null,4]
<strong style="font-weight: 600;">è§£é‡Šï¼š</strong>è¿™ä¸æ˜¯å”¯ä¸€çš„æ­£ç¡®ç­”æ¡ˆï¼Œ[3,1,4,null,2,null,null] ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¡Œçš„æ„é€ æ–¹æ¡ˆã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2021/08/10/balanced2-tree.jpg" style="max-width: 100%; height: 145px; width: 224px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> root = [2,1,3]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [2,1,3]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘èŠ‚ç‚¹çš„æ•°ç›®åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>4</sup>]</code>&nbsp;èŒƒå›´å†…ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">1 &lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/balance-a-binary-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1382. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst2/#åŸºæœ¬æ€è·¯-1)

è¿™é¢˜å¯éš¾å¯ç®€å•ï¼Œå¦‚æœè¦éš¾ï¼Œå°±æ˜¯çº¢é»‘æ ‘å·¦æ—‹å³æ—‹é‚£ä¸€å¥—ï¼Œä¸è¿‡çœŸçš„æ²¡å¿…è¦è¿™ä¹ˆæã€‚

æˆ‘ä»¬ç®€å•ç‚¹ï¼Œå°±æ˜¯ç”¨ä¸­åºéå†è·å– BST çš„æœ‰åºç»“æœï¼Œç„¶åç”¨ [108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree) çš„è§£æ³•ä»£ç ï¼Œå°†è¿™ä¸ªæœ‰åºæ•°ç»„è½¬åŒ–æˆå¹³è¡¡ BSTã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ II](https://labuladong.online/algo/problem-set/bst2/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst2/#è§£æ³•ä»£ç -1)

```python
class Solution:
    def balanceBST(self, root: TreeNode) -> TreeNode:
        # ä¸­åºéå†è·å–æœ‰åºæ•°ç»„
        nums = self.traverse(root)
        # ä»æœ‰åºæ•°ç»„æ„å»º BST
        return self.build(nums, 0, len(nums) - 1)

    # è¿”å›ä¸­åºéå†ç»“æœ
    def traverse(self, root: TreeNode) -> list:
        res = []
        if root is None:
            return res
        res.extend(self.traverse(root.left))
        res.append(root.val)
        res.extend(self.traverse(root.right))
        return res

    # BST æ„é€ å‡½æ•°ï¼Œè§ 108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘
    def build(self, nums: list, lo: int, hi: int) -> TreeNode:
        if lo > hi:
            return None

        mid = lo + (hi - lo) // 2
        root = TreeNode(nums[mid])

        root.left = self.build(nums, lo, mid - 1)
        root.right = self.build(nums, mid + 1, hi)

        return root
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst2/#å¯è§†åŒ–-1)

<details data-v-ee1a9bd0="" id="div_balance-a-binary-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_balance-a-binary-search-tree" src="https://labuladong.online/algo-visualize/leetcode/balance-a-binary-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

## [449. åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘](https://labuladong.online/algo/problem-set/bst2/#slug_serialize-and-deserialize-bst)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">449. åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/serialize-and-deserialize-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/serialize-and-deserialize-bst/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">åºåˆ—åŒ–æ˜¯å°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡è½¬æ¢ä¸ºä¸€ç³»åˆ—ä½çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶æˆ–å†…å­˜ç¼“å†²åŒºä¸­ï¼Œæˆ–é€šè¿‡ç½‘ç»œè¿æ¥é“¾è·¯ä¼ è¾“ï¼Œä»¥ä¾¿ç¨ååœ¨åŒä¸€ä¸ªæˆ–å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒä¸­é‡å»ºã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;">è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–<strong style="font-weight: 600;"><span>&nbsp;</span>äºŒå‰æœç´¢æ ‘</strong><span>&nbsp;</span>ã€‚ å¯¹åºåˆ—åŒ–/ååºåˆ—åŒ–ç®—æ³•çš„å·¥ä½œæ–¹å¼æ²¡æœ‰é™åˆ¶ã€‚ æ‚¨åªéœ€ç¡®ä¿äºŒå‰æœç´¢æ ‘å¯ä»¥åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å¯ä»¥å°†è¯¥å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºæœ€åˆçš„äºŒå‰æœç´¢æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¼–ç çš„å­—ç¬¦ä¸²åº”å°½å¯èƒ½ç´§å‡‘ã€‚</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = [2,1,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[2,1,3]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root = []
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹æ•°èŒƒå›´æ˜¯<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 10<sup>4</sup>]</code></li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 10<sup>4</sup></code></li><li>é¢˜ç›®æ•°æ®<span>&nbsp;</span><strong style="font-weight: 600;">ä¿è¯</strong><span>&nbsp;</span>è¾“å…¥çš„æ ‘æ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/serialize-and-deserialize-bst/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 449. åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst2/#åŸºæœ¬æ€è·¯-2)

åœ¨åšæœ¬é¢˜ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆçœ‹å‰æ–‡ [äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ä¸åŒæ–¹å¼](https://labuladong.online/algo/data-structure/serialize-and-deserialize-binary-tree/)ï¼Œç„¶åå°±å¯ä»¥å¾ˆå®¹æ˜“ç†è§£æœ¬é¢˜çš„æ€è·¯äº†ã€‚

äºŒå‰æ ‘çš„æ„é€ ç®—æ³•é€šç”¨æ€è·¯å¾ˆç®€å•ï¼Œæ— éå°±æ˜¯æ„é€ æ ¹èŠ‚ç‚¹ï¼Œç„¶åé€’å½’æ„é€ å·¦å³å­æ ‘ï¼Œæœ€åæŠŠå®ƒä»¬æ¥èµ·æ¥ï¼Œ**å…³é”®åœ¨äºå¦‚ä½•æ‰¾åˆ°æ ¹èŠ‚ç‚¹å’Œå·¦å³å­æ ‘çš„èŠ‚ç‚¹ï¼Œä¸åŒçš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ‰¾æ ¹èŠ‚ç‚¹çš„æ–¹å¼ä¹Ÿä¸åŒ**ã€‚

æœ¬é¢˜å½“ç„¶å¯ä»¥ç›´æ¥å¤åˆ¶ [297. äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–](https://leetcode.cn/problems/serialize-and-deserialize-binary-tree) çš„ä»£ç è¿‡æ¥ï¼Œä½†æ˜¯æ˜¾ç„¶æ²¡æœ‰åˆ©ç”¨åˆ° BST å·¦å°å³å¤§çš„ç‰¹æ€§ï¼Œå¤æ‚åº¦ä¼šæ›´é«˜ã€‚

å¯¹æ¯” 297 é¢˜æ™®é€šäºŒå‰æ ‘çš„åºåˆ—åŒ–ï¼Œåˆ©ç”¨ BST å·¦å°å³å¤§çš„ç‰¹æ€§ä¸»è¦å¯ä»¥é¿å…åºåˆ—åŒ–ç©ºæŒ‡é’ˆï¼Œåˆ©ç”¨ `min, max` è¾¹ç•Œæ¥åˆ’å®šä¸€æ£µå­æ ‘çš„è¾¹ç•Œï¼Œä»è€Œæå‡ç®—æ³•æ•ˆç‡ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ II](https://labuladong.online/algo/problem-set/bst2/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst2/#è§£æ³•ä»£ç -2)

```python
class Codec:
    # åˆ†éš”ç¬¦ï¼ŒåŒºåˆ†æ¯ä¸ªèŠ‚ç‚¹çš„å€¼
    SEP = ","

    def serialize(self, root):
        sb = []
        self._serialize(root, sb)
        return ''.join(sb)

    def _serialize(self, root, sb):
        if root is None:
            return
        # å‰åºéå†ä½ç½®è¿›è¡Œåºåˆ—åŒ–
        sb.append(str(root.val) + self.SEP)
        self._serialize(root.left, sb)
        self._serialize(root.right, sb)

    def deserialize(self, data):
        if not data:
            return None
        # è½¬åŒ–æˆå‰åºéå†ç»“æœ
        inorder = collections.deque(int(s) for s in data.split(self.SEP) if s)
        return self._deserialize(inorder, float('-inf'), float('inf'))

    # å®šä¹‰ï¼šå°† nodes ä¸­å€¼åœ¨é—­åŒºé—´ [min, max] çš„èŠ‚ç‚¹æ„é€ æˆä¸€æ£µ BST
    def _deserialize(self, nodes, min_val, max_val):
        if not nodes:
            return None
        # å‰åºéå†ä½ç½®è¿›è¡Œååºåˆ—åŒ–
        # å‰åºéå†ç»“æœç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹
        root_val = nodes[0]
        if root_val > max_val or root_val < min_val:
            # è¶…è¿‡é—­åŒºé—´ [min, max]ï¼Œåˆ™è¿”å›ç©ºæŒ‡é’ˆ
            return None
        nodes.popleft()
        # ç”Ÿæˆ root èŠ‚ç‚¹
        root = TreeNode(root_val)
        # æ„å»ºå·¦å³å­æ ‘
        # BST å·¦å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå³å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹å¤§
        root.left = self._deserialize(nodes, min_val, root_val)
        root.right = self._deserialize(nodes, root_val, max_val)

        return root
```

æŠ€å·§äºŒ

å¦‚æœè¾“å…¥çš„ä¸æ˜¯æœ‰åºæ•°ç»„ï¼Œè€Œæ˜¯æœ‰åºé“¾è¡¨ï¼Œåº”è¯¥æ€ä¹ˆæ„é€  BST å‘¢ï¼Ÿ

## [109. æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘](https://labuladong.online/algo/problem-set/bst2/#slug_convert-sorted-list-to-binary-search-tree)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">109. æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/convert-sorted-list-to-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/convert-sorted-list-to-binary-search-tree/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ &nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">head</code>&nbsp;ï¼Œå…¶ä¸­çš„å…ƒç´ <span>&nbsp;</span><strong style="font-weight: 600;">æŒ‰å‡åºæ’åº</strong><span>&nbsp;</span>ï¼Œå°†å…¶è½¬æ¢ä¸º<span>&nbsp;</span><span data-keyword="height-balanced">å¹³è¡¡</span><span>&nbsp;</span>äºŒå‰æœç´¢æ ‘ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1:</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img src="https://labuladong.online/algo/images/lc/uploads/2020/08/17/linked.jpg" style="max-width: 100%; height: 388px; width: 500px;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> head = [-10,-3,0,5,9]
<strong style="font-weight: 600;">è¾“å‡º:</strong> [0,-3,9,-10,null,5]
<strong style="font-weight: 600;">è§£é‡Š:</strong> ä¸€ä¸ªå¯èƒ½çš„ç­”æ¡ˆæ˜¯[0ï¼Œ-3,9ï¼Œ-10,null,5]ï¼Œå®ƒè¡¨ç¤ºæ‰€ç¤ºçš„é«˜åº¦å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ã€‚
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2:</strong></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥:</strong> head = []
<strong style="font-weight: 600;">è¾“å‡º:</strong> []
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤º:</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">head</code>&nbsp;ä¸­çš„èŠ‚ç‚¹æ•°åœ¨<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 2 * 10<sup>4</sup>]</code>&nbsp;èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup>&nbsp;&lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/convert-sorted-list-to-binary-search-tree/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 109. æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst2/#åŸºæœ¬æ€è·¯-3)

é“¾è¡¨å’Œæ•°ç»„ç›¸æ¯”çš„ä¸€ä¸ªå…³é”®å·®å¼‚æ˜¯æ— æ³•é€šè¿‡ç´¢å¼•å¿«é€Ÿè®¿é—®å…ƒç´ ï¼Œæ‰€ä»¥è¿™é¢˜æœ‰å‡ ä¸ªæ€è·¯ï¼š

1ã€æŠŠé“¾è¡¨è½¬åŒ–æˆæ•°ç»„ï¼Œç„¶åç›´æ¥å¤ç”¨ [108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree) çš„è§£æ³•ã€‚

2ã€ç¨å¾®æ”¹å†™ [108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree) çš„è§£æ³•ï¼Œç”¨ [å•é“¾è¡¨çš„å…­å¤§è§£é¢˜å¥—è·¯](https://labuladong.online/algo/essential-technique/linked-list-skills-summary/) è¯´åˆ°çš„åŒæŒ‡é’ˆæ–¹æ³•è·å–é“¾è¡¨çš„ä¸­ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ç•¥é«˜ä¸€äº›ã€‚

3ã€å¦‚æœæ·±åˆ»ç†è§£äºŒå‰æ ‘ç®—æ³•ï¼Œå¯ä»¥åˆ©ç”¨ä¸­åºéå†çš„ç‰¹ç‚¹å†™å‡ºæœ€ä¼˜åŒ–çš„è§£æ³•ã€‚

æˆ‘æŠŠç¬¬ 2 å’Œç¬¬ 3 ç§è§£æ³•å†™ä¸€ä¸‹ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ II](https://labuladong.online/algo/problem-set/bst2/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst2/#è§£æ³•ä»£ç -3)

```python
class Solution:

    # è§£æ³•ä¸‰ã€é€šè¿‡ä¸­åºéå†ç‰¹ç‚¹å†™å‡ºçš„è§£æ³•
    def sortedListToBST(self, head: ListNode) -> TreeNode:
        def inorderBuild(left: int, right: int) -> TreeNode:
            if left > right:
                return None
            mid = (left + right) // 2
            # æ„é€ å·¦å­æ ‘
            leftTree = inorderBuild(left, mid - 1)
            # æ„é€ æ ¹èŠ‚ç‚¹
            root = TreeNode(self.cur.val)
            self.cur = self.cur.next
            # æ„é€ å³å­æ ‘
            rightTree = inorderBuild(mid + 1, right)
            # å°†å·¦å³å­æ ‘æ¥åˆ°æ ¹èŠ‚ç‚¹ä¸Š
            root.left = leftTree
            root.right = rightTree
            return root

        len = 0
        p = head
        while p:
            len += 1
            p = p.next

        self.cur = head
        return inorderBuild(0, len - 1)

    # è§£æ³•äºŒã€é€šè¿‡æ‰¾é“¾è¡¨ä¸­ç‚¹çš„æ–¹å¼å†™å‡ºçš„è§£æ³•
    def sortedListToBST_2(self, head: ListNode) -> TreeNode:
        def build(begin: ListNode, end: ListNode) -> TreeNode:
            if begin == end:
                # å› ä¸ºæ˜¯å·¦é—­å³å¼€åŒºé—´ï¼Œæ‰€ä»¥ç°åœ¨å·²ç»æˆç©ºé›†äº†
                return None
            mid = getMid(begin, end)
            root = TreeNode(mid.val)
            root.left = build(begin, mid)
            root.right = build(mid.next, end)
            return root

        def getMid(begin: ListNode, end: ListNode) -> ListNode:
            slow, fast = begin, begin
            while fast != end and fast.next != end:
                slow = slow.next
                fast = fast.next.next
            return slow

        return build(head, None)
```

### [å¯è§†åŒ–](https://labuladong.online/algo/problem-set/bst2/#å¯è§†åŒ–-2)

<details data-v-ee1a9bd0="" id="div_convert-sorted-list-to-binary-search-tree" class="hint-container details" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1rem 0px 0px; border-radius: 0.5rem; margin: 1.3em 0px;"><summary data-v-ee1a9bd0="" style="position: relative; margin: -1rem 0px 0px; padding-block: 1em; padding-inline: 2.3em 1.5em; list-style: none; font-size: large; cursor: pointer; display: flex; align-items: center;"><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="m4.415 18.167l7.17-7.17l1.414 1.414l-7.17 7.17z" opacity="0.3"></path><path data-v-ee1a9bd0="" fill="currentColor" d="m20 7l.94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06l-2.06.94l2.06.94l.94 2.06l.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38l-2.83-2.83c-.2-.19-.45-.29-.71-.29s-.51.1-.71.29L2.29 17.46a.996.996 0 0 0 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42M5.83 19.59l-1.41-1.41L11.59 11L13 12.41zM14.41 11L13 9.59l1.17-1.17l1.41 1.41z"></path></svg>&nbsp;<strong data-v-ee1a9bd0="" style="font-weight: 600;">ç®—æ³•å¯è§†åŒ–é¢æ¿</strong><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" style="margin-left: auto; margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M20 20v1h1v-1zm-4.293-5.707a1 1 0 0 0-1.414 1.414zM19 14v6h2v-6zm1 5h-6v2h6zm.707.293l-5-5l-1.414 1.414l5 5zM4 20H3v1h1zm5.707-4.293a1 1 0 0 0-1.414-1.414zM3 14v6h2v-6zm1 7h6v-2H4zm.707-.293l5-5l-1.414-1.414l-5 5zM20 4h1V3h-1zm-5.707 4.293a1 1 0 0 0 1.414 1.414zM21 10V4h-2v6zm-1-7h-6v2h6zm-.707.293l-5 5l1.414 1.414l5-5zM4 4V3H3v1zm4.293 5.707a1 1 0 0 0 1.414-1.414zM5 10V4H3v6zM4 5h6V3H4zm-.707-.293l5 5l1.414-1.414l-5-5z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="margin-right: 10px;"><path data-v-ee1a9bd0="" fill="currentColor" d="M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"></path></svg><svg data-v-ee1a9bd0="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path data-v-ee1a9bd0="" fill="currentColor" d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"></path></svg></summary><div data-v-ee1a9bd0="" class="resizable" style="width: 954px; max-width: 100%; height: 70vh; min-height: 500px; overflow: hidden; resize: both;"><iframe data-v-ee1a9bd0="" title="algo-visualize panel" allow="clipboard-write; fullscreen;" id="iframe_convert-sorted-list-to-binary-search-tree" src="https://labuladong.online/algo-visualize/leetcode/convert-sorted-list-to-binary-search-tree/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

Tip

æœ€åè¿˜æœ‰ä¸€äº›å¸¸è€ƒçš„å¥—è·¯é¢˜å‹ï¼Œè®°ä½å°±å¥½äº†ã€‚

## [173. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨](https://labuladong.online/algo/problem-set/bst2/#slug_binary-search-tree-iterator)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">173. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨</strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/binary-search-tree-iterator/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/binary-search-tree-iterator/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div>å®ç°ä¸€ä¸ªäºŒå‰æœç´¢æ ‘è¿­ä»£å™¨ç±»<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">BSTIterator</code><span>&nbsp;</span>ï¼Œè¡¨ç¤ºä¸€ä¸ªæŒ‰ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„è¿­ä»£å™¨ï¼š<div class="original__bRMd"><div><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">BSTIterator(TreeNode root)</code><span>&nbsp;</span>åˆå§‹åŒ–<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">BSTIterator</code><span>&nbsp;</span>ç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚BST çš„æ ¹èŠ‚ç‚¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root</code><span>&nbsp;</span>ä¼šä½œä¸ºæ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†ç»™å‡ºã€‚æŒ‡é’ˆåº”åˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸å­˜åœ¨äº BST ä¸­çš„æ•°å­—ï¼Œä¸”è¯¥æ•°å­—å°äº BST ä¸­çš„ä»»ä½•å…ƒç´ ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">boolean hasNext()</code><span>&nbsp;</span>å¦‚æœå‘æŒ‡é’ˆå³ä¾§éå†å­˜åœ¨æ•°å­—ï¼Œåˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">true</code><span>&nbsp;</span>ï¼›å¦åˆ™è¿”å›<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">false</code><span>&nbsp;</span>ã€‚</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">int next()</code>å°†æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œç„¶åè¿”å›æŒ‡é’ˆå¤„çš„æ•°å­—ã€‚</li></ul><p style="line-height: 1.6; overflow-wrap: break-word; margin-bottom: 0px; padding-bottom: 0px;">æ³¨æ„ï¼ŒæŒ‡é’ˆåˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸å­˜åœ¨äº BST ä¸­çš„æ•°å­—ï¼Œæ‰€ä»¥å¯¹<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">next()</code><span>&nbsp;</span>çš„é¦–æ¬¡è°ƒç”¨å°†è¿”å› BST ä¸­çš„æœ€å°å…ƒç´ ã€‚</p></div></div><p style="line-height: 1.6; overflow-wrap: break-word;">ä½ å¯ä»¥å‡è®¾<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">next()</code><span>&nbsp;</span>è°ƒç”¨æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è°ƒç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">next()</code><span>&nbsp;</span>æ—¶ï¼ŒBST çš„ä¸­åºéå†ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªä¸‹ä¸€ä¸ªæ•°å­—ã€‚</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ï¼š</strong></p><img alt="" src="https://labuladong.online/algo/images/lc/uploads/2018/12/25/bst-tree.png" style="max-width: 100%; width: 189px; height: 178px;"><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥</strong>
["BSTIterator", "next", "next", "hasNext", "next", "hasNext", "next", "hasNext", "next", "hasNext"]
[[[7, 3, 15, null, null, 9, 20]], [], [], [], [], [], [], [], [], []]
<strong style="font-weight: 600;">è¾“å‡º</strong>
[null, 3, 7, true, 9, true, 15, true, 20, false]

<strong style="font-weight: 600;">è§£é‡Š</strong>
BSTIterator bSTIterator = new BSTIterator([7, 3, 15, null, null, 9, 20]);
bSTIterator.next();    // è¿”å› 3
bSTIterator.next();    // è¿”å› 7
bSTIterator.hasNext(); // è¿”å› True
bSTIterator.next();    // è¿”å› 9
bSTIterator.hasNext(); // è¿”å› True
bSTIterator.next();    // è¿”å› 15
bSTIterator.hasNext(); // è¿”å› True
bSTIterator.next();    // è¿”å› 20
bSTIterator.hasNext(); // è¿”å› False
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[1, 10<sup>5</sup>]</code><span>&nbsp;</span>å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">0 &lt;= Node.val &lt;= 10<sup>6</sup></code></li><li>æœ€å¤šè°ƒç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">10<sup>5</sup></code><span>&nbsp;</span>æ¬¡<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">hasNext</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">next</code><span>&nbsp;</span>æ“ä½œ</li></ul><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">è¿›é˜¶ï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">next()</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">hasNext()</code><span>&nbsp;</span>æ“ä½œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">O(1)</code><span>&nbsp;</span>ï¼Œå¹¶ä½¿ç”¨<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">O(h)</code><span>&nbsp;</span>å†…å­˜ã€‚å…¶ä¸­<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">h</code><span>&nbsp;</span>æ˜¯æ ‘çš„é«˜åº¦ã€‚</li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/binary-search-tree-iterator/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 173. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨</a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst2/#åŸºæœ¬æ€è·¯-4)

åˆ©ç”¨æ ˆæ¨¡æ‹Ÿé€’å½’å¯¹ BST è¿›è¡Œä¸­åºéå†å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§å¥—è·¯é¢˜å‹ï¼Œä½ è®°ä½å°±å¥½äº†ï¼Œå…³é”®åœ¨äºç†è§£ `pushLeftBranch` å‡½æ•°ï¼Œæ·±åˆ»ç†è§£äºŒå‰æ ‘é€’å½’éå†çš„è¿‡ç¨‹ï¼š

![img](1.gif)

å¦å¤–ï¼Œæˆ‘è¿˜æ€»ç»“äº†ä¸€å¥—äºŒå‰æ ‘å„ç§éå†é¡ºåºé€šç”¨çš„é€’å½’è½¬è¿­ä»£ä»£ç æ¡†æ¶ï¼Œè¯¦è§ [äºŒå‰æ ‘é€šç”¨è¿­ä»£æ¡†æ¶](https://labuladong.online/algo/data-structure/iterative-traversal-binary-tree/)ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ II](https://labuladong.online/algo/problem-set/bst2/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst2/#è§£æ³•ä»£ç -4)

```python
class BSTIterator:
    # æ¨¡æ‹Ÿé€’å½’æ ˆ
    def __init__(self, root: TreeNode):
        self.stk = []
        self.pushLeftBranch(root)

    # å·¦ä¾§æ ‘æä¸€æ’¸åˆ°åº•
    def pushLeftBranch(self, p: TreeNode):
        while p is not None:
            self.stk.append(p)
            p = p.left

    def next(self) -> int:
        p = self.stk.pop()
        self.pushLeftBranch(p.right)
        return p.val

    def hasNext(self) -> bool:
        return len(self.stk) > 0
```

**ç±»ä¼¼é¢˜ç›®**ï¼š

- [1214. æŸ¥æ‰¾ä¸¤æ£µäºŒå‰æœç´¢æ ‘ä¹‹å’Œ ğŸŸ ](https://leetcode.cn/problems/two-sum-bsts)
- [1305. ä¸¤æ£µäºŒå‰æœç´¢æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´  ğŸŸ ](https://leetcode.cn/problems/all-elements-in-two-binary-search-trees)
- [å‰‘æŒ‡ Offer II 055. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨ ğŸŸ ](https://leetcode.cn/problems/kTOapQ)

## [1305. ä¸¤æ£µäºŒå‰æœç´¢æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´ ](https://labuladong.online/algo/problem-set/bst2/#slug_all-elements-in-two-binary-search-trees)

<details class="hint-container details" open="" style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.1); transition: background 0.3s ease 0s, color 0.3s ease 0s; display: block; margin-block: 0.75rem; padding: 1.25rem 1rem; border-radius: 0.5rem; color: rgb(60, 60, 67); font-family: Inter, ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="position: relative; margin: -1rem -1rem 0.5em; padding-block: 1em; padding-inline: 3em 1.5em; list-style: none; font-size: 16px; cursor: pointer;"><strong style="font-weight: 600;">1305. ä¸¤æ£µäºŒå‰æœç´¢æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´ </strong>&nbsp;|<span>&nbsp;</span><span><a href="https://leetcode.cn/problems/all-elements-in-two-binary-search-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£</a><span>&nbsp;</span>|<span>&nbsp;</span></span><span><a href="https://leetcode.com/problems/all-elements-in-two-binary-search-trees/" class="" target="_blank" rel="noopener noreferrer" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">LeetCode</a><span>&nbsp;</span>|</span><span>&nbsp;</span>&nbsp;ğŸŸ </summary><div><p style="line-height: 1.6; overflow-wrap: break-word;">ç»™ä½ &nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root1</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">root2</code>&nbsp;è¿™ä¸¤æ£µäºŒå‰æœç´¢æ ‘ã€‚è¯·ä½ è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«&nbsp;<strong style="font-weight: 600;">ä¸¤æ£µæ ‘&nbsp;</strong>ä¸­çš„æ‰€æœ‰æ•´æ•°å¹¶æŒ‰<span>&nbsp;</span><strong style="font-weight: 600;">å‡åº</strong><span>&nbsp;</span>æ’åºã€‚.</p><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 1ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/12/29/q2-e1.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [2,1,4], root2 = [1,0,3]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[0,1,1,2,3,4]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">ç¤ºä¾‹ 2ï¼š</strong></p><p style="line-height: 1.6; overflow-wrap: break-word;"><img alt="" src="https://labuladong.online/algo/images/lc/aliyun-lc-upload/uploads/2019/12/29/q2-e5-.png" style="max-width: 100%;"></p><pre style="text-align: left; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: unset; tab-size: 4; hyphens: none; overflow: auto;"><strong style="font-weight: 600;">è¾“å…¥ï¼š</strong>root1 = [1,null,8], root2 = [8,1]
<strong style="font-weight: 600;">è¾“å‡ºï¼š</strong>[1,1,8,8]
</pre><p style="line-height: 1.6; overflow-wrap: break-word;"><strong style="font-weight: 600;">æç¤ºï¼š</strong></p><ul style="line-height: 1.6; overflow-wrap: break-word; padding-inline-start: 1.2em;"><li>æ¯æ£µæ ‘çš„èŠ‚ç‚¹æ•°åœ¨&nbsp;<code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">[0, 5000]</code><span>&nbsp;</span>èŒƒå›´å†…</li><li><code style="font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; margin: 0px; padding: 3px 6px; border-radius: 4px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(142, 150, 170, 0.14); font-size: 0.875em; overflow-wrap: break-word; transition: background-color 0.3s, color 0.3s;">-10<sup>5</sup>&nbsp;&lt;= Node.val &lt;= 10<sup>5</sup></code></li></ul></div><strong style="font-weight: 600; font-size: small;">é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/all-elements-in-two-binary-search-trees/" class="" target="_blank" style="color: rgb(7, 86, 171); font-weight: 500; text-decoration: none; overflow-wrap: break-word;">åŠ›æ‰£ 1305. ä¸¤æ£µäºŒå‰æœç´¢æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´ </a>ã€‚</strong></details>

### [åŸºæœ¬æ€è·¯](https://labuladong.online/algo/problem-set/bst2/#åŸºæœ¬æ€è·¯-5)

ä½ å¯ä»¥ç›´æ¥ä¸­åºéå†ä¸¤ä¸ª BST å¾—åˆ°ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œç„¶åæŠŠè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶ï¼Œè¿™ä¸ªæ€è·¯ç®€å•ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦ä¼šé«˜ä¸€äº›ã€‚

æ¯”è¾ƒå¥½çš„åŠæ³•æ˜¯ç”¨ [173. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨](https://leetcode.cn/problems/binary-search-tree-iterator) ä¸­å®ç°çš„ BST è¿­ä»£å™¨ï¼Œç„¶åç±»ä¼¼æˆ‘ä»¬è§£å†³ [21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode.cn/problems/merge-two-sorted-lists) ä¸­çš„é€»è¾‘æ“ä½œè¿™ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œè·å¾—åˆå¹¶çš„æœ‰åºç»“æœã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€ç»ƒä¹ ã€‘äºŒå‰æœç´¢æ ‘ç»å…¸ä¾‹é¢˜ II](https://labuladong.online/algo/problem-set/bst2/)

### [è§£æ³•ä»£ç ](https://labuladong.online/algo/problem-set/bst2/#è§£æ³•ä»£ç -5)

```python
class Solution:
    def getAllElements(self, root1: TreeNode, root2: TreeNode) -> List[int]:
        # BST æœ‰åºè¿­ä»£å™¨
        t1 = BSTIterator(root1)
        t2 = BSTIterator(root2)
        res = []
        # ç±»ä¼¼åˆå¹¶æœ‰åºé“¾è¡¨çš„ç®—æ³•é€»è¾‘
        while t1.hasNext() and t2.hasNext():
            if t1.peek() > t2.peek():
                res.append(t2.next())
            else:
                res.append(t1.next())
        # å¦‚æœæœ‰ä¸€æ£µ BST è¿˜å‰©å…ƒç´ ï¼Œæ·»åŠ åˆ°æœ€å
        while t1.hasNext():
            res.append(t1.next())
        while t2.hasNext():
            res.append(t2.next())
        return res

# BST æœ‰åºè¿­ä»£å™¨
class BSTIterator:

    def __init__(self, root: TreeNode):
        self.stk = []
        self.pushLeftBranch(root)

    # å·¦ä¾§æ ‘æä¸€æ’¸åˆ°åº•
    def pushLeftBranch(self, p: TreeNode):
        while p:
            self.stk.append(p)
            p = p.left

    def peek(self) -> int:
        return self.stk[-1].val

    def next(self) -> int:
        p = self.stk.pop()
        self.pushLeftBranch(p.right)
        return p.val

    def hasNext(self) -> bool:
        return bool(self.stk)
```
